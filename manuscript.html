<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Oleksandr Husak" />
  <meta name="author" content="M.Sc. Dmytro Pukhkaiev" />
  <meta name="author" content="Dr.-Ing. Sebastian Götz" />
  <meta name="author" content="Prof. Dr. rer. nat habil. Uwe Assmann" />
  <meta name="dcterms.date" content="2020-05-29" />
  <meta name="keywords" content="multi-objective optimization, surrogate models, parameter tuning, search-based software engineering" />
  <title>Compositional Multi-objective Parameter Tuning</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <!--
  Manubot generated metadata rendered from header-includes-template.html.
  Suggest improvements at https://github.com/manubot/manubot/blob/master/manubot/process/header-includes-template.html
  -->
  <meta name="dc.format" content="text/html" />
  <meta name="dc.title" content="Compositional Multi-objective Parameter Tuning" />
  <meta name="citation_title" content="Compositional Multi-objective Parameter Tuning" />
  <meta property="og:title" content="Compositional Multi-objective Parameter Tuning" />
  <meta property="twitter:title" content="Compositional Multi-objective Parameter Tuning" />
  <meta name="dc.date" content="2020-05-29" />
  <meta name="citation_publication_date" content="2020-05-29" />
  <meta name="dc.language" content="en-US" />
  <meta name="citation_language" content="en-US" />
  <meta name="dc.relation.ispartof" content="Manubot" />
  <meta name="dc.publisher" content="Manubot" />
  <meta name="citation_journal_title" content="Manubot" />
  <meta name="citation_technical_report_institution" content="Manubot" />
  <meta name="citation_author" content="Oleksandr Husak" />
  <meta name="citation_author_institution" content="Faculty of Computer Science, TU Dresden" />
  <meta name="citation_author_orcid" content="0000-0002-1676-0042" />
  <meta name="citation_author" content="M.Sc. Dmytro Pukhkaiev" />
  <meta name="citation_author_institution" content="Faculty of Computer Science, TU Dresden" />
  <meta name="citation_author" content="Dr.-Ing. Sebastian Götz" />
  <meta name="citation_author_institution" content="Faculty of Computer Science, TU Dresden" />
  <meta name="citation_author" content="Prof. Dr. rer. nat habil. Uwe Assmann" />
  <meta name="citation_author_institution" content="Faculty of Computer Science, TU Dresden" />
  <link rel="canonical" href="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/" />
  <meta property="og:url" content="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/" />
  <meta property="twitter:url" content="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/" />
  <meta name="citation_fulltext_html_url" content="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/" />
  <meta name="citation_pdf_url" content="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/manuscript.pdf" />
  <link rel="alternate" type="application/pdf" href="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/manuscript.pdf" />
  <link rel="alternate" type="text/html" href="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/v/d10dc7081d7b739c65d803b0a7635461e8b00a04/" />
  <meta name="manubot_html_url_versioned" content="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/v/d10dc7081d7b739c65d803b0a7635461e8b00a04/" />
  <meta name="manubot_pdf_url_versioned" content="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/v/d10dc7081d7b739c65d803b0a7635461e8b00a04/manuscript.pdf" />
  <meta property="og:type" content="article" />
  <meta property="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://manubot.org/favicon-192x192.png" />
  <link rel="mask-icon" href="https://manubot.org/safari-pinned-tab.svg" color="#ad1457" />
  <meta name="theme-color" content="#ad1457" />
  <!-- end Manubot generated metadata -->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Compositional Multi-objective Parameter Tuning</h1>
</header>
<p>Master Thesis</p>
<p><small><em></p>
<p>(<a href="https://Valavanca.github.io/compositional-system-for-hyperparameter-tuning/v/d10dc7081d7b739c65d803b0a7635461e8b00a04/">permalink</a>)
</em></small></p>
<h2 id="authors">Authors</h2>
<ul>
<li><p><strong>Oleksandr Husak</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0002-1676-0042">0000-0002-1676-0042</a>
<img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/Valavanca">Valavanca</a> <br>
<span>
Faculty of Computer Science, TU Dresden
</span></p></li>
<li><p><strong>M.Sc. Dmytro Pukhkaiev</strong><br>
<img src="images/utility/web.svg" class="inline_icon" alt="web icon" />
<a href="https://tu-dresden.de/ing/informatik/smt/st/die-professur/mitarbeiter?person=412&amp;embedding_id=1e8badf421c649b89f65fb84a05ecbb0&amp;set_language=en">website</a> <br>
<span>
Faculty of Computer Science, TU Dresden
</span></p></li>
<li><p><strong>Dr.-Ing. Sebastian Götz</strong><br>
<img src="images/utility/web.svg" class="inline_icon" alt="web icon" />
<a href="https://tu-dresden.de/ing/informatik/smt/st/die-professur/mitarbeiter?person=143&amp;embedding_id=1e8badf421c649b89f65fb84a05ecbb0">website</a> <br>
<span>
Faculty of Computer Science, TU Dresden
</span></p></li>
<li><p><strong>Prof. Dr. rer. nat habil. Uwe Assmann</strong><br>
<img src="images/utility/web.svg" class="inline_icon" alt="web icon" />
<a href="http://www1.inf.tu-dresden.de/~ua1/">website</a> <br>
<span>
Faculty of Computer Science, TU Dresden
</span></p></li>
</ul>
<h1 class="page_break_before" id="abstract">Abstract</h1>
<p>Multi-objective decision-making is critical for everyday tasks and
engineering problems. Finding the perfect trade-off to maximize all the
solution’s criteria requires a considerable amount of experience or the
availability of a significant number of resources. This makes these
decisions difficult to achieve for expensive problems such as
engineering. Most of the time, to solve such expensive problems, we are
limited by time, resources, and available expertise. Therefore, it is
desirable to simplify or approximate the problem when possible before
solving it. The state-of-the-art approach for simplification is
model-based or surrogate-based optimization. These approaches use
approximation models of the real problem, which are cheaper to evaluate.
These models, in essence, are simplified hypotheses of cause-effect
relationships, and they replace high estimates with cheap
approximations. In this thesis, we investigate surrogate models as
wrappers for the real problem and apply Multi-objective evolutionary algorithm (MOEA) to find Pareto optimal
decisions.</p>
<p>The core idea of surrogate models is the combination and stacking of
several models that each describe an independent objective. When
combined, these independent models describe the multi-objective space
and optimize this space as a single surrogate hypothesis - the surrogate
compositional model. The combination of multiple models gives the
potential to approximate more complicated problems and stacking of valid
surrogate hypotheses speeds-up convergence. Consequently, a better
result is obtained at lower costs. We combine several possible surrogate
variants and use those that pass validation. After recombination of
valid single objective surrogates to a multi-objective surrogate
hypothesis, several instances of MOEAs provide several Pareto front
approximations. The modular structure of implementation allows us to
avoid a static sampling plan and use self-adaptable models in a
customizable portfolio. In numerous case studies, our methodology finds
comparable solutions to standard NSGA2 using considerably fewer
evaluations. We recommend the present approach for parameter tuning of
expensive black-box functions.</p>
<h1 id="sec:intro">Introduction</h1>
<h2 id="motivation">Motivation</h2>
<p>To find solutions to real-world engineering problems, it is often
necessary to find and apply adequate parameters. The search for these
parameters is a computationally expensive problem and requires
optimization. This search is often achieved with the help of the
parameter tuning or in other words, parameter optimization process.
Traditionally engineers adhere to the manual parameter tuning; they put
the effort in searching the optimal objectives guided by experience and
intuition. Nevertheless, many of these optimization problems have vast
search spaces that could be handled only with automatic tools. These
tools can extrapolate and highlight the most perspective parameters from
infinite space. At the same time, they struggles with multi-criteria
decisions that are critical for engineering problems. For examples:
architecture design, test generation, tuning machine-learning algorithms
could be stated as multi-objective problems. To understand the space of
possible solutions, they are represented on the Pareto front; i.e., the
subset of solutions that could be not improved in some objective without
degrading another. Multi-objective algorithms allow to find out some
Pareto optimal solutions. Still, we require a massive amount of
evaluations to obtain those solutions, and that is inappropriate for
expensive problems. A common approach in the reduction of the final cost
of the optimization algorithm is to replace some expensive estimations
with cheaper ones with the help of surrogate models. The conventional
algorithms to extrapolate available results are Bayesian Regression
model (Kriging), neural networks, Support Vector Regression (SVR) or
Tree regressions (Decision) estimators. However, almost all
optimizations approaches use static models or aggregate several
instances of one model type. These approaches lack variability and
cannot be finely tuned.</p>
<p>Ability to change the surrogate model strongly influences the
optimization result. There is a demand for a strategy that allows us to
combine multiple single-objective surrogate models to extrapolate
multi-dimensional search spaces. This composition would make the
surrogate model more versatile and capable of describing arbitrary
optimization problems. Furthermore, it has been noted that the surrogate
is domain-specific, and the same technique might perform differently on
different problems. That is why extrapolation variability from the range
of models improves final optimization results. However, only few
researchers have addressed the solution of dynamic surrogate model
selection.</p>
<p>Also, it is essential to obtain the necessary and sufficient number of
samples to build an appropriate model. Unfortunately, to choose the
optimum number of samples, it is required to have additional knowledge
about a problem that is usually unknown. Moreover, arbitrary decisions
on the sample size might be a reason that leads to inaccurate models and
further wrong results.</p>
<h2 id="objectives">Objectives</h2>
<p>For this thesis, we have chosen two broad objectives that we tried to
achieve. The first objective is to develop strategies that can
dynamically compose the surrogate model from several single-objective
models. The second objective is to enhance parameter tuning with the
best practices from multi-objective optimizations techniques. Successful
fulfilment of those objectives means an overall improvement in the area
that concerns with optimization of expensive black-box functions. Also,
success implies the possibility of application of developed tools to the
broader spectre of real-world problems.</p>
<h2 id="rq">Research questions</h2>
<p>To achieve our objectives we defined three research questions, which we
answer in this thesis. Those research questions are:</p>
<ul>
<li><p><strong>RQ1</strong>: Does the dynamic composition of different single-objective
models improve the extrapolation of multi-objective problems?</p></li>
<li><p><strong>RQ2</strong>: Does a portfolio of surrogate models enhance optimization
results?</p></li>
<li><p><strong>RQ3</strong>: Does a dynamic sampling plan help accelerate obtaining an
optimal solution?</p></li>
</ul>
<p>The purpose of this study is to provide a mechanism of a fined-grained
models composition that allows making a superior multi-objective
decision. Prerequisite for such solution is to reduce the number of
actual evaluations while keeping the optimal quality of a decision.</p>
<h2 id="results-overview">Results overview</h2>
<p>In this thesis, we introduce a modular structure for multi-objective
parameter tuning that allows us to use various surrogate models and
apply various optimization techniques. The overall results were achieved
in several stages: 1) In response to RQ1, a composite model was
implemented to combine several surrogate models. This solution made it
possible to treat multi-objective extrapolation as a combination of
single-objective models. 2) In response to RQ2 and RQ3, we developed a
surrogate portfolio that enhances our strategy with the possibility to
select surrogate models dynamically. Model selection is based on
surrogate validation, which is also used as a criterion to check the
sampling plan. An approach, combining all the aforementioned key
features that answer the research questions was implemented under the
name TutorM.</p>
<p>The evaluation results from a wide range of problems showed excellent
results and advantage of TutorM strategy over comparable approaches:
NSGA2 and Hypermapper 2.0. TutorM also provides a possibility of
scalable solutions for problems that demand that.</p>
<p>The results can be used to improve the applicability of model-based
optimization to a variety of expensive multi-objective parameter tuning
problems.</p>
<h1 class="page_break_before" id="sec:background">Background</h1>
<p>This chapter presents general background information needed to follow
the terms and methods used in this thesis.</p>
<h2 id="parameter-tuning">Parameter tuning</h2>
<p>We start by introducing a parameter tuning problem. We consider a
objective function as a black-box
<span class="math inline">\(f : \mathbb{S} \rightarrow \mathbb{R}\)</span> with parameter and objective
spaces (Figure <a href="#fig:spaces">1</a>). All feasible combinations of parameters
define a parameter space which is intended to be a function input
<span class="math inline">\(\mathbb{S}\)</span>, and therefore all possible function outputs are defined as
an objective space or <span class="math inline">\(f(x), x \in \mathbb{S}\)</span>. The minimization of the
fitness function could be defined as follows:</p>
<p><span class="math display">\[\label{eq:arg_min}
                    x^* = \underset{x \in \mathbb{S}}{\arg\min} f(x)\]</span></p>
<div id="fig:spaces" class="fignos">
<figure>
<img src="images/utility/spaces.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 1:</span> Example with uniformly distributed points in the parameter space (left) with the corresponding values of these parameters in the objective space (right). As can be noted from the results, the optimization of both objectives (<span class="math inline">\(f_1\)</span>, <span class="math inline">\(f_2\)</span>) is contradictory.</figcaption>
</figure>
</div>
<p>The mapping of all points from the parameter space to the points in the
objective space is called a fitness landscape. The goal of parameter
tuning is to find optimal points on this surface. Depending on the type
of landscape, the optimization search often yields qualitatively
different behaviour. A single criterion in the parameter tuning process
might not be sufficient to characterize the behaviour of the
configuration space correctly. Therefore, multiple criteria have to be
considered. Typical examples of objectives are to enhance accuracy and
performance or minimize runtime, error rate and energy. The parameter
tuning process should improve the objectives of those in which none of
the objectives can be improved without affecting another objective. By
default, we consider minimization for all objectives. In this thesis, we
are interested in the following properties of parameter tuning:</p>
<ul>
<li><p>Evaluation is expensive.</p></li>
<li><p>Black-box function and the number of evaluated results are unknown.</p></li>
<li><p>Multi-objectivity with global minimization.</p></li>
</ul>
<h2 id="multi-objective-optimization">Multi-objective optimization</h2>
<p>Common parameter tuning problems require the simultaneous optimization
of multiple, usually contradictory, objectives
<span class="math inline">\(f = (f_1(x), \ldots, f_k(x))\)</span>. Multi-objective optimization deals with
such conflicts. It provides a mathematical algorithm with which to
obtain an optimal design state that accommodates the various criteria
demanded by the situation. Objectives are being improved simultaneously
and gradually.</p>
<p>The solution to the multi-objective problem is a group of points which
are placed on a Pareto front; i.e. the subset of solutions which are not
worse than any other and better at least one goal <span class="citation" data-cites="15iqjq0XF">[<a href="#ref-15iqjq0XF" role="doc-biblioref">1</a>]</span>. A
solution is called a Pareto optimum if no other solution dominates it.
For example (Figure <a href="#fig:dominated">2</a>) a solution <span class="math inline">\(A \in \mathbb{S}\)</span> is said to dominate another solution <span class="math inline">\(B \in \mathbb{S}\)</span> , denoted <span class="math inline">\(A \preceq B\)</span> if <span class="math inline">\(f_i(A)&lt;=f_i(B)\)</span> for all <span class="math inline">\(i=1, \ldots ,k\)</span> and <span class="math inline">\(f_i(A)&lt;f_i(B)\)</span> for at least one <span class="math inline">\(i \in \{1, \ldots k\}\)</span>. All points on the Pareto frontier are not dominated by any other point in the objective space <span class="citation" data-cites="czq5Shcc">[<a href="#ref-czq5Shcc" role="doc-biblioref">2</a>]</span>.</p>
<p>Awareness of the Pareto front allows appropriate decision-making and the
importance of the criteria to be visualized. For the multi-objective
problem, we consider the solution as points from the parameter space
which lead to non-dominated results in the objective space. Improvement
of the solution means finding a set of points that corresponds better
with the real Pareto front.</p>
<div id="fig:dominated" class="fignos">
<figure>
<img src="images/ndom.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 2:</span> Example of non-dominated points. Point A dominates all points in the internal sector where B is located. Concerning point A, point C is not dominant because it has better value in <span class="math inline">\(f_1\)</span></figcaption>
</figure>
</div>
<h3 id="metrics-for-multi-objective-solution">Metrics for multi-objective solution</h3>
<p>In a single-objective optimization, the quality of a given solution is
trivial to quantify. When we consider a solution of a multi-objective
problem as a Pareto optimal approximation, the comparison of these
solutions is also a multi-objective task. The question of picking
metrics for evaluation is essential for comparison of approximated
solutions and for selection of the next appropriate set of
configurations.</p>
<p>According to <span class="citation" data-cites="cgOPGY3M">[<a href="#ref-cgOPGY3M" role="doc-biblioref">3</a>]</span>, a Pareto front approximation should satisfy
the following criteria:</p>
<ul>
<li><p>The distance between the Pareto front and its approximation should
be minimized.</p></li>
<li><p>A wide distribution of non-dominated points is desirable.</p></li>
<li><p>The range of the approximated front should be maximized, i.e., for
each objective, a wide range of values should be covered by the
non-dominated points.</p></li>
</ul>
<p>The metrics for performance indicators are partitioned into four groups
according to their properties <span class="citation" data-cites="vbJ1WiNp">[<a href="#ref-vbJ1WiNp" role="doc-biblioref">4</a>]</span>:</p>
<ul>
<li><p><em>Cardinality.</em> Estimation of the number of non-dominated points.</p></li>
<li><p><em>Convergence.</em> Estimation of the closeness of a set of non-dominated
points to the Pareto front in the objective space.</p></li>
<li><p><em>Distribution and spread indicators.</em> Measurement of the points
distributed on the Pareto front approximation or of their allotment
in extreme points of the Pareto front.</p></li>
<li><p><em>Convergence and distribution indicators.</em> Capture of both the
properties of convergence and distribution.</p></li>
</ul>
<p>According to <span class="citation" data-cites="DCdONjBz">[<a href="#ref-DCdONjBz" role="doc-biblioref">5</a>]</span>, the spread metrics try to measure the
areas achieved in a computed Pareto front approximation. This type of
metrics is not very useful for comparison of algorithms or for
evaluation of optimization convergence because spreadness is not related
to improvement the objectives. However, they could be useful for a more
detailed analysis of the optimization process or for composing Pareto
frontier from several solutions.</p>
<p>The goal of the multi-objective optimization is to obtain an
approximated solution set with the reference to the Pareto front,
including the following subgoals:</p>
<ul>
<li><p>All solution sets are as close as possible to the Pareto front.</p></li>
<li><p>All solution sets are as diverse as possible in the objective space.</p></li>
<li><p>The proportion of the solution set to the evaluated set is as large
as possible.</p></li>
<li><p>Evaluate as few solutions as feasible.</p></li>
</ul>
<p>For multi-objective optimization, an algorithm should produce a set of
solutions which provide the optimal trade-off between the considered
optimization objectives. Therefore, the performance comparison of Multi-objective optimization
algorithms is based on their Pareto sets. In this study, four well-known
metrics are used to quantify the performance of algorithms.</p>
<ul>
<li><p><strong>Hypervolume (HV).</strong><span class="citation" data-cites="cgOPGY3M">[<a href="#ref-cgOPGY3M" role="doc-biblioref">3</a>]</span> <em>Convergence and distribution
indicator.</em> This metric represents the volume of the objective space
which is filled by the individuals points of non-dominated solutions
which belong to the Pareto front (Figure <a href="#fig:hypervolume">3</a> <a href="#fig:hypervolume_impr">4</a>). Two
points delimit the volume: one point represents the reference point
<span class="math inline">\(r\)</span> (<span class="math inline">\(r \in R^m\)</span>) which is defined as the worst solution inside the
objective spaceand the other one is the point which represents the
Pareto approximation <span class="math inline">\(S\)</span>, for all <span class="math inline">\(z \in S, z \prec r\)</span>. The
hypervolume metric is defined as follows:</p>
<p><span class="math display">\[HV(S,r) = \lambda_m(\bigcup\limits_{z \in S} [z;r])\]</span></p>
<p>where <span class="math inline">\(\lambda_m\)</span> is m-dimensional Lebesgue measure. Calculating the
hypervolume indicator is a computationally expensive task.
Furthermore, in the case of a small number of dimensions and a low
number of points, there are currently no known algorithms which
might return the results fast enough for use due to the
computational complexity which is
$(|S|^{}) $ <span class="citation" data-cites="Hp8tHCir">[<a href="#ref-Hp8tHCir" role="doc-biblioref">6</a>]</span>.</p></li>
<li><p><strong>Non-dominated Ratio (NDR).</strong> <em>Cardinality.</em> This metric is the
ratio between the number of non-dominated points and the total
number of the evaluated points. Higher values are preferred to lower
ones.</p></li>
<li><p><strong>Spacing <span class="citation" data-cites="1AKoZUHA4">[<a href="#ref-1AKoZUHA4" role="doc-biblioref">7</a>]</span>.</strong> <em>Distribution and spread.</em> This
metric describe the distribution of Pareto points. As a wide range
of similar metrics which are based on the distance to the nearest
neighbour, spacing does not cover the holes in Pareto frontier and
might compute the distribution in solution clusters.</p></li>
<li><p><strong><span class="math inline">\(\Upsilon\)</span>-metric (p-distance)</strong><span class="citation" data-cites="kRD0G3XY">[<a href="#ref-kRD0G3XY" role="doc-biblioref">8</a>]</span> <em>Convergence</em> The
average distance of a set of points in relation to the Pareto front.
<span class="math inline">\(\Upsilon\)</span>-metric is defined by</p>
<p><span class="math display">\[\Upsilon(S) = \frac{1}{|S|}\sum_{z\in S}g(z)-g(x^*)\]</span> where <span class="math inline">\(g\)</span> is
a distance function and <span class="math inline">\(x^*\)</span> is the Pareto-optimal decision vector.
The lower the <span class="math inline">\(\Upsilon (S)\)</span>, the closer the solutions of S are to
the solutions of the Pareto front.</p></li>
</ul>
<div id="fig:hypervolume" class="fignos">
<figure>
<img src="images/utility/hypervolume.svg" style="width:85.0%" alt="" /><figcaption><span>Figure 3:</span> Higher hypervolume values may correspond to a better distribution of solutions or closeness to the Pareto front.</figcaption>
</figure>
</div>
<div id="fig:hypervolume_impr" class="fignos">
<figure>
<img src="images/utility/hypervolume_impr.svg" style="width:85.0%" alt="" /><figcaption><span>Figure 4:</span> Example of hypervolume improvement with a new non-dominated point z* in the solution set.</figcaption>
</figure>
</div>
<h3 id="solving-methods">Solving methods</h3>
<p>Finding a Pareto optimal set is often impractical and computationally
expensive. Therefore, many stochastic search strategies have been
developed, such as: evolutionary algorithms, tabu search, simulated
annealing and ant colony optimization. These algorithms usually do not
ensure finding ideal trade-offs, but try to gain a satisfactory
approximation. In this thesis, we interpret the Pareto optimum as the
optimal solution to the problem. As mentioned, all points on the Pareto
front are non-dominated, but not all non-dominated points are Pareto
optimal. There are several basic approaches which provide information
about how non-dominated points move toward a Pareto-optimal solution.
Those approaches include: scalarization and Multi-objective evolutionary algorithm (MOEA). We describe them in next
the sections.</p>
<h4 id="scalarization">Scalarization</h4>
<p>The Scalarizing approach is a popular technique for creating a
single-objective <em>parameterized</em> problem with the composite criteria
from multiple objectives. The main advantage of scalarization is the
possibility to use a broad range of single-objective techniques on this
composite function. After optimization, one Pareto optimal solution is
obtained, which depends on the initial scalarization parameters. The
weighted-sum method is a well-known type of scalarizing technique. This
approach concatenates the objectives into a single criterion by using
weighted sum factors. There are difficulties in selecting proper
weights, especially when there is no correlation in prior knowledge
among objectives <span class="citation" data-cites="19PHyqZWt CE69KuZH">[<a href="#ref-19PHyqZWt" role="doc-biblioref">9</a>,<a href="#ref-CE69KuZH" role="doc-biblioref">10</a>]</span>.</p>
<p>Some scalarizing techniques try to improve the exploration of the
parameter space by assigning more “intelligent” aggregation to
objectives. Such solutions can be fragile; they change dramatically with
the modification of algorithm parameters. Moreover, the weighting method
cannot provide a solution among underparts of the Pareto surface due to
the “duality gap” for non-convex cases. This refers to the replacement
of a non-convex original function with convex closure which missed
non-convex parts of the initial landscape. Additionally, some
scalarizing algorithms are very sensitive to the number of objectives.
Analysis of the fitness landscape with different scalarizing techniques
might be helpful in the optimization for solving expensive
<span class="citation" data-cites="19PHyqZWt">[<a href="#ref-19PHyqZWt" role="doc-biblioref">9</a>]</span>.</p>
<h4 id="multi-objective-evolutionary-algorithms">Multi-Objective Evolutionary Algorithms</h4>
<p>Evolutionary algorithms form a class of heuristic search methods which
simulate the process of a natural evolution. The evolutionary algorithm
is determined by the two basic principles: selection and variation
<span class="citation" data-cites="ZELkJp0w">[<a href="#ref-ZELkJp0w" role="doc-biblioref">11</a>]</span>. While selection reflects competition for
reproduction and resources among individuals, the other principle,
variation, imitates the natural ability to produce new individuals
through recombination and mutation. Evolutionary algorithms are suitable
for several problems, including multiple conflicting objectives and
large and complicated search spaces <span class="citation" data-cites="5fPW8AT3 10qq3sKmV">[<a href="#ref-5fPW8AT3" role="doc-biblioref">12</a>,<a href="#ref-10qq3sKmV" role="doc-biblioref">13</a>]</span>.
Evolutionary optimizers explore populations of candidate solutions in
each generation. Mutators can make changes to the current population. A
select operator then picks the best mutants, which are then combined in
some way to become a new population in the next iteration. However, Evolutionary algorithm (EA)
still needs many evaluations of the black box system to solve the common
multi-objective problem. This problem is crucial for the reason that
most multi-criteria problems are expensive to estimate. This massive
evaluation budget makes EAs infeasible for costly and multi-objective
problems.</p>
<h2 id="surrogate-optimization">Surrogate optimization</h2>
<p>Many expensive optimization problems have practical limitation on the
number of possible estimations which standard optimization approaches
spend very quickly. To get around this drawback, approximation models or
surrogate models are often used. This technique is essential to reduce
real evaluations by building a regression function based on already
evaluated design points. The potential of the application of surrogates
is based on the generalization of the entire search space and fast
navigations there. This advantage should overrule the disadvantage in
time required to build this approximation. In classical model-based
optimization, a single surrogate model provides a hypothesis on the
relation between the parameter and objective spaces. The approximation
of the solution becomes faster than the real evaluation, so the whole
optimization process is accelerated. However, some extra time is needed
to build and update the surrogate model during the optimization process.
The surrogate model is used to find probable good candidates or to drop
the low-quality individuals even before they are exactly evaluated,
thereby reducing the number of exact evaluations.</p>
<p>In the literature, the term surrogate or model-based optimization is
used in cases when, during the optimization process, some solutions are
not evaluated with the original function but rather are approximated
using a model of this function. Some of the most commonly used methods
are the Response Surface Method <span class="citation" data-cites="WHqOntch">[<a href="#ref-WHqOntch" role="doc-biblioref">14</a>]</span>, Radial Basis
Function <span class="citation" data-cites="1FOgcJYL9">[<a href="#ref-1FOgcJYL9" role="doc-biblioref">15</a>]</span>, Neural Network <span class="citation" data-cites="115GeSP44">[<a href="#ref-115GeSP44" role="doc-biblioref">16</a>]</span>, Kriging
<span class="citation" data-cites="1Y1nHvc2">[<a href="#ref-1Y1nHvc2" role="doc-biblioref">17</a>]</span>, and Gaussian Process Modeling
<span class="citation" data-cites="1FXlw7TX2 4nfjnHfv">[<a href="#ref-1FXlw7TX2" role="doc-biblioref">18</a>,<a href="#ref-4nfjnHfv" role="doc-biblioref">19</a>]</span>. Surrogates are also used to rank and
filter out the offspring according to Pareto-related indicators like a
hypervolume <span class="citation" data-cites="iL724s1s">[<a href="#ref-iL724s1s" role="doc-biblioref">20</a>]</span>, or a weighted sum of the objectives
<span class="citation" data-cites="890MGfiJ">[<a href="#ref-890MGfiJ" role="doc-biblioref">21</a>]</span>. If the model is a single-criterion, it could be
expanded to a multi-objective surrogate by considering each criterion in
isolation and duplicating the model for each of them
<span class="citation" data-cites="13Kf7htnk 2c1WpqTZ">[<a href="#ref-13Kf7htnk" role="doc-biblioref">22</a>,<a href="#ref-2c1WpqTZ" role="doc-biblioref">23</a>]</span>. The surrogate model is either
selected randomly or due to its popularity in the associated domain area
<span class="citation" data-cites="CrJQ8Xau">[<a href="#ref-CrJQ8Xau" role="doc-biblioref">24</a>]</span>. Thus, there are still some open challenges related to the
combination of meta-models, such as a definition of a selection
criterion or combination techniques. Besides, there are no guidelines
for using heterogeneous compositional models for different objective
functions <span class="citation" data-cites="CrJQ8Xau">[<a href="#ref-CrJQ8Xau" role="doc-biblioref">24</a>]</span>.</p>
<h4 id="multi-objective-parameter-tuning">Multi-objective parameter tuning</h4>
<p>The categorization of parameter tuning approaches based on the workflow
of sequential model-based optimization is presented in Figure
<a href="#fig:mo_param_tuning">5</a>. The optimization process begins with an
initial sampling plan. At this stage, it is necessary to collect fitness
results or to evaluate the first parameters which are used to build
surrogate models. For an initial sampling plan, or a Design of Experiments plan, the
techniques of Latin hypercube sampling, Sobol sampling or random sampling can be used.</p>
<div id="fig:mo_param_tuning" class="fignos">
<figure>
<img src="images/tax_mb_tuning.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 5:</span> Phases and tasks within a generalized multi-objective parameter tuning</figcaption>
</figure>
</div>
<p>There are two established approaches to extrapolate the samples: 1) to
scalarize objectives and produce a surrogate model of this scalarization
(In this case, the multi-objective problem transforms into a
single-objective one); 2) to keep the original dimensionality of the
problem and apply one or several models to hold and infer on the problem
landscape.</p>
<p>The next step, optimization, is the search for optimal points within the
surrogate model. At this step, the solutions which might be
Pareto-optimal are found. In predict configurations phase, sorting and
selection are carried out. In the case of multi-criteria selection, it
is necessary to select the required number of points which are optimal
for all objectives. Theoretically, all non-dominated points are equal
regardless of the order they are chosen in. The possible prediction of
several parameters instead of a single one is an advantage that improves
the exploration of the parameter space and parallelizing of fitness
evaluation. The required number of points allows the sample set to be
estimated as well as updated. Optimization iterations continue until a
stop condition is satisfied.</p>
<p>Variability and extensibility are essential for configurable parameter
tuning, as in a software product line. To this effect, the optimization
round is consistent and universal. As shown in Figure
<a href="#fig:mo_param_tuning">5</a>, the potential to reuse components in a
workflow is enormous. The same single-objective models can be equally
applied to various types of problems in multi-/single-objective
optimization. An optimization algorithm weakly depends on the type of
surrogate model. By dynamic duplication of the surrogate model or even
by the creation of several surrogate hypotheses, we aim to improve the
parameter tuning to multiply criteria on-the-fly.</p>
<h3 id="domain-specific-problem">Domain-specific problem</h3>
<p>Surrogate models are domain-specific in case of intention to find the
best solution with less effort. On the one hand, the surrogate model
could perform well while extrapolation one class of problems and guide
to the optimal solution. On the other hand, this model could be a reason
for a significantly degrading result in another type of problem. That is
why the authors prefer using several surrogate models and don’t select
one for all use cases <span class="citation" data-cites="CrJQ8Xau">[<a href="#ref-CrJQ8Xau" role="doc-biblioref">24</a>]</span>.</p>
<p>It could be an interpreted as a Non-Free-Lunch theorem in model-based optimization. If we
extend this argument, then the same optimization problem in different
parameter tuning iteration could be interpreted as another optimization
problem. In order to reduce an effort and to increase the convergence of
an algorithm, we should change the surrogate model depending on how many
samples we have. This leads us to the usage of a portfolio with
surrogate models. On each optimization iteration, the portfolio tries to
build and select several models with the best performance. As a negative
consequence, building several models introduces an additional overhead
into the optimization time.</p>
<h3 id="initial-sampling-set">Initial sampling set</h3>
<p>Initial samples should provide maximal information to build a useful
surrogate model. Indeed, the overall result of the optimization depends
primarily on how accurate the initial assumption is; an invalid
optimization model makes all further optimization results irrelevant.
The concept of surrogate validity guarantees that the model can
confidently be used to find optimal solutions.</p>
<p>If no valid models are obtained, it is better to use the initial design
than to be guided by an incorrect model. With an increasing sample size,
in case of proper fitting, a better surrogate model is obtained, and the
better results in optimization are reached. Moreover, the initial sample
size might be too big, which is a mere waste of resources.</p>
<h2 id="discussion">Discussion</h2>
<p>Most methods for parameter tuning optimization are related to
surrogate-based optimization. One of the main advantages of this
approach is the speed of evaluation across the entire search space and
possibilities to apply a broad range of optimization techniques.
However, there are also disadvantages, such as the extra time required
to select and build this surrogate model. It would be desirable to have
a way to combine several surrogate models which are sample- and
domain-dependent.</p>
<h1 id="sec:related">Related Work</h1>
<p>This section overviews other studies in the area of surrogate-based
multi-objective optimization and related approaches of other types of
optimization.</p>
<h2 id="comparison-criteria">Comparison criteria</h2>
<p>Many existing approaches can be categorized as multi-objective
optimization approaches. Therefore, the comparison criteria for a clear
and concise definition of the approach are introduced in this thesis:</p>
<ul>
<li><p><strong>Sampling plan</strong> specifies the size of a sample set from which to build a surrogate
model and the sampling strategy that will pick these samples. The
sampling plan can be static when decisions about samples are made
ahead of time or it can be dynamic when they depend on optimization
success.</p></li>
<li><p><strong>Surrogate type</strong> is describe extrapolation models and a composition
strategy to combine these models. In this context, variability
indicates that the surrogate model is exchangeable and can be
selected for a specific problem. The extensibility of a surrogate
refers to the ability to grow and improve general extrapolations for
a particular problem.</p></li>
<li><p><strong>Optimization algorithm</strong> is applied to find the optimal points in the search space. The
architecture of the optimization algorithm and the surrogate model
can be tightly coupled (OSI) either when the surrogate model is nested
in the optimization algorithm, or when they perform flat
architecture with ASO (Figure <a href="#fig:surr_opt_architecture">1</a>).</p>
<div id="fig:surr_opt_architecture" class="fignos">
<figure>
<img src="images/utility/architecture_surr_opt.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 1:</span> Example of a possible combination the optimization algorithm with the surrogate model <span class="citation" data-cites="nUhAXe3p">[<a href="#ref-nUhAXe3p" role="doc-biblioref">25</a>]</span></figcaption>
</figure>
</div></li>
<li><p><strong>Scalability</strong> refers to the dimensionality of problems that were applied to
analyze the performance of the algorithm.</p></li>
<li><p><strong>Multi-point proposal</strong> is a property of yielding the required number of multi-objective solutions.</p></li>
</ul>
<p>Almost all related works of parameter tuning could be categorized as Sequential model-based optimization (SMBO)
<span class="citation" data-cites="1Bbk0txPF">[<a href="#ref-1Bbk0txPF" role="doc-biblioref">26</a>]</span>. The general looks as follows (Figure <a href="#fig:sequential_mbo">2</a>):</p>
<ol type="1">
<li><p>Start with the initial sample plan of evaluation points.</p></li>
<li><p>Build a regression model to provide a hypothesis about the relation
between parameters and objectives.</p></li>
<li><p>Use the built surrogate model as a parameter for optimization
strategy. The solutions from the optimization algorithm are new
promising points for evaluation.</p></li>
<li><p>Evaluate the new predicted points and add them to the existing
samples.</p></li>
<li><p>If the stop criteria are not met, repeat optimization with the
updated sample set.</p></li>
</ol>
<div id="fig:sequential_mbo" class="fignos">
<figure>
<img src="images/utility/sequential_mbo.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 2:</span> General Sequential model-based optimization}</figcaption>
</figure>
</div>
<p>We present an overview of previous work on model-based multi-objective
optimization. We begin the project for model-based optimization (mlrMBO)
and continue with related algorithms including various optimization
improvements.</p>
<h2 id="platforms-and-frameworks">Platforms and frameworks</h2>
<p>There are many different projects that can perform multi-objective
optimization. Frameworks provide multiple multi-objective algorithms,
performance metrics, built-in test problems and extra tools such as
plotting and benchmarks. Some frameworks focus on efficient calculations
and parallelization <span class="citation" data-cites="14vOEgTO2">[<a href="#ref-14vOEgTO2" role="doc-biblioref">27</a>]</span>, others on implementation
of modern multi-objective algorithms
<span class="citation" data-cites="om6wdVM3 SrxLVL7k">[<a href="#ref-om6wdVM3" role="doc-biblioref">28</a>,<a href="#ref-SrxLVL7k" role="doc-biblioref">29</a>]</span> and on support of plenty of
model-based optimization algorithms <span class="citation" data-cites="11i9KPh5u">[<a href="#ref-11i9KPh5u" role="doc-biblioref">30</a>]</span>.</p>
<h4 id="mlrmbo">mlrMBO</h4>
<p><span class="citation" data-cites="11i9KPh5u">[<a href="#ref-11i9KPh5u" role="doc-biblioref">30</a>]</span> is a modular framework for model-based optimization of
expensive black-box functions. MlrBO extends the SMBO procedure to a
multi-objective problem with mixed and hierarchical parameter spaces.
Modular structure and integration with <em>mlr</em><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> library allows all
regression models to be used and compositional techniques such as
bagging and ensembling to be applied. The authors implemented four
different model-based multi-objective algorithms that are categorized in
three classes: 1) Scalarization-based algorithms that optimize a
scalarize version of the black-box functions (). 2) Pareto-based
algorithms that build individual models for each objective and complete
multi-objective optimization (MSPOT <span class="citation" data-cites="8Wbkj1xf">[<a href="#ref-8Wbkj1xf" role="doc-biblioref">31</a>]</span>). 3) Direct
indicator-based algorithms which also fit individual models, but perform
a single objective optimization on the collection of all models (SMS-EGO
<span class="citation" data-cites="gqqWjGkp">[<a href="#ref-gqqWjGkp" role="doc-biblioref">32</a>]</span>, <span class="math inline">\(\epsilon\)</span>-EGO <span class="citation" data-cites="XcwIljhD">[<a href="#ref-XcwIljhD" role="doc-biblioref">33</a>]</span>). A special feature of the
mlrMBO framework is multi-point proposal prediction on each iteration.
However, it does not provide a combination of different surrogate models
into one model.</p>
<h4 id="alg:BRISE">BRISE 2.0</h4>
<p><span class="citation" data-cites="OYrq2ZLd">[<a href="#ref-OYrq2ZLd" role="doc-biblioref">34</a>]</span> is a software product line for parameter tuning. The core
topics of their approach are extensibility and variability with key
features such as 1) A <em>repeater</em> which automatically decides on the
number of repetitions needed to obtain the required accuracy for each
configuration. 2) <em>Stop condition</em>, which validates a solution received
from the model and decides whether to stop the experiment. 3)
Association of a sampling plan with model prediction validity which
provides a <em>flexible sampling plan</em>. The main advantage of this sampling
plan is that it requires less initial knowledge about the optimization
problem. Extrapolation model for parameter prediction is exchangeable
and it combines surrogate and optimization strategies in each
implementation. Several general models, such as polynomial regression
surrogate with local search and Bayesian optimization with bandit-based
methods strategy(BOHB <span class="citation" data-cites="1FBsMpBkY">[<a href="#ref-1FBsMpBkY" role="doc-biblioref">35</a>]</span>), are implemented. However, the
models lack variability and should be designed from scratch for new
domain-problem.</p>
<h4 id="smac">SMAC</h4>
<p><span class="citation" data-cites="e2TT8RyQ hC44c3Vm">[<a href="#ref-e2TT8RyQ" role="doc-biblioref">36</a>,<a href="#ref-hC44c3Vm" role="doc-biblioref">37</a>]</span> is a framework for parameter tuning with
Bayesian Optimization in combination with a simple racing mechanism to
decide which of two configurations performs better. SMAC adopted a
random forest model and Expected Improvement (EI) to model conditional
probability. It applies a local search with several starting points to
pick configurations with a maximal value of EI. These points improve the
exploration possibilities of SMAC in the search space with higher
uncertainty and an optimal value of the objective mean. An interesting
feature of SMAC is its support of the termination of unfavourable
evaluations that are slowing down the optimization process. However,
SMAC is limited to single-criteria optimization and uses a predefined
sampling plan.</p>
<h4 id="hypermapper-2.0">Hypermapper 2.0</h4>
<p>Luigi Nardi et al. <span class="citation" data-cites="2c1WpqTZ">[<a href="#ref-2c1WpqTZ" role="doc-biblioref">23</a>]</span> presented a multi-objective
black-box optimization framework that solves complex parameter tuning
problems with the combination of search space, expensive evaluation, and
feasibility constraints. The proposed approach can be classified as a
direct indicator-based algorithm with constraint validation. During this
type of optimization, several identical individual models for each
objective are built, then a single-objective optimization is performed
on the aggregation from all these models. The authors further extended
this idea to predict no feasible configurations with an extra surrogate
model.</p>
<p>The Hypermapper 2.0 is based on a surrogate of a random forest. The
random forest combines several weak regressors on a subset of samples to
yield accurate regression and effective classification models. After
scalarizing values from models, framework applies an Bayesian
optimization (BO) method to find an optimal value. Since using a single
weight vector would only find one point on the Pareto optimal front, a
weight vector is chosen randomly for each iteration, ensuring that
multiple points on the Pareto optimal front are found. The key features
of this approach are the possibility to use prior knowledge, support
real variables, predict feasibility, and excellent final adaptation of
the implementation to embedded devices. The authors reported that
Hypermapper 2.0 provides better Pareto fronts compared to
state-of-the-art baseline, i.e. better competitive quality and saving
evaluation budget.</p>
<h2 id="model-based-multi-objective-algorithms">Model-based multi-objective algorithms</h2>
<p>Fixed optimization components can make general optimization ineffective
in the face of different problems. The flexibility achieved by the
surrogate construction methodology and multi-objective (MO) algorithms
can help to achieve solutions closest to the real Pareto optimal front.</p>
<h4 id="alg:ParEGO">ParEGO</h4>
<p>is a scalarization-based multi-objective algorithm <span class="citation" data-cites="13Kf7htnk">[<a href="#ref-13Kf7htnk" role="doc-biblioref">22</a>]</span>. It was
developed as extension, which can encompass multi-point proposal, of a
classic single-objective algorithm EGO<span class="citation" data-cites="1Bbk0txPF">[<a href="#ref-1Bbk0txPF" role="doc-biblioref">26</a>]</span> of Jones et al. In its
core lays repetition of an algorithm execution with randomly changed
scalarization weights for each iteration. This algorithm is based on the
Kriging (Gaussian process regression) model and multiple
single-objective optimization processes on scalarized objectives.
Several runs with random weights guarantee that multiple points on the
Pareto optimal front are predicted. This algorithm and its modification
are implemented in mlrMBO<span class="citation" data-cites="11i9KPh5u">[<a href="#ref-11i9KPh5u" role="doc-biblioref">30</a>]</span>.</p>
<h4 id="an-evolutionary-algorithmea-with-spatially-distributed-surrogates">An Evolutionary Algorithm(EA) with Spatially Distributed Surrogates</h4>
<p>Amitay et al.,<span class="citation" data-cites="HSZsAP2u">[<a href="#ref-HSZsAP2u" role="doc-biblioref">38</a>]</span> presented an EA with spatially distributed
surrogates (EASDS). Surrogate models use Radial Basis Function Networks,
periodically validating and updating each subset of samplings points.
This generates a complex ensemble surrogate with approximations in local
areas of the search space. Spatially Distributed Surrogate models are
created for all objectives and then evaluated by NSGA-2 <span class="citation" data-cites="HSZsAP2u">[<a href="#ref-HSZsAP2u" role="doc-biblioref">38</a>]</span>.
The authors report that their approach achieves better results than
single global surrogate models, multiple surrogates. Of note, the
authors evaluated their algorithm only on bi-objective problems.</p>
<h4 id="a-hybrid-surrogate-based-approach-for-evolutionary-multi-objective-optimization">A hybrid surrogate-based approach for evolutionary multi-objective optimization</h4>
<p>Rosales-Pérez et al.,<span class="citation" data-cites="n6umRRsz">[<a href="#ref-n6umRRsz" role="doc-biblioref">39</a>]</span> proposed an approach based on an
ensemble of Support Vector Machines (SVM). The authors describe a model
selection process or hyperparameters selection of SVM based on a
validation technique and a further injection into the surrogate
ensemble. Incremental development of the ensemble includes new
information obtained during the optimization and old evidence stored in
previous models. The training of a new model represents search on the
SVM grid in order to find a kernel with the lowest expected
generalization error. This paper presents a model selection process for
determining the hyperparameters for each SVM in the ensemble.</p>
<h4 id="evolutionary-optimization-with-hierarchical-surrogates">Evolutionary optimization with hierarchical surrogates</h4>
<p>Xiaofen Lu et al. <span class="citation" data-cites="1a94fr8U">[<a href="#ref-1a94fr8U" role="doc-biblioref">40</a>]</span> apply different surrogate modelling
techniques based on the motivation to optimize expensive black-box
functions without any prior knowledge of the problem. They used a
pre-specified set of models to construct hierarchical surrogates during
optimization. Also, to verify the surrogates, the general accuracy of
the high-level model was used. The process of the proposed method
involves splitting the accumulated training samples and model-based
optimization, which means that the sample plan is static and requires
prior information about the problem.</p>
<p>The authors show that the hierarchical surrogate structure can be
beneficial when the accuracy of the high-level model is greater than
0.5. They also noticed that a single modelling technique might perform
differently on different problem landscapes. This motivates us to use a
pre-specified set of modelling techniques (portfolio with surrogates).</p>
<h4 id="population-based-parallel-surrogate-search">Population-based Parallel Surrogate Search</h4>
<p>Akhtar et al.,<span class="citation" data-cites="b95kEJCL">[<a href="#ref-b95kEJCL" role="doc-biblioref">41</a>]</span> introduce a multi-objective
optimization algorithm for expensive functions that connects several
iteratively updated surrogates of the objective functions. The key
feature of this algorithm is high optimization for parallel computation
and stacking predictions from the set of Radial Basis Function (RBF)
models. The algorithm combines RBF composition surrogate, Tabu, and
local search around multiple points.</p>
<h4 id="gale-geometric-active-learning-for-search-based-software-engineering">GALE: Geometric Active Learning for Search-Based Software Engineering</h4>
<p>Krall et al.,<span class="citation" data-cites="15iqjq0XF">[<a href="#ref-15iqjq0XF" role="doc-biblioref">1</a>]</span> developed an algorithm that uses principal
components analysis (PCA) and active learning techniques to perform
step-by-step approximation and evaluation of the most informative
solutions. The authors notice that MOEAs are not suitable for expensive
multi-objective problems because they push a set of solutions towards an
outer surface of better candidates, costing many function evaluations.
The fundamental idea of the proposed approach is to choose the most
informative solutions from a large set of options. This is accomplished
by dividing the functional landscape into smaller regions and evaluating
only the most informative samples from the regions. As a result of the
division of the functional landscape, function evaluations are spared
since only a few of the most informative points from the region are
evaluated. A drawback of this approach lays in static implementation
with MOEA/D.</p>
<div id="tbl:related" class="tablenos">
<table>
<caption><span>Table 1:</span> The comparison of related approaches. The component behaviour: S - static, V - variability, E-extensibility, D - dynamic.
</caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 9%" />
<col style="width: 8%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 7%" />
<col style="width: 11%" />
<col style="width: 12%" />
<col style="width: 7%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Approach</strong></th>
<th style="text-align: center;"><strong>Multi-objective</strong></th>
<th style="text-align: center;"><strong>Sampling plan</strong></th>
<th style="text-align: center;"><strong>Extrapolation models</strong></th>
<th style="text-align: center;"><strong>Composition strategy</strong></th>
<th style="text-align: center;"><strong>Optimization</strong></th>
<th style="text-align: center;"><strong>Mixed search space</strong></th>
<th style="text-align: center;"><strong>Multi-point proposal</strong></th>
<th style="text-align: center;"><strong>Scalability</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>mlrMBO <span class="citation" data-cites="11i9KPh5u">[<a href="#ref-11i9KPh5u" role="doc-biblioref">30</a>]</span></td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">E</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr class="even">
<td>BRISE 2.0 <span class="citation" data-cites="OYrq2ZLd">[<a href="#ref-OYrq2ZLd" role="doc-biblioref">34</a>]</span></td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">flexible</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
</tr>
<tr class="odd">
<td>SMAC <span class="citation" data-cites="e2TT8RyQ hC44c3Vm">[<a href="#ref-e2TT8RyQ" role="doc-biblioref">36</a>,<a href="#ref-hC44c3Vm" role="doc-biblioref">37</a>]</span></td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">✓</td>
</tr>
<tr class="even">
<td>Hypermapper 2.0 <span class="citation" data-cites="2c1WpqTZ">[<a href="#ref-2c1WpqTZ" role="doc-biblioref">23</a>]</span></td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">✓</td>
</tr>
<tr class="odd">
<td>ParEGO <span class="citation" data-cites="13Kf7htnk">[<a href="#ref-13Kf7htnk" role="doc-biblioref">22</a>]</span></td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">✓</td>
</tr>
<tr class="even">
<td>Distributed Surrogates, EASDS <span class="citation" data-cites="HSZsAP2u">[<a href="#ref-HSZsAP2u" role="doc-biblioref">38</a>]</span></td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">E</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">possible</td>
<td style="text-align: center;">✗</td>
</tr>
<tr class="odd">
<td>Hybrid surrogate <span class="citation" data-cites="n6umRRsz">[<a href="#ref-n6umRRsz" role="doc-biblioref">39</a>]</span></td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">E+D</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">possible</td>
<td style="text-align: center;">✓</td>
</tr>
<tr class="even">
<td>Hierarchical surrogates <span class="citation" data-cites="1a94fr8U">[<a href="#ref-1a94fr8U" role="doc-biblioref">40</a>]</span></td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">E</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">V</td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">possible</td>
<td style="text-align: center;">✗</td>
</tr>
<tr class="odd">
<td>Parallel surrogates, MOPLS <span class="citation" data-cites="b95kEJCL">[<a href="#ref-b95kEJCL" role="doc-biblioref">41</a>]</span></td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">E</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">✗</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✗</td>
</tr>
<tr class="even">
<td>GALE <span class="citation" data-cites="15iqjq0XF">[<a href="#ref-15iqjq0XF" role="doc-biblioref">1</a>]</span></td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">static</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">E</td>
<td style="text-align: center;">S</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">possible</td>
<td style="text-align: center;">✓</td>
</tr>
</tbody>
</table>
</div>
<h2 id="scope-of-work">Scope of work</h2>
<p>As shown in Table <a href="#tbl:related">1</a>, surrogate or model-based optimization suit expensive
black-box problems. A summary of the related works that we have
discussed is shown in the table above. Nevertheless, model-based
approach still has limitations:</p>
<ul>
<li><p>Multi-objective hypothesis. A <em>limited number</em> of surrogate models
can handle with several parameter and objectives, but they struggle
when these parameters and objectives become larger.</p></li>
<li><p><em>Surrogate is domain-specific.</em> Currently, to improve and reach the
best prediction, we need to know the objective surface in order to
apply a specific surrogate. Universal surrogates might gain optimal
results but may not be the most reliable <span class="citation" data-cites="BvoEknRH 1a94fr8U">[<a href="#ref-1a94fr8U" role="doc-biblioref">40</a>,<a href="#ref-BvoEknRH" role="doc-biblioref">42</a>]</span>.</p></li>
<li><p>The quality of predictions depends on <em>the number of samples</em> we use
for a specific type of surrogate. There is a trade-off between the
reduction of sample size and maximization of prediction quality.
Overfitting, as well as underfitting, can guide optimization in a
wrong direction.</p></li>
<li><p>Often, optimization algorithms and surrogate models are <em>coupled</em>
extremely tightly. This interdependence makes the general approach
biased against specific problems. Reimplementation of these
algorithms for each usage scenario becomes time-consuming and
error-prone.</p></li>
</ul>
<p>After surveying the aforementioned literature, we derive the following
research gaps and questions.</p>
<ul>
<li><p><strong>Surogate combination</strong></p>
<p>Previous research has shown that surrogate model selection can
profoundly impact the quality of the optimization solution
<span class="citation" data-cites="n6umRRsz">[<a href="#ref-n6umRRsz" role="doc-biblioref">39</a>]</span>. Furthermore, it has been noted that the surrogate
is domain-specific, and the same technique might perform differently
on different problems <span class="citation" data-cites="1a94fr8U">[<a href="#ref-1a94fr8U" role="doc-biblioref">40</a>]</span>. The overall research gaps of the
surrogate model’s flexibility can be divided into the following
subproblems:</p>
<ol type="1">
<li><p>The dynamic combination of different single-criterion models is
crucial to solve the multi-criteria problems. It must be
feasible to substitute the type of nested surrogate model for an
arbitrary criterion component. This would make the surrogate
model more versatile and capable of describing arbitrary
optimization problems. Therefore, technology that would allow
the creation of surrogate compositional models is necessary.
Hence we can identify the first research question <strong>[RQ1]</strong>:
Does the dynamic composition of different single-objective
models improve the extrapolation of multi-objective problems?</p></li>
<li><p>After scrupulous investigation of presented works we conclude
that access to the range of models improves final results.
Unfortunately, most authors used only one type of model with
various hyperparameters. Therefore, the next research question
<strong>[RQ2</strong>]: Does a portfolio of surrogate models enhance
optimization results?</p></li>
</ol></li>
<li><p><strong>Sampling plan</strong></p>
<p>A static plan requires additional knowledge of the surface of the
problem, which is usually not possible to obtain. Moreover,
arbitrary decisions of the sample size might be a reason that leads
to inaccurate models and further wrong results. These problems may
occur because the surrogate model is overfitted or underfitted, and
the result is a waste of samples and resources. Consequently, the
last research question <strong>[RQ3]</strong>: Does a dynamic sampling plan
help accelerate obtaining an optimal solution?</p></li>
</ul>
<p>To our knowledge, there have not been studies of the comprehensive
surrogate combinations and the dynamic sampling strategy. Therefore, we
focus on the improvement of compositional surrogate models for
multi-objective problems. We aim to apply surrogate models to problems
that are expensive, multi-objective, and derivative-free/black-box
systems without constraints.</p>
<h4 id="the-following-goals-must-be-achieved">The following goals must be achieved:</h4>
<ol type="1">
<li><p>Find diverse multi-objective solutions with minimal distance to real
the Pareto front.</p></li>
<li><p>Develop modular and extensible architecture.</p></li>
<li><p>Improve the backward computationally with single-objective parameter
tuning.</p></li>
<li><p>Reduce the evaluation budget.</p></li>
</ol>
<h1 id="sec:concept">Compositional Surrogate</h1>
<p>This chapter introduces a general idea which overcomes the limitations
of model-based optimization discussed.</p>
<p>As mentioned previously in section @{sec:background}, fixed components
can make the optimization process ineffective. That is why flexibility
and variability must be introduced for each optimization step. Our
concept focuses on the combination of surrogate models to effectively
extrapolation required problems.</p>
<h2 id="combinations-of-surrogate-models">Combinations of surrogate models</h2>
<p>Let us address the main issue we have observed in multi-objective
optimization. The issue is that the solution techniques and parametric
selections are usually problem-specific. In addition to that, most
surrogate model implementations are static which imposes limitations on
existing solutions. We tackle this challenge by improving model
variability <em>in</em> a surrogate model (compositional surrogate) and model
extensibility <em>with</em> surrogate hypotheses (surrogate portfolio). Also,
we should address an additional question of solution scalability, which
is related to the compositional surrogate model. There are some tasks
that could require new algorithmic approaches when we add more
parameters to them. Therefore, there exists a demand for scalable
solutions. We discuss our approach to problems described i+n the next
sections.</p>
<h3 id="compositional-surrogate-model-rq1">Compositional Surrogate Model [RQ1]</h3>
<p>The concept of the compositional surrogate is the combination of
multiple simple models to approximate several independent objectives at
the same time. In this model, composite and conventional surrogates have
a unified interface that permits us to implement a <em>composite design
pattern</em><span class="citation" data-cites="LiF8v83X">[<a href="#ref-LiF8v83X" role="doc-biblioref">43</a>]</span>. This design pattern then allows us to operate
uniformly with the individual and multi-objective surrogates.</p>
<p>Additionally, a significant advantage of compositional surrogates is a
possibility to extend single-objective parameter tuning to
multi-objective optimization. This possibility provides the opportunity
to reuse single-criterion models for multi-criteria optimization and
dynamically reconstruct problem representation from mixed parts. We
define <em>compositional models</em> as models that combine <em>various</em> sub
surrogate models for each optimization objective. The <em>surrogate
hypothesis</em> refinement is also used to emphasize that the surrogate
model can completely describe all criteria from the objective space.</p>
<p>The compositional surrogate has multiple opportunities for variability
that outperform static models in the face of real black-box problems.
For example, choosing a specific set of models is a representation of
knowledge about the subject area. If expectations during optimization
are not met, the compositional model can be partially updated, which
saves time. In contrast, a static model would need to be completely
replaced. Such changes might be demanded by newly obtained results or
the increased dimensionality of optimization space.</p>
<h4 id="scalability">Scalability</h4>
<p>The ability to scale the optimization solution can be considered an
adaptation to an unknown problem. Solution scalability is the ability to
solve problems with a high number of dimensions in parameters and
objectives spaces.</p>
<p>Multiple works<span class="citation" data-cites="15iqjq0XF 5eR7xJoM">[<a href="#ref-15iqjq0XF" role="doc-biblioref">1</a>,<a href="#ref-5eR7xJoM" role="doc-biblioref">44</a>]</span> have practically
demonstrated that scalability is a problem for surrogate models and
optimization algorithms. As an illustration, popular surrogate models
such as Gaussian process regression (Kriging) <span class="citation" data-cites="1Bbk0txPF">[<a href="#ref-1Bbk0txPF" role="doc-biblioref">26</a>]</span> struggle with
high dimensional samples but provide excellent results in smaller
dimensions. Therefore, another advantage of the composite surrogate
model is evident; it provides variability for the extrapolation of
scalable search space.</p>
<h3 id="surrogate-model-portfolio-rq2">Surrogate model portfolio [RQ2]</h3>
<p>In addition to the dynamic variability in the compositional surrogate,
we combine several surrogate hypotheses in a surrogate portfolio to
dynamically choose one that is best suited to the specific problem. The
unified interface and the ability to integrate models into a composite
architecture make it possible to uniquely select and combine composite
models side by side with static multi-objective models.</p>
<p>Without information about a given problem, it is difficult to say which
surrogate hypothesis would be better. Therefore, the model should be
selected during optimization based on its usefulness (validity). The
validation process involves checking how well the model extrapolates
unknown data. For such validation evidence, a small portion of samples
should be sacrificed. This process of data sacrifice give us two
separate data sets: one for model building and another for its testing.
The test score obtained from the test set is used to evaluate the
model’s accuracy and, accordingly, the quality of the possible
corresponding solutions. The validation process allows us to evaluate
surrogate models based on how they summarize an unknown problem.</p>
<p>For an optimization algorithm, a portfolio can be considered either as a
single model or as a collection of models. This property allows us to
determine which optimization algorithms are applied to which surrogate
models and how to combine such solutions. Such dynamic variability makes
the multi-criteria optimization process also scalable and flexible.</p>
<p>Besides, the surrogate portfolio does not limit to use the latest
state-of-the-art optimization algorithms and surrogate models together.</p>
<h2 id="sampling-plan-rq3">Sampling plan [RQ3]</h2>
<p>After surveying the aforementioned related works, we learned that only
BRISE use dynamic sampling plan while other approaches use a static
sampling plan that determines an optimal number of initial samples using
an outside oracle. On the contrary, BRISE is applied dynamic but still
domain-dependant sampling plan. Although in most cases, we cannot
receive any guidance on an unknown problem. Thus, we need a dynamic
sampling plan which adapts to a specific use-case.</p>
<p>To obtain the adaptive sampling size we need to bind the sampling design
to a validation process for the surrogate model. An optimization process
is guided by sampling design when none of the surrogate models are valid
(Figure <a href="#fig:concept_sampling">1</a>). Validity means that the surrogate
approximation can be useful for efficient global optimization.</p>
<div id="fig:concept_sampling" class="fignos">
<figure>
<img src="images/dinamic_sampling_plan.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 1:</span> Concept of a sampling plan dependency and model validation. A sampling plan is used if there is no valid model that can be useful for optimization purpose.</figcaption>
</figure>
</div>
<h3 id="surrogate-validation">Surrogate Validation</h3>
<p>In the context of sequential model-based optimization, a common mistake
is studying the accuracy of the evaluation of the global search space
instead of the search space region of interest. That is why basing the
evaluation of surrogate validity only on the coefficient of
determination(R2) is incorrect <span class="citation" data-cites="2c1WpqTZ">[<a href="#ref-2c1WpqTZ" role="doc-biblioref">23</a>]</span>. The global
accuracy metric can be used as a threshold value above which the model
becomes invalid even with additional estimations.</p>
<p>It is necessary to sacrifice a small portion of samples to check the
surrogate model’s quality. Based on validation results, we can discard
inadequate models and consider the solutions from valid models only. If
none of the models are valid, the best decision is to now make a
prediction from the sampling plan. This decision is repeated until a
valid surrogate model is obtained.</p>
<p>Validation should show how well the model extrapolates the available
experiments (variance) and how well it can evaluate the data that is not
seen (bias). The central concept in surrogate validation lies in the
adaptation of the best machine-learning approaches for the evaluation of
a model’s performance.</p>
<p>We select surrogate models based on accuracy in the test set, but the
selection may not be correct if only one test set is taken into account.
Increasing surrogate complexity can lead to obtaining wrong conclusions
in a later stage of optimization (Figure <a href="#fig:cv_overfitting">2</a>). This
property cannot be neglected in evaluating a surrogate’s validity.</p>
<div id="fig:cv_overfitting" class="fignos">
<figure>
<img src="images/utility/cv_2x_test.svg" style="width:100mm" alt="" /><figcaption><span>Figure 2:</span> With rising model complexity overfitting on the training set becomes more likely <span class="citation" data-cites="oZVt7BwU hXsWZiMi">[<a href="#ref-oZVt7BwU" role="doc-biblioref">45</a>,<a href="#ref-hXsWZiMi" role="doc-biblioref">46</a>]</span></figcaption>
</figure>
</div>
<p>It is necessary to perform the validation in a few phases with separate
test sets. The validation process requires two separate test sets: the
first one to select surrogate models and the second one to test those
selected models. In addition to those two test sets there is a third set
for building surrogate models. We obtain those sets by dividing all
available samples.</p>
<p>Partitioning the available samples into three sets drastically reduces
the number of points that can be used for building the model. A small
number of build samples could lead to inadequacy of the model.
Also, results can depend on the selective random decision for sample
splitting.</p>
<p>However, partitioning the available samples into three sets, are
drastically reduce the number of points which can be used for learning
the model. Moreover, results can depend on a selective random decision
for the samples splitting. The solution is might be cross-validation(CV,
Figure <a href="#fig:cv">3</a>). This is a procedure that avoids a separate
validation set and divides test samples to <em>k</em> equal folds. Set of folds
are used to train model and in <em>k</em> rounds, a new fold selected as a test
set. The performance measured by cross-validation is the averaged over
the values computed in the loop. This approach can be computationally
expensive but requires fewer samples.</p>
<div id="fig:cv" class="fignos">
<figure>
<img src="images/cv.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 3:</span> Surrogate models validation. Cross-validation loop performs model selection based on global accuracy. Acceptable models are tested with a focus on optimization region.</figcaption>
</figure>
</div>
<p>To summarize, the model validation is performed in two stages:</p>
<ol type="1">
<li><p><strong>Cross-validation.</strong> We check overall accuracy of the surrogate
model extrapolation. Also, we discard models that do not achieve the
necessary threshold.</p></li>
<li><p><strong>Surrogate testing.</strong> We demonstrate the accuracy of the selected
models and the corresponding assessment of possible solutions.</p></li>
</ol>
<p>We decide which surrogate models to choose based on the information from
all stages. If the model does not achieve a sufficient threshold, it is
rejected as not valid. If there is no valid model, the assumption about
the next configuration is accepted from the sampling plan (Figure
<a href="#fig:concept_sampling">1</a>).</p>
<h2 id="discussion-1">Discussion</h2>
<p>Toward answering our research questions, we propose the dynamic
combination of surrogate models and a dynamic sampling plan based on
surrogate validation.</p>
<ul>
<li><p><strong>RQ1:</strong> For the dynamic combination of several surrogate models, it
is necessary to implement a surrogate compositional model. This
design allows uniform handling of individual and compositional
surrogate models.</p></li>
<li><p><strong>RQ2:</strong> The combination of surrogate models in the portfolio is
realized through the compositional model and stepwise validation.</p></li>
<li><p><strong>RQ3:</strong> The sampling plan is chosen to explore new random points
when there is no valid model. This relation means that the sampling
plan directly depends on whether we have a surrogate model that is
capable of describing the optimization problem.</p></li>
</ul>
<p>As a result, we extend the idea of classic SMBO using dynamic model selection
and stepwise validation to obtain a multi-objective solution on various
problem landscapes.</p>
<h1 id="implementation">Implementation</h1>
<p>In this chapter, we present the implementation details of our proposed
decisions.</p>
<p>In order to achieve goals from previous sections, it is necessary
to formulate technical requirements for implementation. After a thorough
study of the literature <span class="citation" data-cites="2iBa9w3z">[<a href="#ref-2iBa9w3z" role="doc-biblioref">47</a>]</span>, we put forward the following
requirements:</p>
<ul>
<li><p><strong>Components.</strong> To meet the needs of flexible architecture, we need
to divide the optimization workflow into logical steps and abstract
them. These abstractions are interpreted as easily replaceable
components. Only in the case of homogeneity of optimization
processes with the standard interfaces, it is possible to scale the
optimization approach to multi-objective tasks.</p></li>
<li><p><strong>Separation of concerns.</strong> In order to ensure more considerable
optimization variability, it is necessary to evaluate the
optimization steps independently.</p></li>
<li><p><strong>Non-proliferation of classes.</strong> To improve the compatibility of
our solution with other frameworks, we need to use a simple
structure to share information.</p></li>
</ul>
<p>The following frameworks were used to fulfill the criteria.</p>
<p><strong>Scikit-learn</strong> <span class="citation" data-cites="5HeKgs4K">[<a href="#ref-5HeKgs4K" role="doc-biblioref">48</a>]</span> is one of the most popular machine
learning framework that accomplishes with a variety of learning tasks.
The crucial features are excellent documentation and reusable components
in various contexts. Extensibility and consistent interfaces resulted in
large and active community of library. Scikit-learn integrates well with
many other Python libraries.</p>
<p><strong>pygmo2</strong> <span class="citation" data-cites="14vOEgTO2">[<a href="#ref-14vOEgTO2" role="doc-biblioref">27</a>]</span> is scientific library with an
effective parallelization for local and global optimization. Key
features of this project are efficient implementations of bio-inspired
and evolutionary algorithms and unified interface to optimization
algorithms and problem definitions.</p>
<p>Next, specific optimization steps will be discussed.</p>
<h2 id="compositional-surrogate">Compositional surrogate</h2>
<p>The Composite Surrogate provides the ability to aggregate several simple
models to promote multi-objective extrapolation.</p>
<p>To achieve this goal, the Model-union class (Figure <a href="#fig:munion">1</a>)
class was implemented. It is implement <em>a compositional design pattern</em>
<span class="citation" data-cites="LiF8v83X">[<a href="#ref-LiF8v83X" role="doc-biblioref">43</a>]</span> where several heterogeneous models could be combined. This
class is as meta-model that wraps and aggregate surrogates and could be
combined in a tree structure. Such an architectural solution is needed
to improve the scalability of surrogates as components</p>
<p>A parent class that combines multiple models can combine their
approximations in several ways:</p>
<ul>
<li><p><strong>Stacking.</strong> It is an ensemble approximation technique which
average obtain results from each child model. The child regression
models are trained based on the whole training samples.</p></li>
<li><p><strong>Split y.</strong> A straightforward technique to combine several
regression models in multi-label prediction case. Each child
surrogate is trained on the entire dataset, including only one
objective of interest. This functionality allows as to produce
multi-objective compositional surrogate from combinations of
single-objective models.</p></li>
</ul>
<div id="fig:munion" class="fignos">
<figure>
<img src="images/munion_class.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 1:</span> Class diagram of ModelsUnion</figcaption>
</figure>
</div>
<p>So, Model-union class puts the compositional model on one line with
other surrogate models. It allows us to independently validate many
surrogate models and combine them in a surrogate portfolio.</p>
<h2 id="optimization-orchestrator">Optimization orchestrator</h2>
<p>The <em>TutorModel</em> (TutotM) Class is the orchestrator of all optimization
steps. TutorM is responsible for parallel surrogate build, their
validation and combination. Also, TutorM provides surrogate models to
the optimization algorithm. Due to the principle of separation of
concerns, the surrogate model does no depend on the optimization
technique. As a result, this extensive combination can provide
additional flexibility and the ability to adapt to specific problems. An
example of the workflow of TutorModel is presented in the Figure
<a href="#fig:tutor_activity">2</a>, As can we note, there are three surrogate
models in the portfolio, from which pass validation only two.</p>
<p>Validation is the primary source of information for deciding on a
surrogate model.</p>
<div id="fig:tutor_activity" class="fignos">
<figure>
<img src="images/portfolio_validation_solv.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 2:</span> Optimization iteration with three surrogate models and two optimizers</figcaption>
</figure>
</div>
<h4 id="surrogates-validation">Surrogates validation</h4>
<p>To select a surrogate model, we need to check the accuracy of the
assumption from unknown experiments(test set). As mentioned in previous
Chapter, validation should be done in several stages to
avoid overfitting (Figure <a href="#fig:simsim_activity_validation">3</a>). The
validation steps are as follows: At the first stage, models are selected
based on <em>cross validation</em> technique. In this stage define lower bound
for overall accuracy. We notice that pass this threshold does not
guarantee that surrogate is useful. 2) On the last stage, valid models
from the previous stage are evaluated and selected for optimization.</p>
<div id="fig:simsim_activity_validation" class="fignos">
<figure>
<img src="images/simsim_activity_workflow.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 3:</span> General optimization workflow for model-based optimization iteration with validation in two stages.</figcaption>
</figure>
</div>
<h4 id="optimization-algorithm">Optimization algorithm</h4>
<p>The role of the optimization algorithm is to find a near-optimal
solution based on surrogate approximation. While other methods also
exist, we select as the main solver because it can be applied to a wide
range of problems.</p>
<p>Optimization framework requires the definition of custom problems. The
optimization problem is not built on top of surrogate models, but are
used with the help of surrogate models. In the case of the genetic
algorithm, it produces the population of parameters, that could be
treated as a Pareto front approximation. If several surrogates are valid
than several Pareto front approximations obtain. There are two
approaches to select the most informative solutions: 1) pick Pareto
approximation from surrogate with the highest accuracy in non-dominated
points. 2) Assume that all approximations are valid and all points could
be selected. In this case, intersection predictions from samples have a
higher probability of being selected.</p>
<h4 id="surrogate-portfolio">Surrogate portfolio</h4>
<p>Since the surrogate model can produce different results on a different
problem, it is necessary to choose a model from the portfolio.</p>
<p>Surrogate models can be divided into two groups: a multi-output model
for all objectives and compositional model with single-output models.
All models pass validation equally, but after cross-validation
single-objective models should combine with another one to provide
multi-objective surrogate hypothesis. During this process, all
objectives should be restored from valid surrogates.</p>
<h2 id="conclusion">Conclusion</h2>
<p>We implemented a base class that can deal with a composite surrogate
model and can combine arbitrary model to apply for a multi-criteria
problem. The TutorM class is required to bring together implemented
features such as surrogate portfolio, validation strategy and dynamic
compositional model. Also, the requirements for the implementation of
the proposed strategy have been identified. Mentioned requirements are
intended to improve the further support and benefits of the developed
method.</p>
<h1 id="evaluation">Evaluation</h1>
<p>In this chapter, we present the results obtained from our approach.
Additionally, we compare the developed approach with state-of-the-art
strategies: evolutionary algorithms and static compound model-based
optimization.</p>
<h2 id="experimental-setup">Experimental setup</h2>
<p>We will begin by introducing a description of the selected optimization
problems and applicable approaches for their analysis. Those problems
include ZDT, DTLZ and WFG problems suits.</p>
<h3 id="optimization-problems">Optimization problems</h3>
<p>Different optimization approaches need to applied to the numerous types
of optimization problems to reduce the comparison bias in the obtained
results (direct consequence of the No-free-Lunch theorem). To that mean, we select several
comprehensive synthetic benchmark suites for comparison. They are all
scalable in the parameter space and some are scalable in the objective
space. The problems are designed so that a meaningful comparison can be
obtained for optimization techniques. All cases are minimization
problems.</p>
<p>According to <span class="citation" data-cites="1HFetF7vb">[<a href="#ref-1HFetF7vb" role="doc-biblioref">49</a>]</span>, the following properties characterize the
optimization problems:</p>
<ul>
<li><p><em>Modality</em> is a property of the objective surface. Test problems are
either unimodal, with one global optimum, or multimodal, with
several local optima. Multimodal problems are more complicated than
unimodal ones and bear more resemblance with real-world scenarios
(Figure <a href="#fig:intro_mult_bias">1</a>). Deceptive objective functions
have a special kind of multimodality that has at least two optima —
a true optimum and a deceptive optimum — but the majority of the
search space favors the deceptive optimum <span class="citation" data-cites="QVZZuqyA">[<a href="#ref-QVZZuqyA" role="doc-biblioref">50</a>]</span>.</p></li>
<li><p>A <em>geometry</em> of the Pareto optimal front can be convex, linear,
concave, mixed, degenerate, disconnected, or some combination of the
former. It directly influences the algorithm’s performance.</p></li>
<li><p>A <em>bias</em> in landscape transformations impacts the search process by
biasing the fitness landscape. Bias means that uniformly distributed
parameters mapped onto a bias area in objective space. This type of
problem can cause challenges if the bias region is far from the
Pareto optimal front (Figure <a href="#fig:intro_mult_bias">1</a>).</p></li>
<li><p><em>Many-to-one</em> fitness mapping means that different parameter vectors
can produce the same objective vector. This property makes the
search more difficult to optimize because it leads to situation when
most solutions produce the same result.</p></li>
<li><p><em>Not separability</em> of the problem means that it can not be solved if
consider it as a separate optimization problems for each objective.</p></li>
</ul>
<div id="fig:intro_mult_bias" class="fignos">
<figure>
<img src="images/utility/intro_mult_bias.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 1:</span> <strong>(a)</strong> Example of ZDT4 problem landscapes with multimodal (#1) and unimodal objectives (#2). <strong>(b)</strong> Example of bias landscape in WFG1 problem. Note how, in this example, the objective vectors are denser far away from Pareto optimal solutions.</figcaption>
</figure>
</div>
<h4 id="zdt">ZDT</h4>
<p><span class="citation" data-cites="cgOPGY3M">[<a href="#ref-cgOPGY3M" role="doc-biblioref">3</a>]</span> is a test suite that consists of a set of two-objective
problems and takes its name from its authors Zitzler, Deb and Thiele. In
their paper the authors propose a set of 6 different scalable problems
all originating from a well thought combination of functions allowing,
by construction, to measure the distance of any point to the Pareto
front. Each test function involves a particular feature that is known to
cause difficulties in the evolutionary optimization process, mainly in
converging to the Pareto-optimal front. For the evaluation of our
combinational surrogate model we selected the following problems:</p>
<ul>
<li><p><strong>ZDT1</strong> has a convex Pareto optimal front.</p></li>
<li><p><strong>ZDT2</strong> has a non-convex Pareto optimal front.</p></li>
<li><p><strong>ZDT3</strong> adds a discreteness feature to the front. Its Pareto optimal
front consists of several noncontiguous convex parts. The
introduction of a sine function in this objective function causes
discontinuities in the Pareto optimal front, but not in the
parameter space.</p></li>
<li><p><strong>ZDT4</strong> has 21 local Pareto-optimal fronts and therefore is highly
multimodal. It is also called a <em>multifrontal</em> problem.</p></li>
<li><p><strong>ZDT6</strong> has a non-uniform search space: the Pareto optimal solutions
are non-uniformly distributed along the global Pareto front and the
density of solutions is the lowest near the Pareto optimal front and
highest away from the front.</p></li>
</ul>
<h4 id="dtlz">DTLZ</h4>
<p><span class="citation" data-cites="yHWkop2U">[<a href="#ref-yHWkop2U" role="doc-biblioref">51</a>]</span> is an extensive test suite that takes its name from its
authors Deb, Thiele, Laumanns, and Zitzler. It was conceived for
multi-objective problems with scalable fitness and objective dimensions.
All problems in this test suite are box-constrained, continuous,
n-dimensional, multi-objective problems.</p>
<ul>
<li><p><strong>DTLZ1</strong> is one of the most difficult test problems in this test set.
DTLZ1 has a flat landscape and the optimal Pareto front lies on a
linear hyperplane.</p></li>
<li><p><strong>DTLZ2</strong> is an unimodal problem with a concave Pareto front.</p></li>
<li><p><strong>DTLZ3</strong> is a multimodal problem with a concave Pareto front. DTLZ3 is
intended to make convergence on the optimal Pareto front more
difficult than for DTLZ2.</p></li>
<li><p><strong>DTLZ4</strong> is an unimodal problem with a bias toward a dense region of
solutions.</p></li>
<li><p><strong>DTLZ5</strong> has a bias for solutions close to a Pareto optimal curve. This
problem may be easy for an algorithm to solve. Because of its
simplicity, it is recommended to use it with a higher number of
objectives.</p></li>
<li><p><strong>DTLZ6</strong> is a more challenging version of the DTLZ5 problem. It has a
non-linear distance function <span class="math inline">\(g()\)</span>, which makes it more difficult to
find the Pareto optimal front.</p></li>
<li><p><strong>DTLZ7</strong> is an unimodal problem for its first objective and multimodal
for the rest of its objectives. This problem has a disconnected
Pareto optimal front, which decreases the likelihood that an Evolutionary algorithm(EA) finds
all optimal regions.</p></li>
</ul>
<h4 id="wfg">WFG</h4>
<p><span class="citation" data-cites="1HFetF7vb">[<a href="#ref-1HFetF7vb" role="doc-biblioref">49</a>]</span> is a test suite designed to outperform the previously
implemented test suites. Essential improvements have been achieved in a
many problems. Also, non-separable, deceptive, and mixed-shape Pareto
front problem are included. The WFG test suite was introduced by Simon
Huband, Luigi Barone, Lyndon While, and Phil Hingston. WFG includes the
following problems:</p>
<ul>
<li><p><strong>WFG1</strong> is an unimodal problem with a convex and mixed Pareto front
geometry.</p></li>
<li><p><strong>WFG2</strong> is a non-separable and unimodal problem with a convex and
disconnected Pareto front geometry.</p></li>
<li><p><strong>WFG3</strong> is a non-separable, unimodal problem for all but its last
objective. The last objective is multimodal.</p></li>
<li><p><strong>WFG4</strong> is a multimodal problem with a concave Pareto front geometry.
The multimodality of this problem has a landscape with large hills
that makes optimization more complicated.</p></li>
<li><p><strong>WFG5</strong> is a separable problem with a deceptive landscape and a concave
Pareto front geometry.</p></li>
<li><p><strong>WFG6</strong> is a non-separable and unimodal problem. Its Pareto front
geometry is concave.</p></li>
<li><p><strong>WFG7</strong> is a separable, unimodal problem with a concave Pareto front
geometry. WFG7 and WFG1 are the only problems that are both
separable and unimodal.</p></li>
<li><p><strong>WFG8</strong> is a non-separable, unimodal problem with a concave Pareto
front geometry.</p></li>
<li><p><strong>WFG9</strong> is a multimodal, deceptive, and non-separable problem with a
concave Pareto optimal geometry. Similar to WFG6, the
non-separability of this problem makes it more complicated than WFG2
and WFG3.</p></li>
</ul>
<p>Base on the properties, we decide that ZDT4, ZDT6, DTLZ4, WFG1, and WFG4
can represent a broader spectre of possible problems (Table <a href="#tbl:selected">1</a>). Also, solutions to
these problems provide meaningful insight into how our optimization
strategy performs. Therefore, for brevity and more comprehensible
discussion, we present full evaluation only of these problems. However,
we have condensed results for all mentioned problems in appendix.</p>
<div id="tbl:selected" class="tablenos">
<table>
<caption><span>Table 1:</span> Selected multi-objective test problems.
</caption>
<thead>
<tr class="header">
<th><strong>Problem</strong></th>
<th style="text-align: center;"><strong>Objective</strong></th>
<th style="text-align: center;"><strong>Modality</strong></th>
<th style="text-align: center;"><strong>Geometry</strong></th>
<th style="text-align: center;"><strong>Bias</strong></th>
<th style="text-align: center;"><strong>Many-to-one <br>mappings</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ZDT4</strong></td>
<td style="text-align: center;">bi-objective</td>
<td style="text-align: center;">unimodal, multimodal</td>
<td style="text-align: center;">convex</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">-</td>
</tr>
<tr class="even">
<td><strong>ZDT6</strong></td>
<td style="text-align: center;">bi-objective</td>
<td style="text-align: center;">multimodal</td>
<td style="text-align: center;">concave</td>
<td style="text-align: center;">+</td>
<td style="text-align: center;">+</td>
</tr>
<tr class="odd">
<td><strong>DTLZ4</strong></td>
<td style="text-align: center;">multi-objective</td>
<td style="text-align: center;">unimodal</td>
<td style="text-align: center;">concave</td>
<td style="text-align: center;">+</td>
<td style="text-align: center;">+</td>
</tr>
<tr class="even">
<td><strong>WFG1</strong></td>
<td style="text-align: center;">multi-objective</td>
<td style="text-align: center;">unimodal</td>
<td style="text-align: center;">convex, mixed</td>
<td style="text-align: center;">polynomial, flat</td>
<td style="text-align: center;">+</td>
</tr>
<tr class="odd">
<td><strong>WFG4</strong></td>
<td style="text-align: center;">multi-objective</td>
<td style="text-align: center;">multimodal</td>
<td style="text-align: center;">concave</td>
<td style="text-align: center;">-</td>
<td style="text-align: center;">+</td>
</tr>
</tbody>
</table>
</div>
<h3 id="optimization-search">Optimization search</h3>
<p>In this thesis, we do not perform explicit parameter tuning for
optimization algorithms. While various optimization algorithms could
have been used, we selected MOEAs as default optimization techniques for
surrogate models. The advantage of EAs are that they can be easily
modified and can operate on a set of solutions candidates that are
well-fitted to approximate the Pareto front. Also, EAs can estimate highly
complex problems in various use-cases. In this thesis, we used two types
of EA:</p>
<ol type="1">
<li><p>The popular evolutionary multi-objective algorithm <em>NSGA2</em>
<span class="citation" data-cites="BJhPNw0R">[<a href="#ref-BJhPNw0R" role="doc-biblioref">52</a>]</span>. We chose this algorithm due to its popularity in Multi-objective optimization (MOO). In
all cases, default parameters for the algorithm were used
(population size = 100, crossover probability=0.95, distribution
index for crossover=10.0, mutation probability=0.01, distribution
index for mutation=50.0)<span class="citation" data-cites="14vOEgTO2">[<a href="#ref-14vOEgTO2" role="doc-biblioref">27</a>]</span>.</p></li>
<li><p>As an alternative MOEA algorithm for optimization, we define
<em>MOEA-Ctrl</em> that combines MOEA/D <span class="citation" data-cites="Dk9KXQBq">[<a href="#ref-Dk9KXQBq" role="doc-biblioref">53</a>]</span> and NSGA2 algorithms.
The characteristic of such an optimization process based on a common
solutions population for both algorithms. Our intuition behind this
choice is the following: NSGA2 gives stable results with
well-distributed points on the Pareto front while MOEA/D has great
exploration quality with low generation count. The combination of
this algorithm should gain a better trade-off in exploration and
exploitation in contrast to individual algorithms’ application.</p></li>
</ol>
<h3 id="surrogate-portfolio-1">Surrogate portfolio</h3>
<p>Based on our awareness, we selected the most popular models for a
default surrogate portfolio.</p>
<ol type="1">
<li><p><strong>Gaussian Process Regressor</strong><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> it is a multi-objective surrogate
model that commonly used in the Bayesian optimization. For this type
of model, the initialization should be specified by passing a kernel
object, the hyperparameters of which are optimized during
extrapolations of the samples. The kernel for benchmarks is selected
from the GPML<span class="citation" data-cites="1FXlw7TX2">[<a href="#ref-1FXlw7TX2" role="doc-biblioref">18</a>]</span>. Even though this kernel is from
another domain, it does give good extrapolation quality for the
regression model. Unfortunately, the build time is significant and
grows with samples size and dimensionality.</p></li>
<li><p><strong>Support Vector Regression (SVR)</strong><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> single-objective model with
Radial-basis function(RBF) kernel. Surrogate based on RBF and SVR
are preferred choice for high dimensional problems
<span class="citation" data-cites="b95kEJCL">[<a href="#ref-b95kEJCL" role="doc-biblioref">41</a>]</span>.</p></li>
<li><p><strong>Multi-layer Perceptron regressor (MLPRegressor)</strong><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> A neural
network is a popular and influential approach to approximate the
functions landscape <span class="citation" data-cites="115GeSP44">[<a href="#ref-115GeSP44" role="doc-biblioref">16</a>]</span>.</p></li>
<li><p><strong>Gradient Boosting Regressor</strong><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> is a single-objective model that
uses an ensemble decision tree regressors to produce a single model.</p></li>
</ol>
<p>As a result, for bi-objective problems, there are no more than ten
possible surrogate hypotheses (including multi-objective Gaussian
Process Regressor). For a benchmark purpose, at each optimization round
the surrogate portfolio does not change.</p>
<h3 id="benchmark-baseline">Benchmark baseline</h3>
<p>We compare our approach (TutorM) with Hypermapper
2.0<span class="citation" data-cites="2c1WpqTZ">[<a href="#ref-2c1WpqTZ" role="doc-biblioref">23</a>]</span> that was considered in the related work.
Hypermapper focuses on multi-objective parameter tuning with various
types of parameters. It uses several randomized forest models, one for
each objective. The general idea is to scalarize several surrogate
models to single-objective criteria and to optimize them as a
single-objective problem. In addition, a Bayesian model is used to
assist the search for solutions. Hypermapper has successfully been used
in autotuning computer vision applications and database optimization.
Since the sample size is not specified, we chose to use the default
population size for MOEA (100 points).</p>
<p>In addition to Hypermapper, NSGA2 was chosen as it is one of the most
well-known evolutionary algorithms <span class="citation" data-cites="10qq3sKmV">[<a href="#ref-10qq3sKmV" role="doc-biblioref">13</a>]</span>. It is therefore a
suitable reference point to which to compare other approaches. As
benchmarks, we evaluate two versions of the algorithm that are nearly
identical but have a different budget for evaluation:</p>
<ul>
<li><p>Small evaluation budget (1000 functions evaluations) and used as a
competing algorithm</p></li>
<li><p>Large evaluation budget (10000 and 50000 functions evaluations) and
used as a baseline. NSGA2 with 10000 functions evaluations budget
used as a baseline for figures with runtime performance, whereas
50000 budget used for final results.</p></li>
</ul>
<h2 id="benchmark-1-portfolio-with-compositional-surrogates.-dynamic-sampling-plan">Benchmark 1: Portfolio with compositional surrogates. Dynamic sampling plan</h2>
<p>For this first evaluation step, our approach (TutorM) was compared to
related approaches (Hypermapper and NSGA2) while solving all three sets
of problems described above (ZDT, DTLZ, WFG) for 2 objectives and 2 or 3
parameters. The TutorM includes all features such as dynamic
compositional models, surrogate portfolio and validation.</p>
<p>The solution quality was evaluated using the following metrics:
hypervolume, p-distance, spacing, and number of available non-dominant
solutions (ndf size). The results we present are the average values obtained after five repetitions. It should also
be noted that baseline NSGA2 10k is a static value that is obtained
after 10000 function evaluations.</p>
<h3 id="one-case-studies-zdt6">One case studies: ZDT6</h3>
<p>We start by comparing the runtime performance of the approaches. Let us
consider runtime optimization for the ZDT6 problem. In Figure
<a href="#fig:zdt6_dist">2</a>, optimization progress and average distance to the
Pareto front is shown.</p>
<div id="fig:zdt6_dist" class="fignos">
<figure>
<img src="images/zdt6_dist.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 2:</span> Results of 5 repetitions for ZDT6: Average distance of non-dominant solutions to the real Pareto front.</figcaption>
</figure>
</div>
<p>It is evident that TutorM considerably outperforms NSGA2 and Hypermapper
2.0 right from the start of the optimization process. Our algorithm
quickly reaches optimal and stable results after 300 function
evaluations. As can be seen from another approach, Hypermapper began to
improve values confidently, but then deteriorated and matched with
NSGA2. The presented p-distance is measured from non-dominated solutions
(ndf size) that can be found in Figure <a href="#fig:zdt6_ndf">3</a>.</p>
<div id="fig:zdt6_ndf" class="fignos">
<figure>
<img src="images/zdt6_ndf.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 3:</span> Results of 5 repetitions for ZDT6: Size of non-dominant solutions across the entire set of the measured solutions.</figcaption>
</figure>
</div>
<p>The count of solutions from TutorM grows evenly, reflecting the
stability of the search and the ascent to the real Pareto front. On the
contrary, Hypermapper has a serrated, unstable track that corresponds to
solutions that are stuck in local Pareto fronts. Repeated drops occur
upon the discovery of a new point in the other Pareto optimal fronts.</p>
<p>Figure <a href="#fig:zdt6_models">4</a> shows that during the first six optimization
iterations, a sampling plan was used until a valid model appeared. This
suggests that, for a given problem with this surrogate portfolio, the 60
samples obtained from the sampling plan are enough to begin the
optimization process. As can be noted, for this problem and with this
portfolio, the most suitable compositional surrogate is a <em>Gradient
Boosting Regressor</em>.</p>
<div id="fig:zdt6_models" class="fignos">
<figure>
<img src="images/zdt6_models.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 4:</span> ZDT6: Best models from the portfolio.</figcaption>
</figure>
</div>
<p>The final solution consists of non-dominant configurations that give an
idea of the Pareto front. In terms of overall Pareto front
approximations (Figure <a href="#fig:zdt6_front">5</a>)), only TutorM solutions
reach the baseline (NSGA2 10k) while other solutions are close and
distributed (Hypermapper) or far away and clustered (NSGA2).</p>
<div id="fig:zdt6_front" class="fignos">
<figure>
<img src="images/zdt6_front.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 5:</span> The final assumption of the Pareto optimal solutions (1000 function evaluations) for ZDT6.}</figcaption>
</figure>
</div>
<h3 id="case-studies-wfg1-wfg4-dtlz4">Case studies: WFG1, WFG4, DTLZ4</h3>
<p>Below, we compare how the optimization process varied across several
problems. The key feature of the method we developed is the dynamic
sampling plan, which depends on the quality of available surrogates. As
mentioned before, in Figure <a href="#fig:zdt6_models">4</a>, when a static number
of random samples is estimated, it is possible to make optimal decisions
much earlier.</p>
<p>This approach is used in TutorM for all optimization problems. By
interpreting the end of the sampling plan and the availability of valid
models, we can estimate the cross-grain complexity of the unknown
problem. Figure <a href="#fig:changing_models">6</a> shows a difference in the
adaptation of initial samples to problems (DTLZ4, WFG1) and a
corresponding improvement in hypervolume.</p>
<div id="fig:changing_models" class="fignos">
<figure>
<img src="images/wfg_dtlz_models.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 6:</span> Optimization process with dynamic sampling plan and surrogate portfolio. Plots show in which steps a sampling plan was used or which model gives the best accuracy on the test set. The order of the models in the composite surrogates corresponds to the order of the optimization objectives that this model extrapolates.</figcaption>
</figure>
</div>
<p>In the case of WFG1, a valid model was quickly obtained and reduced the
initial sampling. This may indicate a convenient and unimodal
optimization landscape. On the contrary use-case of DTLZ4, the sampling
plan lasted longer and alternated with valid models. This may reflect
the complexity of the problem, such as the multimodality or bias of the
landscape. It should also be noted that in each case we considered, the
best surrogate model was different and might change during optimization.
Thus, for the case of DTLZ4, a clear advantage was observed in the
choice of composite surrogacy with <em>Gradient Boosting Regressor</em>,
whereas for WFG1, the multi-objective <em>Gaussian Process Regressor</em> was
the preferred choice.</p>
<p>In the next comparison, we look at WFG1 and WFG4. Figure <a href="#fig:wfg1_ndf">7</a> <a href="#fig:wfg1_front">8</a>
illustrates how the evaluation budget can be spent to find Pareto
optimal solutions. Let us look at the WFG1. It can be seen that TutorM
slowly increases the number of solutions during optimization
(<a href="#fig:wfg1_ndf">7</a>). Furthermore, the final result even exceeds the
solutions given by the NSGA2 after 10k function evaluations
(<a href="#fig:wfg1_front">8</a>). Turning now to Hypermapper, the non-dominated
plot is highly serrated, which indicates that the approach falls within
the local optima. Additional information is revealed in the final Figure
<a href="#fig:wfg1_front">8</a>, which shows that most final Hypermapper solutions
are strongly clustered, reflecting a waste of resources.</p>
<p>For the WFG4 use-case, all approaches produce near-optimal solutions,
but only TutorM provides such an extensive set of near-optimal solutions
(non-dominated 400 solutions from 1000 function evaluations). This
property of TutorM means that the optimization process can stop earlier
and save on the evaluation budget.</p>
<div id="fig:wfg1_ndf" class="fignos">
<figure>
<img src="images/wfg1_ndf.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 7:</span> Results of 5 repetitions for WFG1: Size of a non-dominated subset of evaluated examples</figcaption>
</figure>
</div>
<div id="fig:wfg1_front" class="fignos">
<figure>
<img src="images/wfg1_front.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 8:</span> WFG1: Pareto front approximation</figcaption>
</figure>
</div>
<div id="fig:wfg4_ndf" class="fignos">
<figure>
<img src="images/wfg4_ndf.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 9:</span> Results of 5 repetitions for WFG4: Size of a non-dominated subset of evaluated examples</figcaption>
</figure>
</div>
<div id="fig:wfg4_front" class="fignos">
<figure>
<img src="images/wfg4_front.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 10:</span> WFG4: Pareto front approximation</figcaption>
</figure>
</div>
<h3 id="results">Results</h3>
<p>For benchmark 1, we analyze 21 problems from three test sets. They have
2 or 3 parameters and 2 objectives. We repeat the experiments 5 times
and average them. We consider the following metrics:</p>
<ul>
<li><p><strong>Hypervolume</strong> This metric is calculated for each comparison
because the hypervolume requires a single reference point for a
group of competitors. Hypervolume metric is given as a percentage
where <span class="math inline">\(100\%\)</span> corresponds to the maximum volume in the competition
and <span class="math inline">\(0\%\)</span> corresponds to the hypervolume of a random set of
solutions.</p></li>
<li><p><strong>p-distance</strong> The primary metric for evaluation that corresponds to
average distance to real Pareto front. Unfortunately, it is not
available for WFG problems.</p></li>
<li><p><strong>Non-dominated font (ndf) size</strong> The ratio of the number of final
non-dominated decisions to the number of spent function evaluations.</p></li>
<li><p><strong>Spacing</strong> The inverse spacing metric is calculated, where 1
corresponds to the most cohesive decisions among competitors.</p></li>
</ul>
<p>In following table (Table <a href="#tbl:magic_five">2</a>), we present a subgroup of problems that
have varying complexity. The full list of results is provided in the appendix.</p>
<div id="tbl:magic_five" class="tablenos">
<table>
<caption><span>Table 2:</span> Comparison of results after 1000 function evaluations.
</caption>
<thead>
<tr class="header">
<th></th>
<th></th>
<th><strong>ZDT4</strong></th>
<th><strong>ZDT6</strong></th>
<th><strong>DTLZ4</strong></th>
<th><strong>WFG1</strong></th>
<th><strong>WFG4</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>TutorM</td>
<td><strong>Hypervolume</strong> ↑</td>
<td>99,80%</td>
<td>99,43%</td>
<td>99,83%</td>
<td>95,75%</td>
<td>99,28%</td>
</tr>
<tr class="even">
<td></td>
<td><strong>p-distance</strong> ↓</td>
<td>0,01</td>
<td>0,09</td>
<td>0,001</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td></td>
<td><strong>ndf-size</strong> ↑</td>
<td>50%</td>
<td>4,26%</td>
<td>0,2%</td>
<td>3,44%</td>
<td>38,9%</td>
</tr>
<tr class="even">
<td></td>
<td><strong>space-metric</strong> ↑</td>
<td>0,78</td>
<td>0,17</td>
<td>0,666</td>
<td>0,51</td>
<td>1</td>
</tr>
<tr class="odd">
<td>NSGA2</td>
<td><strong>Hypervolume</strong> ↑</td>
<td>83,43%</td>
<td>83,84%</td>
<td>87,81%</td>
<td>30,52%</td>
<td>83,95%</td>
</tr>
<tr class="even">
<td></td>
<td><strong>p-distance</strong> ↓</td>
<td>0,04</td>
<td>1,29</td>
<td>0,002</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td></td>
<td><strong>ndf-size</strong> ↑</td>
<td>8,77%</td>
<td>1,01%</td>
<td>9,600%</td>
<td>3,18%</td>
<td>10%</td>
</tr>
<tr class="even">
<td></td>
<td><strong>space-metric</strong> ↑</td>
<td>0,19</td>
<td>0,04</td>
<td>0,323</td>
<td>0,28</td>
<td>0,58</td>
</tr>
<tr class="odd">
<td>Hypermaper 2.0</td>
<td><strong>Hypervolume</strong> ↑</td>
<td>97,32%</td>
<td>82,86%</td>
<td>64,579%</td>
<td>44,12%</td>
<td>84,39%</td>
</tr>
<tr class="even">
<td></td>
<td><strong>p-distance</strong> ↓</td>
<td>0,9</td>
<td>1,12</td>
<td>0,059</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td></td>
<td><strong>ndf-size</strong> ↑</td>
<td>5,42%</td>
<td>6,25%</td>
<td>1,17%</td>
<td>10,24%</td>
<td>3,26%</td>
</tr>
<tr class="even">
<td></td>
<td><strong>space-metrics</strong> ↑</td>
<td>0,11</td>
<td>0,08</td>
<td>0,029</td>
<td>0,31</td>
<td>0,06</td>
</tr>
<tr class="odd">
<td>NSGA2 50k <br>(Baseline)</td>
<td><strong>Hypervolume</strong> ↑</td>
<td>100%</td>
<td>100%</td>
<td>100%</td>
<td>100%</td>
<td>100%</td>
</tr>
<tr class="even">
<td></td>
<td><strong>p-distance</strong> ↓</td>
<td>2,04e-05</td>
<td>0,0003</td>
<td>8,81e-06</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="odd">
<td></td>
<td><strong>ndf-size</strong> ↑</td>
<td>0,72%</td>
<td>0,72%</td>
<td>0,360%</td>
<td>0,72%</td>
<td>0,72%</td>
</tr>
<tr class="even">
<td></td>
<td><strong>space-metric</strong> ↑</td>
<td>1</td>
<td>1</td>
<td>1,000</td>
<td>1</td>
<td>0,6</td>
</tr>
</tbody>
</table>
</div>
<p>To summarize, it follows from our results that our strategy generally
gives optimal or better results than the baseline on the majority of
investigated problems.</p>
<p>We assume that our positive results were due to the new features we
implemented, such as a surrogate model portfolio and adaptive sampling
plan. These features have yielded significant results on almost all
problems. However, we did not apply inner parameter tuning: in all
experiments, TutorM was used with default parameters.</p>
<h2 id="benchmark-2-inner-parameters">Benchmark 2: Inner parameters</h2>
<p>For the second benchmark, we investigated whether it is possible to
further improve the performance of TutorM by tuning its parameters. We
examine the effect of internal parameters on the performance and quality
of optimization. As was mentioned in the previous section, it was
applied with a default setting.</p>
<h3 id="tutorm-parameters">TutorM parameters</h3>
<p>Besides the standard model-based parameters, it is necessary to
investigate the impact of additional TutorM parameters such as
validation thresholds, test-set and prediction size. This research is
needed to select the configuration that can improve results of the
existing system. Unfortunately, there is insufficient information
available about how to configure model-based parameter optimization
<span class="citation" data-cites="hXsWZiMi n6umRRsz">[<a href="#ref-n6umRRsz" role="doc-biblioref">39</a>,<a href="#ref-hXsWZiMi" role="doc-biblioref">46</a>]</span>. Filling this gap in knowledge will be
useful not only for the availability of TutorM but also for general
tuning of model-based optimization. Due to limited time, we consider
only the ZDT4 and ZDT6 problems using the surrogate portfolio from the
first benchmark, but without the <em>Gaussian regression model</em>. This model
takes a long time to train and the full factorial design did not fit
within our time frame. The following parameters are exposed in the
developed TutorM class:</p>
<ul>
<li><p><strong>Initial dataset</strong> [<code>0</code>, 100, 500, 750]. It is the initial number of
points obtained from sampling plan. At the same time, the total
budget for measurements remains unchanged and equals 1000. The
default value is <code>0</code>.</p></li>
<li><p><strong>Surrogate validation.</strong> Criteria and parameters for evaluating the
usefulness of the surrogate model.</p>
<ul>
<li><p><strong>Train/test split</strong> [<code>75/25</code>, 90/10] is a splitting proportion in
which the samples available for training and testing are
divided. Train and test sets are crucial to ensure that the
surrogate model is able to generalize well to new data. The
default value is <code>75/25</code>.</p></li>
<li><p><strong>Cross-validation threshold</strong>[0.2, <code>0.65</code>, 0.9] is a minimum
accuracy threshold for any round in cross-validation(CV). CV is
used to select valid surrogate models and avoid overfitting. The
default values is <code>0.65</code>.</p></li>
<li><p><strong>Test threshold</strong> [0, <code>0.6</code>, 0.9] is a minimum accuracy threshold
for the test set. The accuracy obtained from the test set and is
used to verify the validity of models based on how they
extrapolate unknown data. The default value is 0.6.</p></li>
</ul></li>
<li><p><strong>Optimization search algorithm</strong> [NSGA2, <code>MOEA-Ctrl</code>] optimization algorithm
for multi-objective solutions. The default value is <code>MOEA-Ctrl</code>.</p></li>
<li><p><strong>Solution combinations</strong> [Non-dominated front score (ndf score),
<code>Stacking</code> ] approach for choosing a set of solutions from a valid surrogate
model. Since several models can be valid and each one provides its
own set of decisions, we have a range of options. <em>Non-dominated
front score (ndf score)</em> prefers the surrogate model with the
highest precision for non-dominant solutions, whereas the <em>stack</em>
integrates all available surrogate solutions into one set of
solutions. The default value is <code>Stacking</code>.</p></li>
<li><p><strong>Prediction count</strong> [<code>10</code>, 100] number of random solutions for the
real evaluation that are selected from the set of solutions. The
default value is <code>10</code>.</p></li>
</ul>
<p>As a result of the full factorial design, 576 possible combinations were
obtained. Each combination was repeated five times and averaged.
Conclusions were made based on the 40 best and worst combinations.</p>
<p>First, we will consider the ZDT6 problem. Inspection of Figures
<a href="#fig:zdt6_w">11</a> <a href="#fig:zdt6_b">12</a> indicates that the <em>solution combination</em> made the
most significant impact on the result.</p>
<div id="fig:zdt6_w" class="fignos">
<figure>
<img src="images/conf_zdt6_worst.svg?sanitize=true" style="width:100.0%" alt="" /><figcaption><span>Figure 11:</span> ZDT6: Average result of the worst configurations</figcaption>
</figure>
</div>
<div id="fig:zdt6_b" class="fignos">
<figure>
<img src="images/conf_zdt6_best.svg?sanitize=true" style="width:100.0%" alt="" /><figcaption><span>Figure 12:</span> ZDT6: Average result of the best configurations</figcaption>
</figure>
</div>
<p>There is a definite advantage in combining solutions into a stack. The
second most important parameter is the <em>Optimization search
algorithm</em>(Solver). The best configurations prefer to pick a combination
of Genetic Algorithms (MOEA-Ctrl) for optimization.</p>
<p>Let us look at the <em>solution combination</em> and the <em>Optimization search
algorithm</em> options in more detail (Figure <a href="#fig:conf_zdt6_sign">13</a>).</p>
<div id="fig:conf_zdt6_sign" class="fignos">
<figure>
<img src="images/conf_zdt6_solver.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 13:</span> Correlation between the most influenceable parameters for the ZDT6: solution combination strategy and optimization algorithm</figcaption>
</figure>
</div>
<p>The impact of changing the algorithm is highly dependent on the solution
combination strategy. Improvement in results for MOEA-Ctrl is more
significant when the results are combined into a stack. This advantage
can be explained by the fact that the stack reduces the bias of
surrogate models while the combination of genetic algorithms decreases
prediction variance. Now we will look at the ZDT4 problem (Figure <a href="#fig:zdt4_w">14</a> <a href="#fig:zdt4_b">15</a>).</p>
<div id="fig:zdt4_w" class="fignos">
<figure>
<img src="images/conf_zdt4_worst.svg?sanitize=true" style="width:100.0%" alt="" /><figcaption><span>Figure 14:</span> ZDT4: Average results of the worst configurations</figcaption>
</figure>
</div>
<div id="fig:zdt4_b" class="fignos">
<figure>
<img src="images/conf_zdt4_best.svg?sanitize=true" style="width:100.0%" alt="" /><figcaption><span>Figure 15:</span> ZDT4: Average results of the best configurations</figcaption>
</figure>
</div>
<p>The results are similar to those obtained with the ZDT6 problem: the
solutions stack take part almost in all of the best configurations.
However, for this problem, there is no clear dominance of a single
algorithm. Yet, the validation thresholds have an impact on results
(Figure <a href="#fig:conf_zdt4_sign">16</a>).</p>
<div id="fig:conf_zdt4_sign" class="fignos">
<figure>
<img src="images/conf_zdt4_cv_score.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 16:</span> An impact of the cross-validation threshold for the ZDT4.</figcaption>
</figure>
</div>
<p>A significant difference is seen for the cross-validation threshold in
the case of <em>ndf score</em> <em>solution combination</em> set (Figure
<a href="#fig:zdt4_w">14</a>). It should be noted that the stack makes the
validation threshold impact less significant, as evident from Figure
<a href="#fig:conf_zdt4_sign">16</a>. This influence is related to this technique’s
ability to reduce the bias of solutions.</p>
<p>Another interesting conclusion can be made from the <em>initial sample
size</em>. The worst and the best configurations are most affected by tha
absence of a sampling plan. The reason for this is that the small number
of samples may lead to a surrogate model fallacy in extrapolation the
search space while, at the same time, the small number of samples
provide more opportunities for optimization search.</p>
<h3 id="sampling-plan-size">Sampling plan size</h3>
<p>The purpose of this experiment is to review the dependencies between the
optimization results and the sampling plan size. The Hypermapper was
selected as a foundation for analysis because it has a static
implementation of the optimization algorithm with the surrogate model.</p>
<p>The results are shown in the following Figure <a href="#fig:hmapper_start_set">17</a>.</p>
<div id="fig:hmapper_start_set" class="fignos">
<figure>
<img src="images/hypermapper_start_set.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 17:</span> Influence of the initial sample plan on optimization process with Hypermapper 2.0</figcaption>
</figure>
</div>
<p>For WFG problems, the criterion is hypervolume and for ZDT problems it
is p-distance. Of all the results, the initial sampling plan has the
smallest effect on the WFG4. Since this problem is unimodal, the model
requires fewer samples for extrapolation. Other problems have a more
complicated multimodal landscape that is shown by unstable results.</p>
<h3 id="results-1">Results</h3>
<p>We investigated the parameters of TutorM and determined which ones
produce the best results. Also was noticed that <em>Solution combinations</em>
and <em>Optimization search algorithm</em> had the most significant impact on
solution quality. The <em>stack</em> of solutions with MOEA-Ctrl is the best
combination of parameters to use as a default for TutorM. The other
parameters tested have a much smaller effect.</p>
<h2 id="benchmark-3-scalability-of-surrogate-models">Benchmark 3: Scalability of surrogate models</h2>
<p>Not only the type of the problem landscape but also its dimensions are
essential factors for picking a surrogate model. The advantage of a
surrogate model can be lost if the number of parameters or criteria is
changed. The goal of this experiment is to find out the scalability of
surrogate models.</p>
<p>The following surrogates were selected for evaluation:</p>
<ul>
<li><p><em>Gaussian Process Regressor</em> with kernel design from
GPML<span class="citation" data-cites="1FXlw7TX2">[<a href="#ref-1FXlw7TX2" role="doc-biblioref">18</a>]</span>. Gaussian process models are well-known and are
commonly used in Bayesian optimization for a wide variety of
problems <span class="citation" data-cites="iL724s1s mu8IFeYo">[<a href="#ref-iL724s1s" role="doc-biblioref">20</a>,<a href="#ref-mu8IFeYo" role="doc-biblioref">54</a>]</span>.</p></li>
<li><p><em>MLPRegressor</em> is a neural network implementation from the <em>sklearn</em>
framework. Neural networks can automatically discover useful
representations in high-dimensional data by learning multiple layers
<span class="citation" data-cites="DjMKzd5z">[<a href="#ref-DjMKzd5z" role="doc-biblioref">55</a>]</span>. Because this model simultaneously extrapolates all
objectives, we chose an architecture that consists of 5 layers and
100 neurons per layer.</p></li>
<li><p>The surrogate portfolio includes Gradient Boosting Regressor,
MLPRegressor, and <em>SVR (RBF kernel)</em>, as mentioned in
Benchmark 2.</p></li>
</ul>
<p>The DTLZ2 problem was selected to evaluate the scalability of the
surrogate models. It is an unimodal problem with multiple global optima
and concave geometry of the Pareto front. During experimentation with
DTLZ2, the number of optimization criteria changed with a constant
number of parameters. Figure <a href="#fig:scale_dtlz2">18</a> shows the three
selected surrogate strategies with the average distance to the Pareto
front (first row) and time spent per optimization iteration (bottom
row). For all cases, the experiment was repeated five times.</p>
<div id="fig:scale_dtlz2" class="fignos">
<figure>
<img src="images/scale_dtlz2.svg" style="width:100.0%" alt="" /><figcaption><span>Figure 18:</span> Scaling example for the three variants of the surrogate on the DTLZ2 with the 9-dimensional parameter space</figcaption>
</figure>
</div>
<p>As illustrated by Figure <a href="#fig:scale_dtlz2">18</a>, <em>Gaussian Process
Regressor</em> model provides significantly better results relative to other
approaches, but only for the bi-objective problem. Increasing the number
of objectives to four leads to only the <em>MLPRegressor</em> and surrogate
portfolio converging on an optimal solution. Further increasing the
number of objectives makes the search space too complicated, and all
approaches fail to find solutions.</p>
<h3 id="results-2">Results</h3>
<p>The ability of models to estimate the search space depends on their
hyperparameters. As an example: <em>Gaussian Process Regressor</em> are highly
dependent on the kernel while <em>MLPRegressor</em> depends on a number of
layers. In turn, for the surrogate portfolio, the parameters determine
how to <em>build and select</em> surrogate models. In the portfolio, a single
model with varying parameters is evaluated as a set of separate
entities. Thus, the scalability required to solve multi-dimensional
problems can be generated by surrogate portfolios.</p>
<h2 id="discussion-of-results">Discussion of results</h2>
<p>The purpose of this thesis is to investigate the use of a cross-grained
compositional model for solving multi-objective problems. In this
evaluation section, we provided an extensive comparative analysis of the
performance of our and other techniques on a wide range of problems. The
analysis also included an exhaustive study of the possible parameters
and the impact of the sampling plan on results. The possibility of
scaling surrogate models by increasing the number of objectives was also
tested.</p>
<p>We draw the following conclusions from our evaluation experiments:</p>
<ol type="1">
<li><p>TutorM is far ahead of its counterparts (Hypermapper 2.0 and NSGA2)
and achieves optimal results while sparing function evaluations.</p></li>
<li><p>Parameter analysis for TutorM shows that results are significantly
improved by combining solutions with multiple surrogates (solution
stack).</p></li>
<li><p>When the possibility of scaling up the surrogate portfolio was
tested, we determine that dynamically selecting an appropriate
surrogate model for the specific dimensionality of the problem is
essential.</p></li>
</ol>
<h1 id="conclusion-1">Conclusion</h1>
<p>In this thesis, we propose a strategy for dynamic composition of
surrogate models which allows the use of a surrogate portfolio for
tuning black-box functions. Our investigation revealed that current
surrogate-based optimization operates with a single type of model or the
static combination of several varieties. This type of approach lacks
variability and cannot be adapted for arbitrary problems. Our research
goal was to decompose model-based multi-objective optimization into
reusable and comparable components. To achieve this goal we make
following research contributions:</p>
<ol type="1">
<li><p>First, we developed a compositional model for an arbitrary type of
surrogate model. We established and implemented a component that
combined several models into one surrogate hypothesis [<strong>RG1</strong>].
Nevertheless, for an arbitrary, unknown problem, we still require
dynamic integration of surrogates into a composite model.</p></li>
<li><p>Second, we adapted the cross-validation technique to validate and
compare surrogate models. A multi-step validation is essential to
avoid the model underfeed and overfeed. Validation information
enables us to dynamically decide on picking the right models or use
the sampling plan as a default variant [<strong>RG3</strong>].</p></li>
<li><p>Third, we implemented a surrogate portfolio that combines the
functionality from the preceding paragraphs. The portfolio allows
the dynamic selection and combination of multiple surrogate models
that are concerned with a concrete problem. This property means that
a portfolio can offer more than one surrogate hypothesis for
optimization [<strong>RG2</strong>].</p></li>
<li><p>Fourth, we improved the variability and extensibility not only of
surrogate models but also of optimization algorithms. This
improvement creates the possibility to combine solutions into a
stack to reduce overall error.</p></li>
</ol>
<p>In sum, these contributions enabled us to achieve results comparable to
the state-of-the-art NSGA2 optimization algorithm in a wide range of
optimization tasks. For almost all problems, our approach has
demonstrated a significant advantage over all solution criteria.
Analysis of the parameters showed that the most significant influence on
results was made by solution combination (assumptions about the Pareto
front). We have implemented a dynamic sampling plan that selects
additional random points if there is no valid model. This strategy
improved exploration-exploitation balance, which is determined for each
optimization problem independently, and that led to the overall
improvements in the results. The next crucial issue that we addressed is
the optimization of multidimensional space. We have shown that a
surrogate model can be applied to a small number of objectives but can
be inappropriate if the objectives are multiplied. The optimal solution
for this issue is a flexible combination of better models at each
optimization iteration.</p>
<p>We consider that the results accomplished in this thesis can be useful
for improving parameter tuning and for overall model-based optimization.</p>
<h1 id="future-work">Future Work</h1>
<p>In this thesis we have developed the strategy that has a component
structure and a unified interface. All major components are easily
replaceable and scalable. A strong feature of our solution is the
adaptation of optimization to a scaled unknown problem. That is why
further integration with the <em>software product line</em> is a promising
improvement. The right solution for this is - a software product line
for parameter tuning. It has the necessary key features such as stop
condition, noisy experiments and distributed architecture. The
integration of this thesis into BRISE will improve its variability and
scalability.</p>
<p>There are other several directions that we aim to focus on in the
future.</p>
<ul>
<li><p>Promising results have been obtained for the combination of
optimization techniques with surrogate modes. Further investigation
in extensive parallel combination of <em>surrogate models and
optimization algorithms</em> could significantly improve optimization
results.</p></li>
<li><p>It is advisable to change the composition of the portfolio to
discard those models that are performing poorly. This <em>dynamic model
collection</em> for the surrogate portfolio could improve the
exploration of new models and reduce time costs.</p></li>
</ul>
<h1 class="page_break_before" id="appendix">Appendix</h1>
<div id="tbl:ZDT" class="tablenos">
<table>
<caption><span>Table 1:</span> Results of 5 repetitions for ZDT problem set: Function evaluation budget is 1000. The baseline is the NSGA2 with 50000 evaluations (100 population size in 500 generations)
</caption>
<thead>
<tr class="header">
<th><strong>Problem</strong></th>
<th><strong>Approach</strong></th>
<th>↓ <strong>p-distance</strong></th>
<th>↑ <strong>Hypervolume</strong> %</th>
<th>↑ <strong>ndf size</strong> %</th>
<th>↑ <strong>ndf space</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ZDT1</td>
<td>Baseline</td>
<td>1,08e-05</td>
<td>99,78</td>
<td>0,16</td>
<td>0,22</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>4,74e-05</strong></td>
<td><strong>100</strong></td>
<td><strong>90,33</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>0,02</td>
<td>89,86</td>
<td>9,66</td>
<td>0,08</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>0,12</td>
<td>98,93</td>
<td>10,36</td>
<td>0,04</td>
</tr>
<tr class="odd">
<td>ZDT2</td>
<td>Baseline</td>
<td>1,04e-14</td>
<td>99,79</td>
<td>0,16</td>
<td>0,29</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,00013</strong></td>
<td><strong>100</strong></td>
<td><strong>86,87</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>0,01</td>
<td>88,78</td>
<td>8,82</td>
<td>0,06</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>0,18</td>
<td>97,31</td>
<td>5,12</td>
<td>0,04</td>
</tr>
<tr class="odd">
<td>ZDT3</td>
<td>Baseline</td>
<td>1,69e-08</td>
<td>100</td>
<td>0,16</td>
<td>0,39</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,00012</strong></td>
<td><strong>99,47</strong></td>
<td><strong>86</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>0,02</td>
<td>89,92</td>
<td>9,82</td>
<td>0,28</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>0,31</td>
<td>92,03</td>
<td>5,64</td>
<td>0,12</td>
</tr>
<tr class="odd">
<td>ZDT4</td>
<td>Baseline</td>
<td>2,04e-05</td>
<td>100</td>
<td>0,72</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,01</strong></td>
<td><strong>99,80</strong></td>
<td><strong>50</strong></td>
<td><strong>0,78</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>0,04</td>
<td>83,43</td>
<td>8,77</td>
<td>0,19</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>0,90</td>
<td>97,32</td>
<td>5,42</td>
<td>0,11</td>
</tr>
<tr class="odd">
<td>ZDT6</td>
<td>Baseline</td>
<td>0,0003</td>
<td>100</td>
<td>0,72</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,09</strong></td>
<td><strong>99,43</strong></td>
<td>4,26</td>
<td>0,17</td>
</tr>
<tr class="odd">
<td></td>
<td>Hypermapper 2.0</td>
<td>1,12</td>
<td>82,86</td>
<td><strong>6,25</strong></td>
<td>0,08</td>
</tr>
<tr class="even">
<td></td>
<td>NSGA2 1k</td>
<td>1,29</td>
<td>83,84</td>
<td>1,01</td>
<td>0,04</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl:DTLZ" class="tablenos">
<table>
<caption><span>Table 2:</span> Results of 5 repetitions for DTLZ problem set: Function evaluation budget is 1000. The baseline is the NSGA2 with 50000 evaluations (100 population size in 500 generations)
</caption>
<thead>
<tr class="header">
<th><strong>Problem</strong></th>
<th><strong>Approach</strong></th>
<th>↓ <strong>p-distance</strong></th>
<th>↑ <strong>Hypervolume</strong> %</th>
<th>↑ <strong>ndf size</strong>%</th>
<th>↑ <strong>ndf space</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>DTLZ1</td>
<td>Baseline</td>
<td>0,800</td>
<td>100</td>
<td>0,24</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>NSGA2 1k</td>
<td><strong>3,277</strong></td>
<td>56,577</td>
<td><strong>1,56</strong></td>
<td>0,046</td>
</tr>
<tr class="odd">
<td></td>
<td>TutorM</td>
<td>51,611</td>
<td><strong>98,163</strong></td>
<td>0,54</td>
<td>0,058</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>74,251</td>
<td>86,173</td>
<td>0,78</td>
<td>0,049</td>
</tr>
<tr class="odd">
<td>DTLZ2</td>
<td>Baseline</td>
<td>5,19e-06</td>
<td>98,603</td>
<td>0,24</td>
<td>0,39</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,0004</strong></td>
<td><strong>100</strong></td>
<td><strong>82,56</strong></td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>0,003</td>
<td>80,415</td>
<td>10</td>
<td>0,301</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>0,058</td>
<td>76,103</td>
<td>2,84</td>
<td>0,063</td>
</tr>
<tr class="odd">
<td>DTLZ3</td>
<td>Baseline</td>
<td>0,4</td>
<td>100</td>
<td>0,24</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>NSGA2 1k</td>
<td><strong>4,430</strong></td>
<td>74,937</td>
<td>0,82</td>
<td>0,037</td>
</tr>
<tr class="odd">
<td></td>
<td>TutorM</td>
<td>38,735</td>
<td><strong>97,743</strong></td>
<td>0,40</td>
<td>0,045</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>92,228</td>
<td>95,010</td>
<td>0,70</td>
<td>0,047</td>
</tr>
<tr class="odd">
<td>DTLZ4</td>
<td>Baseline</td>
<td>8,81e-06</td>
<td>100</td>
<td>0,36</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,001</strong></td>
<td><strong>99,829</strong></td>
<td><strong>30,68</strong></td>
<td>0,666</td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>0,002</td>
<td>87,807</td>
<td>9,60</td>
<td>0,323</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>0,059</td>
<td>64,579</td>
<td>1,18</td>
<td>0,029</td>
</tr>
<tr class="odd">
<td>DTLZ5</td>
<td>Baseline</td>
<td>1,62e-05</td>
<td>98,631</td>
<td>0,24</td>
<td>0,486</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,0004</strong></td>
<td><strong>100</strong></td>
<td><strong>80,88</strong></td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>0,002</td>
<td>81,729</td>
<td>10</td>
<td>0,434</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>0,058</td>
<td>78,463</td>
<td>3,02</td>
<td>0,06</td>
</tr>
<tr class="odd">
<td>DTLZ6</td>
<td>Baseline</td>
<td>0,009</td>
<td>100</td>
<td>0,24</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,123</strong></td>
<td><strong>98,064</strong></td>
<td>3,70</td>
<td>0,142</td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>1,011</td>
<td>54,258</td>
<td>2,88</td>
<td>0,128</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>1,657</td>
<td>18,355</td>
<td>2,22</td>
<td>0,084</td>
</tr>
<tr class="odd">
<td>DTLZ7</td>
<td>Baseline</td>
<td>2,42e-07</td>
<td>99,938</td>
<td>0,24</td>
<td>0,364</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>0,0003</strong></td>
<td><strong>100</strong></td>
<td><strong>87</strong></td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>0,160</td>
<td>92,891</td>
<td>3,04</td>
<td>0,128</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>0,781</td>
<td>91,129</td>
<td>2,24</td>
<td>0,081</td>
</tr>
</tbody>
</table>
</div>
<div id="tbl:WFG" class="tablenos">
<table>
<caption><span>Table 3:</span> Results of 5 repetitions for WFG problem set: Function evaluation budget is 1000. The baseline is the NSGA2 with 50000 evaluations (100 population size in 500 generations)
</caption>
<thead>
<tr class="header">
<th><strong>Problem</strong></th>
<th><strong>Approach</strong></th>
<th>↓ <strong>Hypervolume</strong> %</th>
<th>↑ <strong>ndf size</strong> %</th>
<th>↑ <strong>ndf space</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WFG1</td>
<td>Baseline</td>
<td>100</td>
<td>0,72</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>95,75</strong></td>
<td>3,44</td>
<td><strong>0,51</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>Hypermapper 2.0</td>
<td>44,12</td>
<td><strong>10,24</strong></td>
<td>0,31</td>
</tr>
<tr class="even">
<td></td>
<td>NSGA2 1k</td>
<td>30,52</td>
<td>3,18</td>
<td>0,28</td>
</tr>
<tr class="odd">
<td>WFG2</td>
<td>Baseline</td>
<td>100</td>
<td>0,08</td>
<td>0,63</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>98,64</strong></td>
<td><strong>29,22</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>85,96</td>
<td>6,44</td>
<td>0,35</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>62,35</td>
<td>1,20</td>
<td>0,10</td>
</tr>
<tr class="odd">
<td>WFG3</td>
<td>TutorM</td>
<td><strong>100</strong></td>
<td><strong>55,5</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="even">
<td></td>
<td>Baseline</td>
<td>99,05</td>
<td>0,08</td>
<td>0,29</td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>84,46</td>
<td>9,72</td>
<td>0,15</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>73,31</td>
<td>2,44</td>
<td>0,02</td>
</tr>
<tr class="odd">
<td>WFG4</td>
<td>Baseline</td>
<td>100</td>
<td>0,72</td>
<td>0,60</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>99,28</strong></td>
<td><strong>38,90</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>Hypermapper 2.0</td>
<td>84,39</td>
<td>3,26</td>
<td>0,06</td>
</tr>
<tr class="even">
<td></td>
<td>NSGA2 1k</td>
<td>83,95</td>
<td>10</td>
<td>0,58</td>
</tr>
<tr class="odd">
<td>WFG5</td>
<td>Baseline</td>
<td>100</td>
<td>0,20</td>
<td>0,24</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>98,01</strong></td>
<td><strong>87,60</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>Hypermapper 2.0</td>
<td>84,83</td>
<td>34,74</td>
<td>0,06</td>
</tr>
<tr class="even">
<td></td>
<td>NSGA2 1k</td>
<td>82,70</td>
<td>10,00</td>
<td>0,18</td>
</tr>
<tr class="odd">
<td>WFG6</td>
<td>TutorM</td>
<td><strong>100</strong></td>
<td><strong>52,68</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="even">
<td></td>
<td>Baseline</td>
<td>99,30</td>
<td>0,20</td>
<td>0,33</td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>86,59</td>
<td>10</td>
<td>0,27</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>83,21</td>
<td>2,36</td>
<td>0,03</td>
</tr>
<tr class="odd">
<td>WFG7</td>
<td>TutorM</td>
<td><strong>100</strong></td>
<td><strong>46,30</strong></td>
<td><strong>1</strong></td>
</tr>
<tr class="even">
<td></td>
<td>Baseline</td>
<td>99,30</td>
<td>0,20</td>
<td>0,33</td>
</tr>
<tr class="odd">
<td></td>
<td>NSGA2 1k</td>
<td>86,39</td>
<td>10</td>
<td>0,26</td>
</tr>
<tr class="even">
<td></td>
<td>Hypermapper 2.0</td>
<td>83,14</td>
<td>2,36</td>
<td>0,04</td>
</tr>
<tr class="odd">
<td>WFG8</td>
<td>Baseline</td>
<td>100</td>
<td>0,20</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>95,24</strong></td>
<td><strong>20,70</strong></td>
<td><strong>0,26</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>Hypermapper 2.0</td>
<td>86,74</td>
<td>2,80</td>
<td>0,07</td>
</tr>
<tr class="even">
<td></td>
<td>NSGA2 1k</td>
<td>79,63</td>
<td>9,54</td>
<td>0,20</td>
</tr>
<tr class="odd">
<td>WFG9</td>
<td>Baseline</td>
<td>100</td>
<td>0,20</td>
<td>0,85</td>
</tr>
<tr class="even">
<td></td>
<td>TutorM</td>
<td><strong>92,17</strong></td>
<td><strong>12,92</strong></td>
<td><strong>0,63</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>Hypermapper 2.0</td>
<td>80,80</td>
<td>7,30</td>
<td>0,24</td>
</tr>
<tr class="even">
<td></td>
<td>NSGA2 1k</td>
<td>73,56</td>
<td>10</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<h2 class="page_break_before" id="references">References</h2>
<!-- Explicitly insert bibliography here -->
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-15iqjq0XF">
<p>1. <strong>GALE: geometric active learning for search-based software engineering</strong><br />
Joseph Krall, Tim Menzies, Misty Davies<br />
<em>IEEE Trans. Software Eng.</em> (2015) <a href="https://doi.org/10.1109/TSE.2015.2432024">https://doi.org/10.1109/TSE.2015.2432024</a><br />
DOI: <a href="https://doi.org/10.1109/TSE.2015.2432024">10.1109/tse.2015.2432024</a></p>
</div>
<div id="ref-czq5Shcc">
<p>2. <strong>Nonlinear multiobjective optimization</strong><br />
Kaisa Miettinen<br />
<em>Kluwer</em> (1998)<br />
ISBN: <a href="https://worldcat.org/isbn/978-0-7923-8278-2">978-0-7923-8278-2</a></p>
</div>
<div id="ref-cgOPGY3M">
<p>3. <strong>Comparison of multiobjective evolutionary algorithms: Empirical results</strong><br />
Eckart Zitzler, Kalyanmoy Deb, Lothar Thiele<br />
<em>Evolutionary Computation</em> (2000) <a href="https://doi.org/10.1162/106365600568202">https://doi.org/10.1162/106365600568202</a><br />
DOI: <a href="https://doi.org/10.1162/106365600568202">10.1162/106365600568202</a></p>
</div>
<div id="ref-vbJ1WiNp">
<p>4. <strong>Performance indicators in multiobjective optimization</strong><br />
Charles Audet, Sébastien Le Digabel, Dominique Cartier, Jean Bigeon, Ludovic Salomon<br />
(2018)</p>
</div>
<div id="ref-DCdONjBz">
<p>5. <strong>Direct multisearch for multiobjective optimization</strong><br />
A. L. Custódio, J. F. Aguilar Madeira, A. Ismael F. Vaz, Luís Nunes Vicente<br />
<em>SIAM Journal on Optimization</em> (2011) <a href="https://doi.org/10.1137/10079731X">https://doi.org/10.1137/10079731X</a><br />
DOI: <a href="https://doi.org/10.1137/10079731X">10.1137/10079731x</a></p>
</div>
<div id="ref-Hp8tHCir">
<p>6. <strong>On the complexity of computing the hypervolume indicator</strong><br />
Nicola Beume, Carlos M. Fonseca, Manuel López-Ibáñez, Luís Paquete, Jan Vahrenhold<br />
<em>IEEE Trans. Evolutionary Computation</em> (2009) <a href="https://doi.org/10.1109/TEVC.2009.2015575">https://doi.org/10.1109/TEVC.2009.2015575</a><br />
DOI: <a href="https://doi.org/10.1109/TEVC.2009.2015575">10.1109/tevc.2009.2015575</a></p>
</div>
<div id="ref-1AKoZUHA4">
<p>7. <strong>Fault tolerant design using single and multicriteria genetic algorithm optimization.</strong><br />
Jason R. Schott<br />
(1995)</p>
</div>
<div id="ref-kRD0G3XY">
<p>8. <strong>The asynchronous island model and NSGA-II: study of a new migration operator and its performance</strong><br />
Marcus Märtens, Dario Izzo<br />
<em>Genetic and evolutionary computation conference, GECCO ’13, amsterdam, the netherlands, july 6-10, 2013</em> (2013) <a href="https://doi.org/10.1145/2463372.2463516">https://doi.org/10.1145/2463372.2463516</a><br />
DOI: <a href="https://doi.org/10.1145/2463372.2463516">10.1145/2463372.2463516</a></p>
</div>
<div id="ref-19PHyqZWt">
<p>9. <strong>Scalarizing functions in bayesian multiobjective optimization</strong><br />
Tinkle Chugh<br />
<em>CoRR</em> (2019) <a href="http://arxiv.org/abs/1904.05760">http://arxiv.org/abs/1904.05760</a></p>
</div>
<div id="ref-CE69KuZH">
<p>10. <strong>On the impact of multiobjective scalarizing functions</strong><br />
Bilel Derbel, Dimo Brockhoff, Arnaud Liefooghe, Sébastien Vérel<br />
<em>CoRR</em> (2014) <a href="http://arxiv.org/abs/1409.5752">http://arxiv.org/abs/1409.5752</a></p>
</div>
<div id="ref-ZELkJp0w">
<p>11. <strong>Tutorial on evolutionary multiobjective optimization</strong><br />
Dimo Brockhoff, Tobias Wagner<br />
<em>Proceedings of the companion publication of the 2015 annual conference on genetic and evolutionary computation</em> (2015) <a href="https://doi.org/10.1145/2739482.2756574">https://doi.org/10.1145/2739482.2756574</a><br />
DOI: <a href="https://doi.org/10.1145/2739482.2756574">10.1145/2739482.2756574</a> · ISBN: <a href="https://worldcat.org/isbn/9781450334884">9781450334884</a></p>
</div>
<div id="ref-5fPW8AT3">
<p>12. <strong>A survey of multiobjective optimization in engineering design johan</strong><br />
Johan Andersson<br />
(2000)</p>
</div>
<div id="ref-10qq3sKmV">
<p>13. <strong>A survey of many-objective optimisation in search-based software engineering</strong><br />
Aurora Ramírez, José Raúl Romero, Sebastián Ventura<br />
<em>J. Syst. Softw.</em> (2019) <a href="https://doi.org/10.1016/j.jss.2018.12.015">https://doi.org/10.1016/j.jss.2018.12.015</a><br />
DOI: <a href="https://doi.org/10.1016/j.jss.2018.12.015">10.1016/j.jss.2018.12.015</a></p>
</div>
<div id="ref-WHqOntch">
<p>14. <strong>Response surface methodology: Process and product in optimization using designed experiments</strong><br />
Raymond H. Myers, Douglas C. Montgomery<br />
<em>John Wiley; Sons, Inc.</em> (1995)<br />
ISBN: <a href="https://worldcat.org/isbn/0471581003">0471581003</a></p>
</div>
<div id="ref-1FOgcJYL9">
<p>15. <strong>Gaussian processes in machine learning</strong><br />
Carl Edward Rasmussen<br />
<em>Advanced lectures on machine learning: ML summer schools 2003, canberra, australia, february 2 - 14, 2003, tübingen, germany, august 4 - 16, 2003, revised lectures</em> (2004) <a href="https://doi.org/10.1007/978-3-540-28650-9_4">https://doi.org/10.1007/978-3-540-28650-9_4</a><br />
DOI: <a href="https://doi.org/10.1007/978-3-540-28650-9_4">10.1007/978-3-540-28650-9_4</a> · ISBN: <a href="https://worldcat.org/isbn/978-3-540-28650-9">978-3-540-28650-9</a></p>
</div>
<div id="ref-115GeSP44">
<p>16. <strong>Development of a multi-objective optimization algorithm using surrogate models for coastal aquifer management</strong><br />
George Kourakos, Aristotelis Mantoglou<br />
<em>Journal of Hydrology</em> (2013) <a href="http://www.sciencedirect.com/science/article/pii/S0022169412009511">http://www.sciencedirect.com/science/article/pii/S0022169412009511</a><br />
DOI: <a href="https://doi.org/https://doi.org/10.1016/j.jhydrol.2012.10.050">https://doi.org/10.1016/j.jhydrol.2012.10.050</a></p>
</div>
<div id="ref-1Y1nHvc2">
<p>17. <strong>Interpolation of spatial data: Some theory for kriging</strong><br />
Roger Woodard<br />
<em>Technometrics</em> (2000) <a href="https://doi.org/10.1080/00401706.2000.10485731">https://doi.org/10.1080/00401706.2000.10485731</a><br />
DOI: <a href="https://doi.org/10.1080/00401706.2000.10485731">10.1080/00401706.2000.10485731</a></p>
</div>
<div id="ref-1FXlw7TX2">
<p>18. <strong>Gaussian processes for machine learning (GPML) toolbox</strong><br />
Carl Edward Rasmussen, Hannes Nickisch<br />
<em>J. Mach. Learn. Res.</em> (2010) <a href="http://portal.acm.org/citation.cfm?id=1953029">http://portal.acm.org/citation.cfm?id=1953029</a></p>
</div>
<div id="ref-4nfjnHfv">
<p>19. <strong>Gaussian processes for machine learning</strong><br />
Carl Edward Rasmussen, Christopher K. I. Williams<br />
<em>MIT Press</em> (2006) <a href="http://www.worldcat.org/oclc/61285753">http://www.worldcat.org/oclc/61285753</a><br />
ISBN: <a href="https://worldcat.org/isbn/026218253X">026218253X</a></p>
</div>
<div id="ref-iL724s1s">
<p>20. <strong>Single- and multiobjective evolutionary optimization assisted by gaussian random field metamodels</strong><br />
Michael T. M. Emmerich, Kyriakos C. Giannakoglou, Boris Naujoks<br />
<em>IEEE Trans. Evolutionary Computation</em> (2006) <a href="https://doi.org/10.1109/TEVC.2005.859463">https://doi.org/10.1109/TEVC.2005.859463</a><br />
DOI: <a href="https://doi.org/10.1109/TEVC.2005.859463">10.1109/tevc.2005.859463</a></p>
</div>
<div id="ref-890MGfiJ">
<p>21. <strong>Practical solutions for multi-objective optimization: An application to system reliability design problems</strong><br />
Heidi A. Taboada, Fatema Baheranwala, David W. Coit, Naruemon Wattanapongsakorn<br />
<em>Rel. Eng. and Sys. Safety</em> (2007) <a href="https://doi.org/10.1016/j.ress.2006.04.014">https://doi.org/10.1016/j.ress.2006.04.014</a><br />
DOI: <a href="https://doi.org/10.1016/j.ress.2006.04.014">10.1016/j.ress.2006.04.014</a></p>
</div>
<div id="ref-13Kf7htnk">
<p>22. <strong>ParEGO: A hybrid algorithm with on-line landscape approximation for expensive multiobjective optimization problems</strong><br />
J. Knowles<br />
<em>IEEE Trans. Evolutionary Computation</em> (2006) <a href="https://doi.org/10.1109/TEVC.2005.851274">https://doi.org/10.1109/TEVC.2005.851274</a><br />
DOI: <a href="https://doi.org/10.1109/TEVC.2005.851274">10.1109/tevc.2005.851274</a></p>
</div>
<div id="ref-2c1WpqTZ">
<p>23. <strong>Practical design space exploration</strong><br />
Luigi Nardi, David Koeplinger, Kunle Olukotun<br />
<em>2019 ieee 27th international symposium on modeling, analysis, and simulation of computer and telecommunication systems (mascots)</em> (2019)</p>
</div>
<div id="ref-CrJQ8Xau">
<p>24. <strong>A survey on handling computationally expensive multiobjective optimization problems with evolutionary algorithms</strong><br />
Tinkle Chugh, Karthik Sindhya, Jussi Hakanen, Kaisa Miettinen<br />
<em>Soft Computing</em> (2017-12)<br />
DOI: <a href="https://doi.org/10.1007/s00500-017-2965-0">10.1007/s00500-017-2965-0</a></p>
</div>
<div id="ref-nUhAXe3p">
<p>25. <strong>Hybrid simulation-optimization methods: A taxonomy and discussion</strong><br />
Gonçalo Figueira, Bernardo Almada-Lobo<br />
<em>Simul. Model. Pract. Theory</em> (2014) <a href="https://doi.org/10.1016/j.simpat.2014.03.007">https://doi.org/10.1016/j.simpat.2014.03.007</a><br />
DOI: <a href="https://doi.org/10.1016/j.simpat.2014.03.007">10.1016/j.simpat.2014.03.007</a></p>
</div>
<div id="ref-1Bbk0txPF">
<p>26. <strong>Efficient global optimization of expensive black-box functions</strong><br />
Donald R. Jones, Matthias Schonlau, William J. Welch<br />
<em>J. Global Optimization</em> (1998) <a href="https://doi.org/10.1023/A:1008306431147">https://doi.org/10.1023/A:1008306431147</a><br />
DOI: <a href="https://doi.org/10.1023/A:1008306431147">10.1023/a:1008306431147</a></p>
</div>
<div id="ref-14vOEgTO2">
<p>27. <strong>Esa/pagmo2: Pagmo 2.12.0</strong><br />
Francesco Biscani, Dario Izzo, Wenzel Jakob, GiacomoAcciarini, Marcus Märtens, Micky C, Alessio Mereta, Cord Kaldemeyer, Sergey Lyskov, Giacomo Acciarini, … Andrea Mambrini<br />
<em>Zenodo</em> (2019-12) <a href="https://doi.org/10.5281/zenodo.3582877">https://doi.org/10.5281/zenodo.3582877</a><br />
DOI: <a href="https://doi.org/10.5281/zenodo.3582877">10.5281/zenodo.3582877</a></p>
</div>
<div id="ref-om6wdVM3">
<p>28. <strong>JMetalPy: A python framework for multi-objective optimization with metaheuristics</strong><br />
Antonio Benitez-Hidalgo, Antonio J. Nebro, Jose Garcia-Nieto, Izaskun Oregi, Javier Del Ser<br />
(2019)</p>
</div>
<div id="ref-SrxLVL7k">
<p>29. <strong>PlatEMO: A MATLAB platform for evolutionary multi-objective optimization</strong><br />
Ye Tian, Ran Cheng, Xingyi Zhang, Yaochu Jin<br />
<em>IEEE Computational Intelligence Magazine</em> (2017)</p>
</div>
<div id="ref-11i9KPh5u">
<p>30. <strong>mlrMBO: A Modular Framework for Model-Based Optimization of Expensive Black-Box Functions</strong><br />
Bernd Bischl, Jakob Richter, Jakob Bossek, Daniel Horn, Janek Thomas, Michel Lang<br />
(2017-03-09) <a href="http://arxiv.org/abs/1703.03373">http://arxiv.org/abs/1703.03373</a></p>
</div>
<div id="ref-8Wbkj1xf">
<p>31. <strong>A case study on multi-criteria optimization of an event detection software under limited budgets</strong><br />
Martin Zaefferer, Thomas Bartz-Beielstein, Boris Naujoks, Tobias Wagner, Michael Emmerich<br />
<em>Evolutionary multi-criterion optimization - 7th international conference, EMO 2013, sheffield, uk, march 19-22, 2013. proceedings</em> (2013) <a href="https://doi.org/10.1007/978-3-642-37140-0\_56">https://doi.org/10.1007/978-3-642-37140-0\_56</a><br />
DOI: <a href="https://doi.org/10.1007/978-3-642-37140-0\_56">10.1007/978-3-642-37140-0\_56</a></p>
</div>
<div id="ref-gqqWjGkp">
<p>32. <strong>Multiobjective optimization on a limited budget of evaluations using model-assisted $\mathcal{S}$ -metric selection</strong><br />
Wolfgang Ponweiser, Tobias Wagner, Dirk Biermann, Markus Vincze<br />
(2008-09)<br />
DOI: <a href="https://doi.org/10.1007/978-3-540-87700-4_78">10.1007/978-3-540-87700-4_78</a></p>
</div>
<div id="ref-XcwIljhD">
<p>33. <strong>Planning and multi-objective optimization of manufacturing processes by means of empirical surrogate models</strong><br />
T. Wagner<br />
<em>Vulkan Verlag</em> (2013)</p>
</div>
<div id="ref-OYrq2ZLd">
<p>34. <strong>Parameter tuning for self-optimizing software at scale</strong><br />
Dmytro Pukhkaiev, Uwe Aßmann<br />
<em>CoRR</em> (2019) <a href="http://arxiv.org/abs/1909.03814">http://arxiv.org/abs/1909.03814</a></p>
</div>
<div id="ref-1FBsMpBkY">
<p>35. <strong>BOHB: robust and efficient hyperparameter optimization at scale</strong><br />
Stefan Falkner, Aaron Klein, Frank Hutter<br />
<em>CoRR</em> (2018) <a href="http://arxiv.org/abs/1807.01774">http://arxiv.org/abs/1807.01774</a></p>
</div>
<div id="ref-e2TT8RyQ">
<p>36. <strong>Sequential model-based optimization for general algorithm configuration</strong><br />
Frank Hutter, Holger H. Hoos, Kevin Leyton-Brown<br />
<em>Learning and intelligent optimization - 5th international conference, LION 5, rome, italy, january 17-21, 2011. selected papers</em> (2011) <a href="https://doi.org/10.1007/978-3-642-25566-3\_40">https://doi.org/10.1007/978-3-642-25566-3\_40</a><br />
DOI: <a href="https://doi.org/10.1007/978-3-642-25566-3\_40">10.1007/978-3-642-25566-3\_40</a></p>
</div>
<div id="ref-hC44c3Vm">
<p>37. <strong>SMAC v3: Algorithm configuration in python</strong><br />
Marius Lindauer, Katharina Eggensperger, Matthias Feurer, Stefan Falkner, André Biedenkapp, Frank Hutter<em>< github.com automl smac3>; GitHub</em> (2017)</p>
</div>
<div id="ref-HSZsAP2u">
<p>38. <strong>An evolutionary algorithm with spatially distributed surrogates for multiobjective optimization</strong><br />
Amitay Isaacs, Tapabrata Ray, Warren Smith<br />
<em>Progress in artificial life</em> (2007)<br />
ISBN: <a href="https://worldcat.org/isbn/978-3-540-76931-6">978-3-540-76931-6</a></p>
</div>
<div id="ref-n6umRRsz">
<p>39. <strong>A hybrid surrogate-based approach for evolutionary multi-objective optimization</strong><br />
A. Rosales-Pérez, C. A. C. Coello, J. A. Gonzalez, C. A. Reyes-Garcia, H. J. Escalante<br />
<em>2013 ieee congress on evolutionary computation</em> (2013)<br />
DOI: <a href="https://doi.org/10.1109/CEC.2013.6557876">10.1109/cec.2013.6557876</a></p>
</div>
<div id="ref-1a94fr8U">
<p>40. <strong>Evolutionary optimization with hierarchical surrogates</strong><br />
Xiaofen Lu, Tao Sun, Ke Tang<br />
<em>Swarm Evol. Comput.</em> (2019) <a href="https://doi.org/10.1016/j.swevo.2019.03.005">https://doi.org/10.1016/j.swevo.2019.03.005</a><br />
DOI: <a href="https://doi.org/10.1016/j.swevo.2019.03.005">10.1016/j.swevo.2019.03.005</a></p>
</div>
<div id="ref-b95kEJCL">
<p>41. <strong>Efficient multi-objective optimization through population-based parallel surrogate search</strong><br />
Taimoor Akhtar, Christine A. Shoemaker<br />
(2019)</p>
</div>
<div id="ref-BvoEknRH">
<p>42. <strong>A reinforcement learning hyper-heuristic in multi-objective single point search with application to structural fault identification</strong><br />
Jiong Tang Pei Cao<br />
<em>CoRR</em> (2018) <a href="http://arxiv.org/abs/1812.07958">http://arxiv.org/abs/1812.07958</a></p>
</div>
<div id="ref-LiF8v83X">
<p>43. <strong>Design patterns: Elements of reusable object-oriented software</strong><br />
Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides<br />
<em>Addison-Wesley Longman Publishing Co., Inc.</em> (1995)<br />
ISBN: <a href="https://worldcat.org/isbn/0201633612">0201633612</a></p>
</div>
<div id="ref-5eR7xJoM">
<p>44. <strong>Bayesian optimization with robust bayesian neural networks</strong><br />
Jost Tobias Springenberg, Aaron Klein, Stefan Falkner, Frank Hutter<br />
<em>Advances in neural information processing systems 29: Annual conference on neural information processing systems 2016, december 5-10, 2016, barcelona, spain</em> (2016) <a href="http://papers.nips.cc/paper/6117-bayesian-optimization-with-robust-bayesian-neural-networks">http://papers.nips.cc/paper/6117-bayesian-optimization-with-robust-bayesian-neural-networks</a></p>
</div>
<div id="ref-oZVt7BwU">
<p>45. <strong>The elements of statistical learning: Data mining, inference, and prediction</strong><br />
Trevor Hastie, Jerome H. Friedman, Robert Tibshirani<br />
<em>Springer</em> (2001) <a href="https://doi.org/10.1007/978-0-387-21606-5">https://doi.org/10.1007/978-0-387-21606-5</a><br />
DOI: <a href="https://doi.org/10.1007/978-0-387-21606-5">10.1007/978-0-387-21606-5</a> · ISBN: <a href="https://worldcat.org/isbn/978-1-4899-0519-2">978-1-4899-0519-2</a></p>
</div>
<div id="ref-hXsWZiMi">
<p>46. <strong>A subjective review of the state of the art in model-based parameter tuning</strong><br />
Tobias Wagner<br />
(2010-01)</p>
</div>
<div id="ref-2iBa9w3z">
<p>47. <strong>API design for machine learning software: Experiences from the scikit-learn project</strong><br />
Lars Buitinck, Gilles Louppe, Mathieu Blondel, Fabian Pedregosa, Andreas Mueller, Olivier Grisel, Vlad Niculae, Peter Prettenhofer, Alexandre Gramfort, Jaques Grobler, … Gaël Varoquaux<br />
(2013)</p>
</div>
<div id="ref-5HeKgs4K">
<p>48. <strong>[Scikit-learn: Machine Learning in Python ]{.nocase}</strong><br />
F. Pedregosa, G. Varoquaux, A. Gramfort, V. Michel, B. Thirion, O. Grisel, M. Blondel, P. Prettenhofer, R. Weiss, V. Dubourg, … E. Duchesnay<br />
<em>Journal of Machine Learning Research</em> (2011)</p>
</div>
<div id="ref-1HFetF7vb">
<p>49. <strong>A review of multiobjective test problems and a scalable test problem toolkit</strong><br />
S. Huband, P. Hingston, L. Barone, L. While<br />
<em>IEEE Transactions on Evolutionary Computation</em> (2006-10)<br />
DOI: <a href="https://doi.org/10.1109/TEVC.2005.861417">10.1109/tevc.2005.861417</a></p>
</div>
<div id="ref-QVZZuqyA">
<p>50. <strong>Multi-objective genetic algorithms: Problem difficulties and construction of test problems</strong><br />
Kalyanmoy Deb<br />
<em>Evol. Comput.</em> (1999) <a href="https://doi.org/10.1162/evco.1999.7.3.205">https://doi.org/10.1162/evco.1999.7.3.205</a><br />
DOI: <a href="https://doi.org/10.1162/evco.1999.7.3.205">10.1162/evco.1999.7.3.205</a></p>
</div>
<div id="ref-yHWkop2U">
<p>51. <strong>Scalable test problems for evolutionary multiobjective optimization</strong><br />
Kalyanmoy Deb, Lothar Thiele, Marco Laumanns, Eckart Zitzler<br />
<em>Evolutionary multiobjective optimization</em> (2005) <a href="https://doi.org/10.1007/1-84628-137-7\_6">https://doi.org/10.1007/1-84628-137-7\_6</a><br />
DOI: <a href="https://doi.org/10.1007/1-84628-137-7\_6">10.1007/1-84628-137-7\_6</a></p>
</div>
<div id="ref-BJhPNw0R">
<p>52. <strong>A fast elitist non-dominated sorting genetic algorithm for multi-objective optimisation: NSGA-II</strong><br />
Kalyanmoy Deb, Samir Agrawal, Amrit Pratap, T. Meyarivan<br />
<em>Parallel problem solving from nature - PPSN vi, 6th international conference, paris, france, september 18-20, 2000, proceedings</em> (2000) <a href="https://doi.org/10.1007/3-540-45356-3\_83">https://doi.org/10.1007/3-540-45356-3\_83</a><br />
DOI: <a href="https://doi.org/10.1007/3-540-45356-3\_83">10.1007/3-540-45356-3\_83</a></p>
</div>
<div id="ref-Dk9KXQBq">
<p>53. <strong>MOEA/D: A multiobjective evolutionary algorithm based on decomposition</strong><br />
Qingfu Zhang, Hui Li<br />
<em>IEEE Trans. Evolutionary Computation</em> (2007) <a href="https://doi.org/10.1109/TEVC.2007.892759">https://doi.org/10.1109/TEVC.2007.892759</a><br />
DOI: <a href="https://doi.org/10.1109/TEVC.2007.892759">10.1109/tevc.2007.892759</a></p>
</div>
<div id="ref-mu8IFeYo">
<p>54. <strong>GP-DEMO: differential evolution for multiobjective optimization based on gaussian process models</strong><br />
Miha Mlakar, Dejan Petelin, Tea Tusar, Bogdan Filipic<br />
<em>European Journal of Operational Research</em> (2015) <a href="https://doi.org/10.1016/j.ejor.2014.04.011">https://doi.org/10.1016/j.ejor.2014.04.011</a><br />
DOI: <a href="https://doi.org/10.1016/j.ejor.2014.04.011">10.1016/j.ejor.2014.04.011</a></p>
</div>
<div id="ref-DjMKzd5z">
<p>55. <strong>Deep kernel learning</strong><br />
Andrew Gordon Wilson, Zhiting Hu, Ruslan Salakhutdinov, Eric P. Xing<br />
<em>Proceedings of the 19th international conference on artificial intelligence and statistics, AISTATS 2016, cadiz, spain, may 9-11, 2016</em> (2016) <a href="http://proceedings.mlr.press/v51/wilson16.html">http://proceedings.mlr.press/v51/wilson16.html</a></p>
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p><span>scikit-learn.org</span>: sklearn.gaussianprocess.GaussianProcessRegressor<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p><span>scikit-learn.org</span>: sklearn.gaussianprocess.GaussianProcessRegressor<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p><span>scikit-learn.org</span>: sklearn.svm.SVR<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p><span>scikit-learn.org</span>: sklearn.neural network.MLPRegressor<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p><span>scikit-learn.org</span>: sklearn.ensemble.GradientBoostingRegressor<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!-- default theme -->

<style>
    /* import google fonts */
    @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
    @import url("https://fonts.googleapis.com/css?family=Source+Code+Pro");

    /* -------------------------------------------------- */
    /* global */
    /* -------------------------------------------------- */

    /* all elements */
    * {
        /* force sans-serif font unless specified otherwise */
        font-family: "Open Sans", "Helvetica", sans-serif;

        /* prevent text inflation on some mobile browsers */
        -webkit-text-size-adjust: none !important;
        -moz-text-size-adjust: none !important;
        -o-text-size-adjust: none !important;
        text-size-adjust: none !important;
    }

    @media only screen {
        /* "page" element */
        body {
            position: relative;
            box-sizing: border-box;
            font-size: 12pt;
            line-height: 1.5;
            max-width: 8.5in;
            margin: 20px auto;
            padding: 40px;
            border-radius: 5px;
            border: solid 1px #bdbdbd;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            background: #ffffff;
        }
    }

    /* when on screen < 8.5in wide */
    @media only screen and (max-width: 8.5in) {
        /* "page" element */
        body {
            padding: 20px;
            margin: 0;
            border-radius: 0;
            border: none;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05) inset;
            background: none;
        }
    }

    /* -------------------------------------------------- */
    /* headings */
    /* -------------------------------------------------- */

    /* all headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        margin: 20px 0;
        padding: 0;
        font-weight: bold;
    }

    /* biggest heading */
    h1 {
        margin: 40px 0;
        text-align: center;
    }

    /* second biggest heading */
    h2 {
        margin-top: 30px;
        padding-bottom: 5px;
        border-bottom: solid 1px #bdbdbd;
    }

    /* -------------------------------------------------- */
    /* manuscript header */
    /* -------------------------------------------------- */

    /* manuscript title */
    header > h1 {
        margin: 0;
    }

    /* manuscript title caption text (ie "automatically generated on") */
    header + p {
        text-align: center;
        margin-top: 10px;
    }

    /* -------------------------------------------------- */
    /* text elements */
    /* -------------------------------------------------- */

    /* links */
    a {
        color: #2196f3;
        overflow-wrap: break-word;
    }

    /* normal links (not empty, not button link, not syntax highlighting link) */
    a:not(:empty):not(.button):not(.sourceLine) {
        padding-left: 1px;
        padding-right: 1px;
    }

    /* superscripts and subscripts */
    sub,
    sup {
        /* prevent from affecting line height */
        line-height: 0;
    }

    /* unordered and ordered lists*/
    ul,
    ol {
        padding-left: 20px;
    }

    /* class for styling text semibold */
    .semibold {
        font-weight: 600;
    }

    /* class for styling elements horizontally left aligned */
    .left {
        display: block;
        text-align: left;
        margin-left: auto;
        margin-right: 0;
        justify-content: left;
    }

    /* class for styling elements horizontally centered */
    .center {
        display: block;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        justify-content: center;
    }

    /* class for styling elements horizontally right aligned */
    .right {
        display: block;
        text-align: right;
        margin-left: 0;
        margin-right: auto;
        justify-content: right;
    }

    /* -------------------------------------------------- */
    /* section elements */
    /* -------------------------------------------------- */

    /* horizontal divider line */
    hr {
        border: none;
        height: 1px;
        background: #bdbdbd;
    }

    /* paragraphs, horizontal dividers, figures, tables, code */
    p,
    hr,
    figure,
    table,
    pre {
        /* treat all as "paragraphs", with consistent vertical margins */
        margin-top: 20px;
        margin-bottom: 20px;
    }

    /* -------------------------------------------------- */
    /* figures */
    /* -------------------------------------------------- */

    /* figure */
    figure {
        max-width: 100%;
        margin-left: auto;
        margin-right: auto;
    }

    /* figure caption */
    figcaption {
        padding: 0;
        padding-top: 10px;
    }

    /* figure image element */
    figure img {
        max-width: 100%;
        display: block;
        margin-left: auto;
        margin-right: auto;
    }

    /* figure auto-number */
    img + figcaption > span:first-of-type {
        font-weight: bold;
        margin-right: 5px;
    }

    /* -------------------------------------------------- */
    /* tables */
    /* -------------------------------------------------- */

    /* table */
    table {
        border-collapse: collapse;
        border-spacing: 0;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
    }

    /* table cells */
    th,
    td {
        border: solid 1px #bdbdbd;
        padding: 10px;
        /* squash table if too wide for page by forcing line breaks */
        overflow-wrap: break-word;
        word-break: break-word;
    }

    /* header row and even rows */
    th,
    tr:nth-child(2n) {
        background-color: #fafafa;
    }

    /* odd rows */
    tr:nth-child(2n + 1) {
        background-color: #ffffff;
    }

    /* table caption */
    caption {
        text-align: left;
        padding: 0;
        padding-bottom: 10px;
    }

    /* table auto-number */
    table > caption > span:first-of-type,
    div.table_wrapper > table > caption > span:first-of-type {
        font-weight: bold;
        margin-right: 5px;
    }

    /* -------------------------------------------------- */
    /* code */
    /* -------------------------------------------------- */

    /* multi-line code block */
    pre {
        padding: 10px;
        background-color: #eeeeee;
        color: #000000;
        border-radius: 5px;
        break-inside: avoid;
        text-align: left;
    }

    /* inline code, ie code within normal text */
    :not(pre) > code {
        padding: 0 4px;
        background-color: #eeeeee;
        color: #000000;
        border-radius: 5px;
    }

    /* code text */
    /* apply all children, to reach syntax highlighting sub-elements */
    code,
    code * {
        /* force monospace font */
        font-family: "Source Code Pro", "Courier New", monospace;
    }

    /* -------------------------------------------------- */
    /* quotes */
    /* -------------------------------------------------- */

    /* quoted text */
    blockquote {
        margin: 0;
        padding: 0;
        border-left: 4px solid #bdbdbd;
        padding-left: 16px;
        break-inside: avoid;
    }

    /* -------------------------------------------------- */
    /* banners */
    /* -------------------------------------------------- */

    /* info banners */
    .banner {
        box-sizing: border-box;
        display: block;
        position: relative;
        width: 100%;
        margin-top: 20px;
        margin-bottom: 20px;
        padding: 20px;
        text-align: center;
    }

    /* paragraph in banner */
    .banner > p {
        margin: 0;
    }

    /* -------------------------------------------------- */
    /* highlight colors */
    /* -------------------------------------------------- */

    .white {
        background: #ffffff;
    }
    .lightgrey {
        background: #eeeeee;
    }
    .grey {
        background: #757575;
    }
    .darkgrey {
        background: #424242;
    }
    .black {
        background: #000000;
    }
    .lightred {
        background: #ffcdd2;
    }
    .lightyellow {
        background: #ffecb3;
    }
    .lightgreen {
        background: #dcedc8;
    }
    .lightblue {
        background: #e3f2fd;
    }
    .lightpurple {
        background: #f3e5f5;
    }
    .red {
        background: #f44336;
    }
    .orange {
        background: #ff9800;
    }
    .yellow {
        background: #ffeb3b;
    }
    .green {
        background: #4caf50;
    }
    .blue {
        background: #2196f3;
    }
    .purple {
        background: #9c27b0;
    }
    .white,
    .lightgrey,
    .lightred,
    .lightyellow,
    .lightgreen,
    .lightblue,
    .lightpurple,
    .orange,
    .yellow,
    .white a,
    .lightgrey a,
    .lightred a,
    .lightyellow a,
    .lightgreen a,
    .lightblue a,
    .lightpurple a,
    .orange a,
    .yellow a {
        color: #000000;
    }
    .grey,
    .darkgrey,
    .black,
    .red,
    .green,
    .blue,
    .purple,
    .grey a,
    .darkgrey a,
    .black a,
    .red a,
    .green a,
    .blue a,
    .purple a {
        color: #ffffff;
    }

    /* -------------------------------------------------- */
    /* buttons */
    /* -------------------------------------------------- */

    /* class for styling links like buttons */
    .button {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        margin: 5px;
        padding: 10px 20px;
        font-size: 0.75em;
        font-weight: 600;
        text-transform: uppercase;
        text-decoration: none;
        letter-spacing: 1px;
        background: none;
        color: #2196f3;
        border: solid 1px #bdbdbd;
        border-radius: 5px;
    }

    /* buttons when hovered */
    .button:hover:not([disabled]),
    .icon_button:hover:not([disabled]) {
        cursor: pointer;
        background: #f5f5f5;
    }

    /* buttons when disabled */
    .button[disabled],
    .icon_button[disabled] {
        opacity: 0.35;
        pointer-events: none;
    }

    /* class for styling buttons containg only single icon */
    .icon_button {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        margin: 0;
        padding: 0;
        background: none;
        border-radius: 5px;
        border: none;
        width: 20px;
        height: 20px;
        min-width: 20px;
        min-height: 20px;
    }

    /* icon button inner svg image */
    .icon_button > svg {
        height: 16px;
    }

    /* -------------------------------------------------- */
    /* icons */
    /* -------------------------------------------------- */

    /* class for styling icons inline with text */
    .inline_icon {
        height: 1em;
        position: relative;
        top: 0.125em;
    }

    /* -------------------------------------------------- */
    /* print control */
    /* -------------------------------------------------- */

    @media print {
        @page {
            /* suggested printing margin */
            margin: 0.5in;
        }

        /* document and "page" elements */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        /* "page" element */
        body {
            font-size: 11pt !important;
            line-height: 1.35;
        }

        /* all headings */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 15px 0;
        }

        /* heading 1 */
        h1 {
            font-size: 1.75em;
        }

        /* heading 2 */
        h2 {
            font-size: 1.25em;
            margin-top: 0;
        }

        /* heading 3 */
        h3 {
            font-size: 1.10em;
        }

        /* figures and tables */
        figure, table {
            font-size: 0.85em;
        }

        /* table cells */
        th,
        td {
            padding: 5px;
        }

        /* shrink font awesome icons */
        i.fas,
        i.fab,
        i.far,
        i.fal {
            transform: scale(0.85);
        }

        /* decrease banner margins */
        .banner {
            margin-top: 15px;
            margin-bottom: 15px;
            padding: 15px;
        }

        /* class for centering an element vertically on its own page */
        .page_center {
            margin: auto;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            vertical-align: middle;
            break-before: page;
            break-after: page;
        }

        /* always insert a page break before the element */
        .page_break_before {
            break-before: page;
        }

        /* always insert a page break after the element */
        .page_break_after {
            break-after: page;
        }

        /* avoid page break before the element */
        .page_break_before_avoid {
            break-before: avoid;
        }

        /* avoid page break after the element */
        .page_break_after_avoid {
            break-after: avoid;
        }

        /* avoid page break inside the element */
        .page_break_inside_avoid {
            break-inside: avoid;
        }
    }

    /* -------------------------------------------------- */
    /* override pandoc css quirks */
    /* -------------------------------------------------- */

    .sourceCode {
        /* prevent unsightly overflow in wide code blocks */
        overflow: auto !important;
    }

    div.sourceCode {
        /* prevent background fill on top-most code block  container */
        background: none !important;
    }

    .sourceCode * {
        /* force consistent line spacing */
        line-height: 1.5 !important;
    }

    div.sourceCode {
        /* style code block margins same as <pre> element */
        margin-top: 20px;
        margin-bottom: 20px;
    }

    /* -------------------------------------------------- */
    /* tablenos */
    /* -------------------------------------------------- */

    /* tablenos wrapper */
    .tablenos {
        /* show scrollbar on tables if necessary to prevent overflow */
        width: 100%;
        margin: 20px 0;
    }

    .tablenos > table {
        /* move margins from table to table_wrapper to allow margin collapsing */
        margin: 0;
    }

    @media only screen {
        /* tablenos wrapper */
        .tablenos {
            /* show scrollbar on tables if necessary to prevent overflow */
            overflow-x: auto !important;
        }

        .tablenos th,
        .tablenos td {
            overflow-wrap: unset !important;
            word-break: unset !important;
        }

        /* table in wrapper */
        .tablenos table,
        .tablenos table * {
            /* don't break table words */
            overflow-wrap: normal !important;
        }
    }

    /* -------------------------------------------------- */
    /* mathjax */
    /* -------------------------------------------------- */

    /* mathjax containers */
    .math.display > span:not(.MathJax_Preview) {
        /* turn inline element (no dimensions) into block (allows fixed width and thus scrolling) */
        display: flex !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        justify-content: center;
        align-items: center;
        margin: 0 !important;
    }

    /* right click menu */
    .MathJax_Menu {
        border-radius: 5px !important;
        border: solid 1px #bdbdbd !important;
        box-shadow: none !important;
    }

    /* equation auto-number */
    span[id^="eq:"] > span.math.display + span {
        font-weight: 600;
    }

    /* equation */
    span[id^="eq:"] > span.math.display > span {
        /* nudge to make room for equation auto-number and anchor */
        margin-right: 60px !important;
    }

    /* -------------------------------------------------- */
    /* anchors plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* anchor button */
        .anchor {
            opacity: 0;
            margin-left: 5px;
        }

        /* anchor buttons within <h2>'s */
        h2 .anchor {
            margin-left: 10px;
        }

        /* anchor buttons when hovered/focused and anything containing an anchor button when hovered */
        *:hover > .anchor,
        .anchor:hover,
        .anchor:focus {
            opacity: 1;
        }

        /* anchor button when hovered */
        .anchor:hover {
            cursor: pointer;
        }
    }

    /* always show anchor button on devices with no mouse/hover ability */
    @media (hover: none) {
        .anchor {
            opacity: 1;
        }
    }

    /* always hide anchor button on print */
    @media only print {
        .anchor {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* accordion plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* accordion arrow button */
        .accordion_arrow {
            margin-right: 10px;
        }

        /* arrow icon when <h2> data-collapsed attribute true */
        h2[data-collapsed="true"] > .accordion_arrow > svg {
            transform: rotate(-90deg);
        }

        /* all elements (except <h2>'s) when data-collapsed attribute true */
        *:not(h2)[data-collapsed="true"] {
            display: none;
        }

        /* accordion arrow button when hovered and <h2>'s when hovered */
        .accordion_arrow:hover,
        h2[data-collapsed="true"]:hover,
        h2[data-collapsed="false"]:hover {
            cursor: pointer;
        }
    }

    /* always hide accordion arrow button on print */
    @media only print {
        .accordion_arrow {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* tooltips plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* tooltip container */
        #tooltip {
            position: absolute;
            width: 50%;
            min-width: 240px;
            max-width: 75%;
            z-index: 1;
        }

        /* tooltip content */
        #tooltip_content {
            margin-bottom: 5px;
            padding: 20px;
            border-radius: 5px;
            border: solid 1px #bdbdbd;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            background: #ffffff;
            overflow-wrap: break-word;
        }

        /* tooltip copy of paragraphs and figures */
        #tooltip_content > p,
        #tooltip_content > figure {
            margin: 0;
            max-height: 320px;
            overflow-y: auto;
        }

        /* tooltip copy of <img> */
        #tooltip_content > figure > img {
            max-height: 260px;
        }

        /* navigation bar */
        #tooltip_nav_bar {
            margin-top: 10px;
            text-align: center;
        }

        /* navigation bar previous/next buton */
        #tooltip_nav_bar > .icon_button {
            position: relative;
            top: 3px;
        }

        /* navigation bar previous button */
        #tooltip_nav_bar > .icon_button:first-of-type {
            margin-right: 5px;
        }

        /* navigation bar next button */
        #tooltip_nav_bar > .icon_button:last-of-type {
            margin-left: 5px;
        }
    }

    /* always hide tooltip on print */
    @media only print {
        #tooltip {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* jump to first plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* jump button */
        .jump_arrow {
            position: relative;
            top: 0.125em;
            margin-right: 5px;
        }
    }

    /* always hide jump button on print */
    @media only print {
        .jump_arrow {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* link highlight plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* anything with data-highlighted attribute true */
        [data-highlighted="true"] {
            background: #ffeb3b;
        }

        /* anything with data-selected attribute true */
        [data-selected="true"] {
            background: #ff8a65 !important;
        }

        /* animation definition for glow */
        @keyframes highlight_glow {
            0% {
                background: none;
            }
            10% {
                background: #bbdefb;
            }
            100% {
                background: none;
            }
        }

        /* anything with data-glow attribute true */
        [data-glow="true"] {
            animation: highlight_glow 2s;
        }
    }

    /* -------------------------------------------------- */
    /* table of contents plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* toc panel */
        #toc_panel {
            box-sizing: border-box;
            position: fixed;
            top: 0;
            left: 0;
            background: #ffffff;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            z-index: 2;
        }

        /* toc panel when closed */
        #toc_panel[data-open="false"] {
            min-width: 60px;
            width: 60px;
            height: 60px;
            border-right: solid 1px #bdbdbd;
            border-bottom: solid 1px #bdbdbd;
        }

        /* toc panel when open */
        #toc_panel[data-open="true"] {
            min-width: 260px;
            max-width: 480px;
            /* keep panel edge consistent distance away from "page" edge */
            width: calc(((100vw - 8.5in) / 2) - 30px - 40px);
            bottom: 0;
            border-right: solid 1px #bdbdbd;
        }

        /* toc panel header */
        #toc_header {
            box-sizing: border-box;
            display: flex;
            flex-direction: row;
            align-items: center;
            height: 60px;
            margin: 0;
            padding: 20px;
        }

        /* toc panel header when hovered */
        #toc_header:hover {
            cursor: pointer;
        }

        /* toc panel header when panel open */
        #toc_panel[data-open="true"] > #toc_header {
            border-bottom: solid 1px #bdbdbd;
        }

        /* toc open/close header button */
        #toc_button {
            margin-right: 20px;
        }

        /* hide toc list and header text when closed */
        #toc_panel[data-open="false"] > #toc_header > *:not(#toc_button),
        #toc_panel[data-open="false"] > #toc_list {
            display: none;
        }

        /* toc list of entries */
        #toc_list {
            box-sizing: border-box;
            width: 100%;
            padding: 20px;
            position: absolute;
            top: calc(60px + 1px);
            bottom: 0;
            overflow: auto;
        }

        /* toc entry, link to section in document */
        .toc_link {
            display: block;
            padding: 5px;
            position: relative;
            font-weight: 600;
            text-decoration: none;
        }

        /* toc entry when hovered or when "viewed" */
        .toc_link:hover,
        .toc_link[data-viewing="true"] {
            background: #f5f5f5;
        }

        /* toc entry, level 1 indentation */
        .toc_link[data-level="1"] {
            margin-left: 0;
        }

        /* toc entry, level 2 indentation */
        .toc_link[data-level="2"] {
            margin-left: 20px;
        }

        /* toc entry, level 3 indentation */
        .toc_link[data-level="3"] {
            margin-left: 40px;
        }

        /* toc entry, level 4 indentation */
        .toc_link[data-level="4"] {
            margin-left: 60px;
        }

        /* toc entry bullets */
        #toc_panel[data-bullets="true"] .toc_link[data-level]:before {
            position: absolute;
            left: -15px;
            top: -1px;
            font-size: 1.5em;
        }

        /* toc entry, level 2 bullet */
        #toc_panel[data-bullets="true"] .toc_link[data-level="2"]:before {
            content: "\2022";
        }

        /* toc entry, level 3 bullet */
        #toc_panel[data-bullets="true"] .toc_link[data-level="3"]:before {
            content: "\25AB";
        }

        /* toc entry, level 4 bullet */
        #toc_panel[data-bullets="true"] .toc_link[data-level="4"]:before {
            content: "-";
        }
    }

    /* when on screen < 8.5in wide */
    @media only screen and (max-width: 8.5in) {
        /* push <body> ("page") element down to make room for toc icon */
        .toc_body_nudge {
            padding-top: 60px;
        }

        /* toc icon when panel closed and not hovered */
        #toc_panel[data-open="false"]:not(:hover) {
            background: rgba(255, 255, 255, 0.75);
        }
    }

    /* always hide toc panel on print */
    @media only print {
        #toc_panel {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* lightbox plugin */
    /* -------------------------------------------------- */

    @media only screen {
        /* regular <img> in document when hovered */
        .lightbox_document_img:hover {
            cursor: pointer;
        }

        .body_no_scroll {
            overflow: hidden !important;
        }

        /* screen overlay */
        #lightbox_overlay {
            display: flex;
            flex-direction: column;
            position: fixed;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.75);
            z-index: 3;
        }

        /* middle area containing lightbox image */
        #lightbox_image_container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            padding: 20px;
        }

        /* bottom area containing caption */
        #lightbox_bottom_container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
            min-height: 100px;
            max-height: 100px;
            background: rgba(0, 0, 0, 0.5);
        }

        /* image number info text box */
        #lightbox_number_info {
            position: absolute;
            color: #ffffff;
            font-weight: 600;
            left: 2px;
            top: 0;
            z-index: 4;
        }

        /* zoom info text box */
        #lightbox_zoom_info {
            position: absolute;
            color: #ffffff;
            font-weight: 600;
            right: 2px;
            top: 0;
            z-index: 4;
        }

        /* copy of image caption */
        #lightbox_caption {
            box-sizing: border-box;
            display: inline-block;
            width: 100%;
            max-height: 100%;
            padding: 10px 0;
            text-align: center;
            overflow-y: auto;
            color: #ffffff;
        }

        /* navigation previous/next button */
        .lightbox_button {
            width: 100px;
            height: 100%;
            min-width: 100px;
            min-height: 100%;
            color: #ffffff;
        }

        /* navigation previous/next button when hovered */
        .lightbox_button:hover {
            background: none !important;
        }

        /* navigation button icon */
        .lightbox_button > svg {
            height: 25px;
        }

        /* figure auto-number */
        #lightbox_caption > span:first-of-type {
            font-weight: bold;
            margin-right: 5px;
        }

        /* lightbox image when hovered */
        #lightbox_img:hover {
            cursor: grab;
        }

        /* lightbox image when grabbed */
        #lightbox_img:active {
            cursor: grabbing;
        }
    }

    /* when on screen < 480px wide */
    @media only screen and (max-width: 480px) {
        /* make navigation buttons skinnier on small screens to make more room for caption text */
        .lightbox_button {
            width: 50px;
            min-width: 50px;
        }
    }

    /* always hide lightbox on print */
    @media only print {
        #lightbox_overlay {
            display: none;
        }
    }

    /* -------------------------------------------------- */
    /* hypothesis (annotations) plugin */
    /* -------------------------------------------------- */

    /* side panel */
    .annotator-frame {
        width: 280px !important;
        z-index: 0 !important;
    }

    /* match highlight color to rest of theme */
    .annotator-highlights-always-on .annotator-hl {
        background-color: #ffeb3b !important;
    }

    /* match focused color to rest of theme */
    .annotator-hl.annotator-hl-focused {
        background-color: #ff8a65 !important;
    }

    /* match bucket bar color to rest of theme */
    .annotator-bucket-bar {
        background: #f5f5f5 !important;
    }

    /* always hide toolbar and tooltip on print */
    @media only print {
        .annotator-frame {
            display: none !important;
        }

        hypothesis-adder {
            display: none !important;
        }
    }
</style>
<!-- anchors plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin adds an anchor next to each of a certain type
        // of element that provides a human-readable url to that specific
        // item/position in the document (eg "manuscript.html#abstract"). It
        // also makes it such that scrolling out of view of a target removes
        // its identifier from the url.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'anchors';

        // default plugin options
        const options = {
            // which types of elements to add anchors next to, in
            // "document.querySelector" format
            typesQuery: 'h1, h2, h3, [id^="fig:"], [id^="tbl:"], [id^="eq:"]',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // add anchor to each element of specified types
            const elements = document.querySelectorAll(options.typesQuery);
            for (const element of elements)
                addAnchor(element);

            // attach scroll listener to window
            window.addEventListener('scroll', onScroll);
        }

        // when window is scrolled
        function onScroll() {
            // if url has hash and user has scrolled out of view of hash
            // target, remove hash from url
            const tolerance = 100;
            const target = getHashTarget();
            if (target) {
                if (
                    target.getBoundingClientRect().top >
                        window.innerHeight + tolerance ||
                    target.getBoundingClientRect().bottom < 0 - tolerance
                )
                    history.pushState(null, null, ' ');
            }
        }

        // add anchor to element
        function addAnchor(element) {
            let addTo; // element to add anchor button to

            // if figure or table, modify withId and addTo to get expected
            // elements
            if (element.id.indexOf('fig:') === 0) {
                addTo = element.querySelector('figcaption');
            } else if (element.id.indexOf('tbl:') === 0) {
                addTo = element.querySelector('caption');
            } else if (element.id.indexOf('eq:') === 0) {
                addTo = element.querySelector('.eqnos-number');
            }

            addTo = addTo || element;
            const id = element.id || null;

            // do not add anchor if element doesn't have assigned id.
            // id is generated by pandoc and is assumed to be unique and
            // human-readable
            if (!id)
                return;

            // create anchor button
            const anchor = document.createElement('a');
            anchor.innerHTML = document.querySelector('.icon_link').innerHTML;
            anchor.title = 'Link to this part of the document';
            anchor.classList.add('icon_button', 'anchor');
            anchor.dataset.ignore = 'true';
            anchor.href = '#' + id;
            addTo.appendChild(anchor);
        }

        // get element that is target of link or url hash
        function getHashTarget() {
            const hash = window.location.hash;
            const id = hash.slice(1);
            let target = document.querySelector('[id="' + id + '"]');
            if (!target)
                return;

            // if figure or table, modify target to get expected element
            if (id.indexOf('fig:') === 0)
                target = target.querySelector('figure');
            if (id.indexOf('tbl:') === 0)
                target = target.querySelector('table');

            return target;
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- link icon -->

<template class="icon_link">
    <!-- modified from: https://fontawesome.com/icons/link -->
    <svg width="16" height="16" viewBox="0 0 512 512">
        <path
            fill="currentColor"
            d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"
        ></path>
    </svg>
</template>
<!-- accordion plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin allows sections of content under <h2> headings
        // to be collapsible.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'accordion';

        // default plugin options
        const options = {
            // whether to always start expanded ('false'), always start
            // collapsed ('true'), or start collapsed when screen small ('auto')
            startCollapsed: 'auto',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // run through each <h2> heading
            const headings = document.querySelectorAll('h2');
            for (const heading of headings) {
                addArrow(heading);

                // start expanded/collapsed based on option
                if (
                    options.startCollapsed === 'true' ||
                    (options.startCollapsed === 'auto' && isSmallScreen())
                )
                    collapseHeading(heading);
                else
                    expandHeading(heading);
            }

            // attach hash change listener to window
            window.addEventListener('hashchange', onHashChange);
        }

        // when hash (eg manuscript.html#introduction) changes
        function onHashChange() {
            const target = getHashTarget();
            if (target)
                goToElement(target);
        }

        // add arrow to heading
        function addArrow(heading) {
            // add arrow button
            const arrow = document.createElement('button');
            arrow.innerHTML = document.querySelector(
                '.icon_angle_down'
            ).innerHTML;
            arrow.classList.add('icon_button', 'accordion_arrow');
            heading.insertBefore(arrow, heading.firstChild);

            // attach click listener to heading and button
            heading.addEventListener('click', onHeadingClick);
            arrow.addEventListener('click', onArrowClick);
        }

        // determine if on mobile-like device with small screen
        function isSmallScreen() {
            return Math.min(window.innerWidth, window.innerHeight) < 480;
        }

        // scroll to and focus element
        function goToElement(element, offset) {
            // expand accordion section if collapsed
            expandElement(element);
            const y =
                getRectInView(element).top -
                getRectInView(document.documentElement).top -
                (offset || 0);
            // trigger any function listening for "onscroll" event
            window.dispatchEvent(new Event('scroll'));
            window.scrollTo(0, y);
            document.activeElement.blur();
            element.focus();
        }

        // get element that is target of hash
        function getHashTarget(link) {
            const hash = link ? link.hash : window.location.hash;
            const id = hash.slice(1);
            let target = document.querySelector('[id="' + id + '"]');
            if (!target)
                return;

            // if figure or table, modify target to get expected element
            if (id.indexOf('fig:') === 0)
                target = target.querySelector('figure');
            if (id.indexOf('tbl:') === 0)
                target = target.querySelector('table');

            return target;
        }

        // when <h2> heading is clicked
        function onHeadingClick(event) {
            // only collapse if <h2> itself is target of click (eg, user did
            // not click on anchor within <h2>)
            if (event.target === this)
                toggleCollapse(this);
        }

        // when arrow button is clicked
        function onArrowClick() {
            toggleCollapse(this.parentNode);
        }

        // collapse section if expanded, expand if collapsed
        function toggleCollapse(heading) {
            if (heading.dataset.collapsed === 'false')
                collapseHeading(heading);
            else
                expandHeading(heading);
        }

        // elements to exclude from collapse, such as table of contents panel,
        // hypothesis panel, etc
        const exclude = '#toc_panel, div.annotator-frame, #lightbox_overlay';

        // collapse section
        function collapseHeading(heading) {
            heading.setAttribute('data-collapsed', 'true');
            const children = getChildren(heading);
            for (const child of children)
                child.setAttribute('data-collapsed', 'true');
        }

        // expand section
        function expandHeading(heading) {
            heading.setAttribute('data-collapsed', 'false');
            const children = getChildren(heading);
            for (const child of children)
                child.setAttribute('data-collapsed', 'false');
        }

        // get list of elements between this <h2> and next <h2> or <h1>
        // ("children" of the <h2> section)
        function getChildren(heading) {
            return nextUntil(heading, 'h2, h1', exclude);
        }

        // get position/dimensions of element or viewport
        function getRectInView(element) {
            let rect = {};
            rect.left = 0;
            rect.top = 0;
            rect.right = document.documentElement.clientWidth;
            rect.bottom = document.documentElement.clientHeight;
            let style = {};

            if (element instanceof HTMLElement) {
                rect = element.getBoundingClientRect();
                style = window.getComputedStyle(element);
            }

            const margin = {};
            margin.left = parseFloat(style.marginLeftWidth) || 0;
            margin.top = parseFloat(style.marginTopWidth) || 0;
            margin.right = parseFloat(style.marginRightWidth) || 0;
            margin.bottom = parseFloat(style.marginBottomWidth) || 0;

            const border = {};
            border.left = parseFloat(style.borderLeftWidth) || 0;
            border.top = parseFloat(style.borderTopWidth) || 0;
            border.right = parseFloat(style.borderRightWidth) || 0;
            border.bottom = parseFloat(style.borderBottomWidth) || 0;

            const newRect = {};
            newRect.left = rect.left + margin.left + border.left;
            newRect.top = rect.top + margin.top + border.top;
            newRect.right = rect.right + margin.right + border.right;
            newRect.bottom = rect.bottom + margin.bottom + border.bottom;
            newRect.width = newRect.right - newRect.left;
            newRect.height = newRect.bottom - newRect.top;

            return newRect;
        }

        // get list of elements after a start element up to element matching
        // query
        function nextUntil(element, query, exclude) {
            const elements = [];
            while (element = element.nextElementSibling, element) {
                if (element.matches(query))
                    break;
                if (!element.matches(exclude))
                    elements.push(element);
            }
            return elements;
        }

        // get closest element before specified element that matches query
        function firstBefore(element, query) {
            while (
                element &&
                element !== document.body &&
                !element.matches(query)
            )
                element = element.previousElementSibling || element.parentNode;

            return element;
        }

        // check if element is part of collapsed heading
        function isCollapsed(element) {
            while (element && element !== document.body) {
                if (element.dataset.collapsed === 'true')
                    return true;
                element = element.parentNode;
            }
            return false;
        }

        // expand heading containing element if necesary
        function expandElement(element) {
            if (isCollapsed(element)) {
                const heading = firstBefore(element, 'h2');
                if (heading)
                    heading.click();
            }
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- angle down icon -->

<template class="icon_angle_down">
    <!-- modified from: https://fontawesome.com/icons/angle-down -->
    <svg width="16" height="16" viewBox="0 0 448 512">
        <path
            fill="currentColor"
            d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"
        ></path>
    </svg>
</template>
<!-- tooltips plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin makes it such that when the user hovers or
        // focuses a link to a citation or figure, a tooltip appears with a
        // preview of the reference content, along with arrows to navigate
        // between instances of the same reference in the document.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'tooltips';

        // default plugin options
        const options = {
            // whether user must click off to close tooltip instead of just
            // un-hovering
            clickClose: 'false',
            // delay (in ms) between opening and closing tooltip
            delay: '100',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            const links = getLinks();
            for (const link of links) {
                // attach hover and focus listeners to link
                link.addEventListener('mouseover', onLinkHover);
                link.addEventListener('mouseleave', onLinkUnhover);
                link.addEventListener('focus', onLinkFocus);
                link.addEventListener('touchend', onLinkTouch);
            }

            // attach mouse, key, and resize listeners to window
            window.addEventListener('mousedown', onClick);
            window.addEventListener('touchstart', onClick);
            window.addEventListener('keyup', onKeyUp);
            window.addEventListener('resize', onResize);
        }

        // when link is hovered
        function onLinkHover() {
            // function to open tooltip
            const delayOpenTooltip = function() {
                openTooltip(this);
            }.bind(this);

            // run open function after delay
            this.openTooltipTimer = window.setTimeout(
                delayOpenTooltip,
                options.delay
            );
        }

        // when mouse leaves link
        function onLinkUnhover() {
            // cancel opening tooltip
            window.clearTimeout(this.openTooltipTimer);

            // don't close on unhover if option specifies
            if (options.clickClose === 'true')
                return;

            // function to close tooltip
            const delayCloseTooltip = function() {
                // if tooltip open and if mouse isn't over tooltip, close
                const tooltip = document.getElementById('tooltip');
                if (tooltip && !tooltip.matches(':hover'))
                    closeTooltip();
            };

            // run close function after delay
            this.closeTooltipTimer = window.setTimeout(
                delayCloseTooltip,
                options.delay
            );
        }

        // when link is focused (tabbed to)
        function onLinkFocus(event) {
            openTooltip(this);
        }

        // when link is touched on touch screen
        function onLinkTouch(event) {
            // attempt to force hover state on first tap always, and trigger
            // regular link click (and navigation) on second tap
            if (event.target === document.activeElement)
                event.target.click();
            else {
                document.activeElement.blur();
                event.target.focus();
            }
            if (event.cancelable)
                event.preventDefault();
            event.stopPropagation();
            return false;
        }

        // when mouse is clicked anywhere in window
        function onClick(event) {
            closeTooltip();
        }

        // when key pressed
        function onKeyUp(event) {
            if (!event || !event.key)
                return;

            switch (event.key) {
                // trigger click of prev button
                case 'ArrowLeft':
                    const prevButton = document.getElementById(
                        'tooltip_prev_button'
                    );
                    if (prevButton)
                        prevButton.click();
                    break;
                // trigger click of next button
                case 'ArrowRight':
                    const nextButton = document.getElementById(
                        'tooltip_next_button'
                    );
                    if (nextButton)
                        nextButton.click();
                    break;
                // close on esc
                case 'Escape':
                    closeTooltip();
                    break;
            }
        }

        // when window is resized or zoomed
        function onResize() {
            closeTooltip();
        }

        // get all links of types we wish to handle
        function getLinks() {
            const queries = [];
            // exclude buttons, anchor links, toc links, etc
            const exclude =
                ':not(.button):not(.icon_button):not(.anchor):not(.toc_link)';
            queries.push('a[href^="#ref-"]' + exclude); // citation links
            queries.push('a[href^="#fig:"]' + exclude); // figure links
            const query = queries.join(', ');
            return document.querySelectorAll(query);
        }

        // get links with same target, get index of link in set, get total
        // same links
        function getSameLinks(link) {
            const sameLinks = [];
            const links = getLinks();
            for (const otherLink of links) {
                if (
                    otherLink.getAttribute('href') === link.getAttribute('href')
                )
                    sameLinks.push(otherLink);
            }

            return {
                elements: sameLinks,
                index: sameLinks.indexOf(link),
                total: sameLinks.length
            };
        }

        // open tooltip
        function openTooltip(link) {
            // delete tooltip if it exists, start fresh
            closeTooltip();

            // make tooltip element
            const tooltip = makeTooltip(link);

            // if source couldn't be found and tooltip not made, exit
            if (!tooltip)
                return;

            // make navbar elements
            const navBar = makeNavBar(link);
            if (navBar)
                tooltip.firstElementChild.appendChild(navBar);

            // attach tooltip to page
            document.body.appendChild(tooltip);

            // position tooltip
            const position = function() {
                positionTooltip(link);
            };
            position();

            // if tooltip contains images, position again after they've loaded
            const imgs = tooltip.querySelectorAll('img');
            for (const img of imgs)
                img.addEventListener('load', position);
        }

        // close (delete) tooltip
        function closeTooltip() {
            const tooltip = document.getElementById('tooltip');
            if (tooltip)
                tooltip.remove();
        }

        // make tooltip
        function makeTooltip(link) {
            // get target element that link points to
            const source = getSource(link);

            // if source can't be found, exit
            if (!source)
                return;

            // create new tooltip
            const tooltip = document.createElement('div');
            tooltip.id = 'tooltip';
            const tooltipContent = document.createElement('div');
            tooltipContent.id = 'tooltip_content';
            tooltip.appendChild(tooltipContent);

            // make copy of source node and put in tooltip
            const sourceCopy = makeCopy(source);
            tooltipContent.appendChild(sourceCopy);

            // attach mouse event listeners
            tooltip.addEventListener('click', onTooltipClick);
            tooltip.addEventListener('mousedown', onTooltipClick);
            tooltip.addEventListener('touchstart', onTooltipClick);
            tooltip.addEventListener('mouseleave', onTooltipUnhover);

            // (for interaction with lightbox plugin)
            // transfer click on tooltip copied img to original img
            const sourceImg = source.querySelector('img');
            const sourceCopyImg = sourceCopy.querySelector('img');
            if (sourceImg && sourceCopyImg) {
                const clickImg = function() {
                    sourceImg.click();
                    closeTooltip();
                };
                sourceCopyImg.addEventListener('click', clickImg);
            }

            return tooltip;
        }

        // make carbon copy of html dom element
        function makeCopy(source) {
            const sourceCopy = source.cloneNode(true);

            // delete elements marked with ignore (eg anchor and jump buttons)
            const deleteFromCopy = sourceCopy.querySelectorAll(
                '[data-ignore="true"]'
            );
            for (const element of deleteFromCopy)
                element.remove();

            // delete certain element attributes
            const attributes = [
                'id',
                'data-collapsed',
                'data-selected',
                'data-highlighted',
                'data-glow'
            ];
            for (const attribute of attributes) {
                sourceCopy.removeAttribute(attribute);
                const elements = sourceCopy.querySelectorAll(
                    '[' + attribute + ']'
                );
                for (const element of elements)
                    element.removeAttribute(attribute);
            }

            return sourceCopy;
        }

        // when tooltip is clicked
        function onTooltipClick(event) {
            // when user clicks on tooltip, stop click from transferring
            // outside of tooltip (eg, click off to close tooltip, or eg click
            // off to unhighlight same refs)
            event.stopPropagation();
        }

        // when tooltip is unhovered
        function onTooltipUnhover(event) {
            if (options.clickClose === 'true')
                return;

            // make sure new mouse/touch/focus no longer over tooltip or any
            // element within it
            const tooltip = document.getElementById('tooltip');
            if (!tooltip)
                return;
            if (this.contains(event.relatedTarget))
                return;

            closeTooltip();
        }

        // make nav bar to go betwen prev/next instances of same reference
        function makeNavBar(link) {
            // find other links to the same source
            const sameLinks = getSameLinks(link);

            // don't show nav bar when singular reference
            if (sameLinks.total <= 1)
                return;

            // find prev/next links with same target
            const prevLink = getPrevLink(link, sameLinks);
            const nextLink = getNextLink(link, sameLinks);

            // create nav bar
            const navBar = document.createElement('div');
            navBar.id = 'tooltip_nav_bar';
            const text = sameLinks.index + 1 + ' of ' + sameLinks.total;

            // create nav bar prev/next buttons
            const prevButton = document.createElement('button');
            const nextButton = document.createElement('button');
            prevButton.id = 'tooltip_prev_button';
            nextButton.id = 'tooltip_next_button';
            prevButton.title =
                'Jump to the previous occurence of this item in the document [←]';
            nextButton.title =
                'Jump to the next occurence of this item in the document [→]';
            prevButton.classList.add('icon_button');
            nextButton.classList.add('icon_button');
            prevButton.innerHTML = document.querySelector(
                '.icon_caret_left'
            ).innerHTML;
            nextButton.innerHTML = document.querySelector(
                '.icon_caret_right'
            ).innerHTML;
            navBar.appendChild(prevButton);
            navBar.appendChild(document.createTextNode(text));
            navBar.appendChild(nextButton);

            // attach click listeners to buttons
            prevButton.addEventListener('click', function() {
                onPrevNextClick(link, prevLink);
            });
            nextButton.addEventListener('click', function() {
                onPrevNextClick(link, nextLink);
            });

            return navBar;
        }

        // get previous link with same target
        function getPrevLink(link, sameLinks) {
            if (!sameLinks)
                sameLinks = getSameLinks(link);
            // wrap index to other side if < 1
            let index;
            if (sameLinks.index - 1 >= 0)
                index = sameLinks.index - 1;
            else
                index = sameLinks.total - 1;
            return sameLinks.elements[index];
        }

        // get next link with same target
        function getNextLink(link, sameLinks) {
            if (!sameLinks)
                sameLinks = getSameLinks(link);
            // wrap index to other side if > total
            let index;
            if (sameLinks.index + 1 <= sameLinks.total - 1)
                index = sameLinks.index + 1;
            else
                index = 0;
            return sameLinks.elements[index];
        }

        // get element that is target of link or url hash
        function getSource(link) {
            const hash = link ? link.hash : window.location.hash;
            const id = hash.slice(1);
            let target = document.querySelector('[id="' + id + '"]');
            if (!target)
                return;

            // if ref or figure, modify target to get expected element
            if (id.indexOf('ref-') === 0)
                target = target.querySelector('p');
            else if (id.indexOf('fig:') === 0)
                target = target.querySelector('figure');

            return target;
        }

        // when prev/next arrow button is clicked
        function onPrevNextClick(link, prevNextLink) {
            if (link && prevNextLink)
                goToElement(prevNextLink, window.innerHeight * 0.5);
        }

        // scroll to and focus element
        function goToElement(element, offset) {
            // expand accordion section if collapsed
            expandElement(element);
            const y =
                getRectInView(element).top -
                getRectInView(document.documentElement).top -
                (offset || 0);
            // trigger any function listening for "onscroll" event
            window.dispatchEvent(new Event('scroll'));
            window.scrollTo(0, y);
            document.activeElement.blur();
            element.focus();
        }

        // determine position to place tooltip based on link position in
        // viewport and tooltip size
        function positionTooltip(link, left, top) {
            const tooltipElement = document.getElementById('tooltip');
            if (!tooltipElement)
                return;

            // get convenient vars for position/dimensions of
            // link/tooltip/page/view
            link = getRectInPage(link);
            const tooltip = getRectInPage(tooltipElement);
            const view = getRectInPage();

            // horizontal positioning
            if (left)
                // use explicit value
                left = left;
            else if (link.left + tooltip.width < view.right)
                // fit tooltip to right of link
                left = link.left;
            else if (link.right - tooltip.width > view.left)
                // fit tooltip to left of link
                left = link.right - tooltip.width;
            // center tooltip in view
            else
                left = (view.right - view.left) / 2 - tooltip.width / 2;

            // vertical positioning
            if (top)
                // use explicit value
                top = top;
            else if (link.top - tooltip.height > view.top)
                // fit tooltip above link
                top = link.top - tooltip.height;
            else if (link.bottom + tooltip.height < view.bottom)
                // fit tooltip below link
                top = link.bottom;
            else {
                // center tooltip in view
                top = view.top + view.height / 2 - tooltip.height / 2;
                // nudge off of link to left/right if possible
                if (link.right + tooltip.width < view.right)
                    left = link.right;
                else if (link.left - tooltip.width > view.left)
                    left = link.left - tooltip.width;
            }

            tooltipElement.style.left = left + 'px';
            tooltipElement.style.top = top + 'px';
        }

        // get position/dimensions of element or viewport
        function getRectInView(element) {
            let rect = {};
            rect.left = 0;
            rect.top = 0;
            rect.right = document.documentElement.clientWidth;
            rect.bottom = document.documentElement.clientHeight;
            let style = {};

            if (element instanceof HTMLElement) {
                rect = element.getBoundingClientRect();
                style = window.getComputedStyle(element);
            }

            const margin = {};
            margin.left = parseFloat(style.marginLeftWidth) || 0;
            margin.top = parseFloat(style.marginTopWidth) || 0;
            margin.right = parseFloat(style.marginRightWidth) || 0;
            margin.bottom = parseFloat(style.marginBottomWidth) || 0;

            const border = {};
            border.left = parseFloat(style.borderLeftWidth) || 0;
            border.top = parseFloat(style.borderTopWidth) || 0;
            border.right = parseFloat(style.borderRightWidth) || 0;
            border.bottom = parseFloat(style.borderBottomWidth) || 0;

            const newRect = {};
            newRect.left = rect.left + margin.left + border.left;
            newRect.top = rect.top + margin.top + border.top;
            newRect.right = rect.right + margin.right + border.right;
            newRect.bottom = rect.bottom + margin.bottom + border.bottom;
            newRect.width = newRect.right - newRect.left;
            newRect.height = newRect.bottom - newRect.top;

            return newRect;
        }

        // get position of element relative to page
        function getRectInPage(element) {
            const rect = getRectInView(element);
            const body = getRectInView(document.body);

            const newRect = {};
            newRect.left = rect.left - body.left;
            newRect.top = rect.top - body.top;
            newRect.right = rect.right - body.left;
            newRect.bottom = rect.bottom - body.top;
            newRect.width = rect.width;
            newRect.height = rect.height;

            return newRect;
        }

        // (for interaction with accordion plugin)
        // get closest element before specified element that matches query
        function firstBefore(element, query) {
            while (
                element &&
                element !== document.body &&
                !element.matches(query)
            )
                element = element.previousElementSibling || element.parentNode;

            return element;
        }

        // (for interaction with accordion plugin)
        // check if element is part of collapsed heading
        function isCollapsed(element) {
            while (element && element !== document.body) {
                if (element.dataset.collapsed === 'true')
                    return true;
                element = element.parentNode;
            }
            return false;
        }

        // (for interaction with accordion plugin)
        // expand heading containing element if necesary
        function expandElement(element) {
            if (isCollapsed(element)) {
                const heading = firstBefore(element, 'h2');
                if (heading)
                    heading.click();
            }
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
    <!-- modified from: https://fontawesome.com/icons/caret-left -->
    <svg width="16" height="16" viewBox="0 0 192 512">
        <path
            fill="currentColor"
            d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
        ></path>
    </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
    <!-- modified from: https://fontawesome.com/icons/caret-right -->
    <svg width="16" height="16" viewBox="0 0 192 512">
        <path
            fill="currentColor"
            d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
        ></path>
    </svg>
</template>
<!-- jump to first plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin adds a button next to each reference entry,
        // figure, and table that jumps the page to the first occurrence of a
        // link to that item in the manuscript.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'jumpToFirst';

        // default plugin options
        const options = {
            // whether to add buttons next to reference entries
            references: 'true',
            // whether to add buttons next to figures
            figures: 'true',
            // whether to add buttons next to tables
            tables: 'true',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            if (options.references !== 'false')
                makeReferenceButtons();
            if (options.figures !== 'false')
                makeFigureButtons();
            if (options.tables !== 'false')
                makeTableButtons();
        }

        // when jump button clicked
        function onButtonClick() {
            const first = getFirstOccurrence(this.dataset.id);
            if (!first)
                return;

            // update url hash so navigating "back" in history will return
            // user to jump button
            window.location.hash = this.dataset.id;
            // scroll to link
            window.setTimeout(function() {
                goToElement(first, window.innerHeight * 0.5);
            }, 0);
        }

        // get first occurence of link to item in document
        function getFirstOccurrence(id) {
            let query = 'a';
            query += '[href="#' + id + '"]';
            // exclude buttons, anchor links, toc links, etc
            query +=
                ':not(.button):not(.icon_button):not(.anchor):not(.toc_link)';
            return document.querySelector(query);
        }

        // add button next to each reference entry
        function makeReferenceButtons() {
            const references = document.querySelectorAll('div[id^="ref-"]');
            for (const reference of references) {
                // get reference id and element to add button to
                const id = reference.id;
                const container = reference.firstElementChild;
                const first = getFirstOccurrence(id);

                // if can't find link to reference, ignore
                if (!first)
                    continue;

                // make jump button
                let button = document.createElement('button');
                button.classList.add('icon_button', 'jump_arrow');
                button.title =
                    'Jump to the first occurence of this reference in the document';
                button.innerHTML = document.querySelector(
                    '.icon_angle_double_up'
                ).innerHTML;
                button.dataset.id = id;
                button.dataset.ignore = 'true';
                container.innerHTML = button.outerHTML + container.innerHTML;
                button = container.firstElementChild;
                button.addEventListener('click', onButtonClick);
            }
        }

        // add button next to each figure
        function makeFigureButtons() {
            const figures = document.querySelectorAll('[id^="fig:"]');
            for (const figure of figures) {
                // get figure id and element to add button to
                const id = figure.id;
                const container = figure.querySelector('figcaption') || figure;
                const first = getFirstOccurrence(id);

                // if can't find link to figure, ignore
                if (!first)
                    continue;

                // make jump button
                const button = document.createElement('button');
                button.classList.add('icon_button', 'jump_arrow');
                button.title =
                    'Jump to the first occurence of this figure in the document';
                button.innerHTML = document.querySelector(
                    '.icon_angle_double_up'
                ).innerHTML;
                button.dataset.id = id;
                button.dataset.ignore = 'true';
                container.insertBefore(button, container.firstElementChild);
                button.addEventListener('click', onButtonClick);
            }
        }

        // add button next to each figure
        function makeTableButtons() {
            const tables = document.querySelectorAll('[id^="tbl:"]');
            for (const table of tables) {
                // get ref id and element to add button to
                const id = table.id;
                const container = table.querySelector('caption') || table;
                const first = getFirstOccurrence(id);

                // if can't find link to table, ignore
                if (!first)
                    continue;

                // make jump button
                const button = document.createElement('button');
                button.classList.add('icon_button', 'jump_arrow');
                button.title =
                    'Jump to the first occurence of this table in the document';
                button.innerHTML = document.querySelector(
                    '.icon_angle_double_up'
                ).innerHTML;
                button.dataset.id = id;
                button.dataset.ignore = 'true';
                container.insertBefore(button, container.firstElementChild);
                button.addEventListener('click', onButtonClick);
            }
        }

        // scroll to and focus element
        function goToElement(element, offset) {
            // expand accordion section if collapsed
            expandElement(element);
            const y =
                getRectInView(element).top -
                getRectInView(document.documentElement).top -
                (offset || 0);
            // trigger any function listening for "onscroll" event
            window.dispatchEvent(new Event('scroll'));
            window.scrollTo(0, y);
            document.activeElement.blur();
            element.focus();
        }

        // get position/dimensions of element or viewport
        function getRectInView(element) {
            let rect = {};
            rect.left = 0;
            rect.top = 0;
            rect.right = document.documentElement.clientWidth;
            rect.bottom = document.documentElement.clientHeight;
            let style = {};

            if (element instanceof HTMLElement) {
                rect = element.getBoundingClientRect();
                style = window.getComputedStyle(element);
            }

            const margin = {};
            margin.left = parseFloat(style.marginLeftWidth) || 0;
            margin.top = parseFloat(style.marginTopWidth) || 0;
            margin.right = parseFloat(style.marginRightWidth) || 0;
            margin.bottom = parseFloat(style.marginBottomWidth) || 0;

            const border = {};
            border.left = parseFloat(style.borderLeftWidth) || 0;
            border.top = parseFloat(style.borderTopWidth) || 0;
            border.right = parseFloat(style.borderRightWidth) || 0;
            border.bottom = parseFloat(style.borderBottomWidth) || 0;

            const newRect = {};
            newRect.left = rect.left + margin.left + border.left;
            newRect.top = rect.top + margin.top + border.top;
            newRect.right = rect.right + margin.right + border.right;
            newRect.bottom = rect.bottom + margin.bottom + border.bottom;
            newRect.width = newRect.right - newRect.left;
            newRect.height = newRect.bottom - newRect.top;

            return newRect;
        }

        // get closest element before specified element that matches query
        function firstBefore(element, query) {
            while (
                element &&
                element !== document.body &&
                !element.matches(query)
            )
                element = element.previousElementSibling || element.parentNode;

            return element;
        }

        // check if element is part of collapsed heading
        function isCollapsed(element) {
            while (element && element !== document.body) {
                if (element.dataset.collapsed === 'true')
                    return true;
                element = element.parentNode;
            }
            return false;
        }

        // (for interaction with accordion plugin)
        // expand heading containing element if necesary
        function expandElement(element) {
            if (isCollapsed(element)) {
                const heading = firstBefore(element, 'h2');
                if (heading)
                    heading.click();
            }
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- angle double up icon -->

<template class="icon_angle_double_up">
    <!-- modified from: https://fontawesome.com/icons/angle-double-up -->
    <svg width="16" height="16" viewBox="0 0 320 512">
        <path
            fill="currentColor"
            d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"
        ></path>
    </svg>
</template>
<!-- link highlight plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin makes it such that when a user hovers or
        // focuses a link, other links that have the same target will be
        // highlighted. It also makes it such that when clicking a link, the
        // target of the link (eg reference, figure, table) is briefly
        // highlighted.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'linkHighlight';

        // default plugin options
        const options = {
            // whether to also highlight links that go to external urls
            externalLinks: 'false',
            // whether user must click off to unhighlight instead of just
            // un-hovering
            clickUnhighlight: 'false',
            // whether to also highlight links that are unique
            highlightUnique: 'true',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            const links = getLinks();
            for (const link of links) {
                // attach mouse and focus listeners to link
                link.addEventListener('mouseenter', onLinkFocus);
                link.addEventListener('focus', onLinkFocus);
                link.addEventListener('mouseleave', onLinkUnhover);
            }

            // attach click and hash change listeners to window
            window.addEventListener('click', onClick);
            window.addEventListener('touchstart', onClick);
            window.addEventListener('hashchange', onHashChange);

            // run hash change on window load in case user has navigated
            // directly to hash
            onHashChange();
        }

        // when link is focused (tabbed to) or hovered
        function onLinkFocus() {
            highlight(this);
        }

        // when link is unhovered
        function onLinkUnhover() {
            if (options.clickUnhighlight !== 'true')
                unhighlightAll();
        }

        // when the mouse is clicked anywhere in window
        function onClick(event) {
            unhighlightAll();
        }

        // when hash (eg manuscript.html#introduction) changes
        function onHashChange() {
            const target = getHashTarget();
            if (target)
                glowElement(target);
        }

        // get element that is target of link or url hash
        function getHashTarget(link) {
            const hash = link ? link.hash : window.location.hash;
            const id = hash.slice(1);
            let target = document.querySelector('[id="' + id + '"]');
            if (!target)
                return;

            return target;
        }

        // start glow sequence on an element
        function glowElement(element) {
            const startGlow = function() {
                onGlowEnd();
                element.dataset.glow = 'true';
                element.addEventListener('animationend', onGlowEnd);
            };
            const onGlowEnd = function() {
                element.removeAttribute('data-glow');
                element.removeEventListener('animationend', onGlowEnd);
            };
            startGlow();
        }

        // highlight link and all others with same target
        function highlight(link) {
            // force unhighlight all to start fresh
            unhighlightAll();

            // get links with same target
            if (!link)
                return;
            const sameLinks = getSameLinks(link);

            // if link unique and option is off, exit and don't highlight
            if (sameLinks.length <= 1 && options.highlightUnique !== 'true')
                return;

            // highlight all same links, and "select" (special highlight) this
            // one
            for (const sameLink of sameLinks) {
                if (sameLink === link)
                    sameLink.setAttribute('data-selected', 'true');
                else
                    sameLink.setAttribute('data-highlighted', 'true');
            }
        }

        // unhighlight all links
        function unhighlightAll() {
            const links = getLinks();
            for (const link of links) {
                link.setAttribute('data-selected', 'false');
                link.setAttribute('data-highlighted', 'false');
            }
        }

        // get links with same target
        function getSameLinks(link) {
            const results = [];
            const links = getLinks();
            for (const otherLink of links) {
                if (
                    otherLink.getAttribute('href') === link.getAttribute('href')
                )
                    results.push(otherLink);
            }
            return results;
        }

        // get all links of types we wish to handle
        function getLinks() {
            let query = 'a';
            if (options.externalLinks !== 'true')
                query += '[href^="#"]';
            // exclude buttons, anchor links, toc links, etc
            query +=
                ':not(.button):not(.icon_button):not(.anchor):not(.toc_link)';
            return document.querySelectorAll(query);
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>
<!-- table of contents plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin provides a "table of contents" (toc) panel on
        // the side of the document that allows the user to conveniently
        // navigate between sections of the document.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'tableOfContents';

        // default plugin options
        const options = {
            // which types of elements to add links for, in
            // "document.querySelector" format
            typesQuery: 'h1, h2, h3',
            // whether default behavior is to be closed ('false'), open
            // ('true'), or only open when screen wide enough to fit panel
            // ('auto'). note: still always starts closed when page loads.
            open: 'auto',
            // if list item is more than this many characters, text will be
            // truncated
            charLimit: '50',
            // whether or not to show bullets next to each toc item
            bullets: 'false',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // make toc panel and populate with entries (links to document
            // sections)
            const panel = makePanel();
            if (!panel)
                return;
            makeEntries(panel);
            document.body.insertBefore(panel, document.body.firstChild);

            closePanel();

            // attach click, scroll, and hash change listeners to window
            window.addEventListener('click', onClick);
            window.addEventListener('touchstart', onClick);
            window.addEventListener('scroll', onScroll);
            window.addEventListener('hashchange', onScroll);
            window.addEventListener('keyup', onKeyUp);
            onScroll();

            // add class to push document body down out of way of toc button
            document.body.classList.add('toc_body_nudge');
        }

        // determine if screen wide enough to fit toc panel
        function isSmallScreen() {
            // in default theme:
            // 816px = 8.5in = width of "page" (<body>) element
            // 260px = min width of toc panel (*2 for both sides of <body>)
            return window.innerWidth < 816 + 260 * 2;
        }

        // open/close panel based on option and screen size
        function openOrClosePanel() {
            if (
                options.open === 'true' ||
                (options.open === 'auto' && !isSmallScreen())
            )
                openPanel();
            else
                closePanel();
        }

        // when mouse is clicked anywhere in window
        function onClick() {
            const panel = document.getElementById('toc_panel');
            if (!panel)
                return;

            if (panel.dataset.open === 'true')
                openOrClosePanel();
        }

        // when window is scrolled or hash changed
        function onScroll() {
            highlightViewed();
        }

        // when key pressed
        function onKeyUp(event) {
            if (!event || !event.key)
                return;

            // close on esc
            if (event.key === 'Escape')
                closePanel();
        }

        // find entry of currently viewed document section in toc and highlight
        function highlightViewed() {
            const firstId = getFirstInView(options.typesQuery);

            // get toc entries (links), unhighlight all, then highlight viewed
            const list = document.getElementById('toc_list');
            if (!firstId || !list)
                return;
            const links = list.querySelectorAll('a');
            for (const link of links)
                link.dataset.viewing = 'false';
            const link = list.querySelector('a[href="#' + firstId + '"]');
            if (!link)
                return;
            link.dataset.viewing = 'true';
        }

        // get first or previous toc listed element in top half of view
        function getFirstInView(query) {
            // get all elements matching query and with id
            const elements = document.querySelectorAll(query);
            const elementsWithIds = [];
            for (const element of elements) {
                if (element.id)
                    elementsWithIds.push(element);
            }


            // get first or previous element in top half of view
            for (let i = 0; i < elementsWithIds.length; i++) {
                const element = elementsWithIds[i];
                const prevElement = elementsWithIds[Math.max(0, i - 1)];
                if (element.getBoundingClientRect().top >= 0) {
                    if (
                        element.getBoundingClientRect().top <
                        window.innerHeight / 2
                    )
                        return element.id;
                    else
                        return prevElement.id;
                }
            }
        }

        // make panel
        function makePanel() {
            // create panel
            const panel = document.createElement('div');
            panel.id = 'toc_panel';
            if (options.bullets === 'true')
                panel.dataset.bullets = 'true';

            // create header
            const header = document.createElement('div');
            header.id = 'toc_header';

            // create toc button
            const button = document.createElement('button');
            button.id = 'toc_button';
            button.innerHTML = document.querySelector(
                '.icon_th_list'
            ).innerHTML;
            button.classList.add('icon_button');

            // create header text
            const text = document.createElement('h3');
            text.innerHTML = 'Table of Contents';

            // create container for toc list
            const list = document.createElement('div');
            list.id = 'toc_list';

            // attach click listeners
            panel.addEventListener('click', onPanelClick);
            header.addEventListener('click', onHeaderClick);
            button.addEventListener('click', onButtonClick);

            // attach elements
            header.appendChild(button);
            header.appendChild(text);
            panel.appendChild(header);
            panel.appendChild(list);

            return panel;
        }

        // create toc entries (links) to each element of the specified types
        function makeEntries(panel) {
            const elements = document.querySelectorAll(options.typesQuery);
            for (const element of elements) {
                // do not add link if element doesn't have assigned id
                if (!element.id)
                    continue;

                // create link/list item
                const link = document.createElement('a');
                link.classList.add('toc_link');
                switch (element.tagName.toLowerCase()) {
                    case 'h1':
                        link.dataset.level = '1';
                        break;
                    case 'h2':
                        link.dataset.level = '2';
                        break;
                    case 'h3':
                        link.dataset.level = '3';
                        break;
                    case 'h4':
                        link.dataset.level = '4';
                        break;
                }
                link.title = element.innerText;
                let text = element.innerText;
                if (text.length > options.charLimit)
                    text = text.slice(0, options.charLimit) + '...';
                link.innerHTML = text;
                link.href = '#' + element.id;
                link.addEventListener('click', onLinkClick);

                // attach link
                panel.querySelector('#toc_list').appendChild(link);
            }
        }

        // when panel is clicked
        function onPanelClick(event) {
            // stop click from propagating to window/document and closing panel
            event.stopPropagation();
        }

        // when header itself is clicked
        function onHeaderClick(event) {
            togglePanel();
        }

        // when button is clicked
        function onButtonClick(event) {
            togglePanel();
            // stop header underneath button from also being clicked
            event.stopPropagation();
        }

        // when link is clicked
        function onLinkClick() {
            openOrClosePanel();
        }

        // open panel if closed, close if opened
        function togglePanel() {
            const panel = document.getElementById('toc_panel');
            if (!panel)
                return;

            if (panel.dataset.open === 'true')
                closePanel();
            else
                openPanel();
        }

        // open panel
        function openPanel() {
            const panel = document.getElementById('toc_panel');
            if (panel)
                panel.dataset.open = 'true';
        }

        // close panel
        function closePanel() {
            const panel = document.getElementById('toc_panel');
            if (panel)
                panel.dataset.open = 'false';
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- th list icon -->

<template class="icon_th_list">
    <!-- modified from: https://fontawesome.com/icons/th-list -->
    <svg width="16" height="16" viewBox="0 0 512 512" tabindex="-1">
        <path
            fill="currentColor"
            d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
            tabindex="-1"
        ></path>
    </svg>
</template>
<!-- lightbox plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin makes it such that when a user clicks on an
        // image, the image fills the screen and the user can pan/drag/zoom
        // the image and navigate between other images in the document.

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'lightbox';

        // default plugin options
        const options = {
            // list of possible zoom/scale factors
            zoomSteps:
                '0.1, 0.25, 0.333333, 0.5, 0.666666, 0.75, 1,' +
                '1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4, 5, 6, 7, 8',
            // whether to fit image to view ('fit'), display at 100% and shrink
            // if necessary ('shrink'), or always display at 100% ('100')
            defaultZoom: 'fit',
            // whether to zoom in/out toward center of view ('true') or mouse
            // ('false')
            centerZoom: 'false',
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // run through each <img> element
            const imgs = document.querySelectorAll('figure > img');
            let count = 1;
            for (const img of imgs) {
                img.classList.add('lightbox_document_img');
                img.dataset.number = count;
                img.dataset.total = imgs.length;
                img.addEventListener('click', openLightbox);
                count++;
            }

            // attach mouse and key listeners to window
            window.addEventListener('mousemove', onWindowMouseMove);
            window.addEventListener('keyup', onKeyUp);
        }

        // when mouse is moved anywhere in window
        function onWindowMouseMove(event) {
            window.mouseX = event.clientX;
            window.mouseY = event.clientY;
        }

        // when key pressed
        function onKeyUp(event) {
            if (!event || !event.key)
                return;

            switch (event.key) {
                // trigger click of prev button
                case 'ArrowLeft':
                    const prevButton = document.getElementById(
                        'lightbox_prev_button'
                    );
                    if (prevButton)
                        prevButton.click();
                    break;
                // trigger click of next button
                case 'ArrowRight':
                    const nextButton = document.getElementById(
                        'lightbox_next_button'
                    );
                    if (nextButton)
                        nextButton.click();
                    break;
                // close on esc
                case 'Escape':
                    closeLightbox();
                    break;
            }
        }

        // open lightbox
        function openLightbox() {
            const lightbox = makeLightbox(this);
            if (!lightbox)
                return;

            blurBody(lightbox);
            document.body.appendChild(lightbox);
        }

        // make lightbox
        function makeLightbox(img) {
            // delete lightbox if it exists, start fresh
            closeLightbox();

            // create screen overlay containing lightbox
            const overlay = document.createElement('div');
            overlay.id = 'lightbox_overlay';

            // create image info boxes
            const numberInfo = document.createElement('div');
            const zoomInfo = document.createElement('div');
            numberInfo.id = 'lightbox_number_info';
            zoomInfo.id = 'lightbox_zoom_info';

            // create container for image
            const imageContainer = document.createElement('div');
            imageContainer.id = 'lightbox_image_container';
            const lightboxImg = makeLightboxImg(
                img,
                imageContainer,
                numberInfo,
                zoomInfo
            );
            imageContainer.appendChild(lightboxImg);

            // create bottom container for caption and navigation buttons
            const bottomContainer = document.createElement('div');
            bottomContainer.id = 'lightbox_bottom_container';
            const caption = makeCaption(img);
            const prevButton = makePrevButton(img);
            const nextButton = makeNextButton(img);
            bottomContainer.appendChild(prevButton);
            bottomContainer.appendChild(caption);
            bottomContainer.appendChild(nextButton);

            // attach top middle and bottom to overlay
            overlay.appendChild(numberInfo);
            overlay.appendChild(zoomInfo);
            overlay.appendChild(imageContainer);
            overlay.appendChild(bottomContainer);

            return overlay;
        }

        // make <img> object that is intuitively draggable and zoomable
        function makeLightboxImg(
            sourceImg,
            container,
            numberInfoBox,
            zoomInfoBox
        ) {
            // create copy of source <img>
            const img = sourceImg.cloneNode(true);
            img.classList.remove('lightbox_document_img');
            img.removeAttribute('id');
            img.removeAttribute('width');
            img.removeAttribute('height');
            img.style.position = 'unset';
            img.style.margin = '0';
            img.style.padding = '0';
            img.style.width = '';
            img.style.height = '';
            img.style.minWidth = '';
            img.style.minHeight = '';
            img.style.maxWidth = '';
            img.style.maxHeight = '';
            img.id = 'lightbox_img';

            // build sorted list of unique zoomSteps, always including a 100%
            let zoomSteps = [];
            const optionsZooms = options.zoomSteps.split(/[^0-9.]/);
            for (const optionZoom of optionsZooms) {
                const newZoom = parseFloat(optionZoom);
                if (newZoom && !zoomSteps.includes(newZoom))
                    zoomSteps.push(newZoom);
            }
            if (!zoomSteps.includes(1))
                zoomSteps.push(1);
            zoomSteps = zoomSteps.sort(function sortNumber(a, b) {
                return a - b;
            });

            // <img> object property variables
            let zoom = 1;
            let translateX = 0;
            let translateY = 0;
            let clickMouseX = undefined;
            let clickMouseY = undefined;
            let clickTranslateX = undefined;
            let clickTranslateY = undefined;

            updateNumberInfo();

            // update image numbers displayed in info box
            function updateNumberInfo() {
                numberInfoBox.innerHTML =
                    sourceImg.dataset.number + ' of ' + sourceImg.dataset.total;
            }

            // update zoom displayed in info box
            function updateZoomInfo() {
                let zoomInfo = zoom * 100;
                if (!Number.isInteger(zoomInfo))
                    zoomInfo = zoomInfo.toFixed(2);
                zoomInfoBox.innerHTML = zoomInfo + '%';
            }

            // move to closest zoom step above current zoom
            const zoomIn = function() {
                for (const zoomStep of zoomSteps) {
                    if (zoomStep > zoom) {
                        zoom = zoomStep;
                        break;
                    }
                }
                updateTransform();
            };

            // move to closest zoom step above current zoom
            const zoomOut = function() {
                zoomSteps.reverse();
                for (const zoomStep of zoomSteps) {
                    if (zoomStep < zoom) {
                        zoom = zoomStep;
                        break;
                    }
                }
                zoomSteps.reverse();

                updateTransform();
            };

            // update display of <img> based on scale/translate properties
            const updateTransform = function() {
                // set transform
                img.style.transform =
                    'translate(' +
                    (translateX || 0) +
                    'px,' +
                    (translateY || 0) +
                    'px) scale(' +
                    (zoom || 1) +
                    ')';

                // get new width/height after scale
                const rect = img.getBoundingClientRect();
                // limit translate
                translateX = Math.max(translateX, -rect.width / 2);
                translateX = Math.min(translateX, rect.width / 2);
                translateY = Math.max(translateY, -rect.height / 2);
                translateY = Math.min(translateY, rect.height / 2);

                // set transform
                img.style.transform =
                    'translate(' +
                    (translateX || 0) +
                    'px,' +
                    (translateY || 0) +
                    'px) scale(' +
                    (zoom || 1) +
                    ')';

                updateZoomInfo();
            };

            // fit <img> to container
            const fit = function() {
                // no x/y offset, 100% zoom by default
                translateX = 0;
                translateY = 0;
                zoom = 1;

                // widths of <img> and container
                const imgWidth = img.naturalWidth;
                const imgHeight = img.naturalHeight;
                const containerWidth = parseFloat(
                    window.getComputedStyle(container).width
                );
                const containerHeight = parseFloat(
                    window.getComputedStyle(container).height
                );

                // how much zooming is needed to fit <img> to container
                const xRatio = imgWidth / containerWidth;
                const yRatio = imgHeight / containerHeight;
                const maxRatio = Math.max(xRatio, yRatio);
                const newZoom = 1 / maxRatio;

                // fit <img> to container according to option
                if (options.defaultZoom === 'shrink') {
                    if (maxRatio > 1)
                        zoom = newZoom;
                } else if (options.defaultZoom === 'fit')
                    zoom = newZoom;

                updateTransform();
            };

            // when mouse wheel is rolled anywhere in container
            const onContainerWheel = function(event) {
                if (!event)
                    return;

                // let ctrl + mouse wheel to zoom behave as normal
                if (event.ctrlKey)
                    return;

                // prevent normal scroll behavior
                event.preventDefault();
                event.stopPropagation();

                // point around which to scale img
                const viewRect = container.getBoundingClientRect();
                const viewX = (viewRect.left + viewRect.right) / 2;
                const viewY = (viewRect.top + viewRect.bottom) / 2;
                const originX = options.centerZoom === 'true' ? viewX : mouseX;
                const originY = options.centerZoom === 'true' ? viewY : mouseY;

                // get point on image under origin
                const oldRect = img.getBoundingClientRect();
                const oldPercentX = (originX - oldRect.left) / oldRect.width;
                const oldPercentY = (originY - oldRect.top) / oldRect.height;

                // increment/decrement zoom
                if (event.deltaY < 0)
                    zoomIn();
                if (event.deltaY > 0)
                    zoomOut();

                // get offset between previous image point and origin
                const newRect = img.getBoundingClientRect();
                const offsetX =
                    originX - (newRect.left + newRect.width * oldPercentX);
                const offsetY =
                    originY - (newRect.top + newRect.height * oldPercentY);

                // translate image to keep image point under origin
                translateX += offsetX;
                translateY += offsetY;

                // perform translate
                updateTransform();
            };

            // when container is clicked
            function onContainerClick(event) {
                // if container itself is target of click, and not other
                // element above it
                if (event.target === this)
                    closeLightbox();
            }

            // when mouse button is pressed on image
            const onImageMouseDown = function(event) {
                // store original mouse position relative to image
                clickMouseX = window.mouseX;
                clickMouseY = window.mouseY;
                clickTranslateX = translateX;
                clickTranslateY = translateY;
                event.stopPropagation();
                event.preventDefault();
            };

            // when mouse button is released anywhere in window
            const onWindowMouseUp = function(event) {
                // reset original mouse position
                clickMouseX = undefined;
                clickMouseY = undefined;
                clickTranslateX = undefined;
                clickTranslateY = undefined;

                // remove global listener if lightbox removed from document
                if (!document.body.contains(container))
                    window.removeEventListener('mouseup', onWindowMouseUp);
            };

            // when mouse is moved anywhere in window
            const onWindowMouseMove = function(event) {
                if (
                    clickMouseX === undefined ||
                    clickMouseY === undefined ||
                    clickTranslateX === undefined ||
                    clickTranslateY === undefined
                )
                    return;

                // offset image based on original and current mouse position
                translateX = clickTranslateX + window.mouseX - clickMouseX;
                translateY = clickTranslateY + window.mouseY - clickMouseY;
                updateTransform();
                event.preventDefault();

                // remove global listener if lightbox removed from document
                if (!document.body.contains(container))
                    window.removeEventListener('mousemove', onWindowMouseMove);
            };

            // when window is resized
            const onWindowResize = function(event) {
                fit();

                // remove global listener if lightbox removed from document
                if (!document.body.contains(container))
                    window.removeEventListener('resize', onWindowResize);
            };

            // attach the necessary event listeners
            img.addEventListener('dblclick', fit);
            img.addEventListener('mousedown', onImageMouseDown);
            container.addEventListener('wheel', onContainerWheel);
            container.addEventListener('mousedown', onContainerClick);
            container.addEventListener('touchstart', onContainerClick);
            window.addEventListener('mouseup', onWindowMouseUp);
            window.addEventListener('mousemove', onWindowMouseMove);
            window.addEventListener('resize', onWindowResize);

            // run fit() after lightbox atttached to document and <img> Loaded
            // so needed container and img dimensions available
            img.addEventListener('load', fit);

            return img;
        }

        // make caption
        function makeCaption(img) {
            const caption = document.createElement('div');
            caption.id = 'lightbox_caption';
            const captionSource = img.nextElementSibling;
            if (captionSource.tagName.toLowerCase() === 'figcaption') {
                const captionCopy = makeCopy(captionSource);
                caption.innerHTML = captionCopy.innerHTML;
            }

            caption.addEventListener('touchstart', function(event) {
                event.stopPropagation();
            });

            return caption;
        }

        // make carbon copy of html dom element
        function makeCopy(source) {
            const sourceCopy = source.cloneNode(true);

            // delete elements marked with ignore (eg anchor and jump buttons)
            const deleteFromCopy = sourceCopy.querySelectorAll(
                '[data-ignore="true"]'
            );
            for (const element of deleteFromCopy)
                element.remove();

            // delete certain element attributes
            const attributes = [
                'id',
                'data-collapsed',
                'data-selected',
                'data-highlighted',
                'data-glow'
            ];
            for (const attribute of attributes) {
                sourceCopy.removeAttribute(attribute);
                const elements = sourceCopy.querySelectorAll(
                    '[' + attribute + ']'
                );
                for (const element of elements)
                    element.removeAttribute(attribute);
            }

            return sourceCopy;
        }

        // make button to jump to previous image in document
        function makePrevButton(img) {
            const prevButton = document.createElement('button');
            prevButton.id = 'lightbox_prev_button';
            prevButton.title = 'Jump to the previous image in the document [←]';
            prevButton.classList.add('icon_button', 'lightbox_button');
            prevButton.innerHTML = document.querySelector(
                '.icon_caret_left'
            ).innerHTML;

            // attach click listeners to button
            prevButton.addEventListener('click', function() {
                getPrevImg(img).click();
            });

            return prevButton;
        }

        // make button to jump to next image in document
        function makeNextButton(img) {
            const nextButton = document.createElement('button');
            nextButton.id = 'lightbox_next_button';
            nextButton.title = 'Jump to the next image in the document [→]';
            nextButton.classList.add('icon_button', 'lightbox_button');
            nextButton.innerHTML = document.querySelector(
                '.icon_caret_right'
            ).innerHTML;

            // attach click listeners to button
            nextButton.addEventListener('click', function() {
                getNextImg(img).click();
            });

            return nextButton;
        }

        // get previous image in document
        function getPrevImg(img) {
            const imgs = document.querySelectorAll('.lightbox_document_img');

            // find index of provided img
            let index;
            for (index = 0; index < imgs.length; index++) {
                if (imgs[index] === img)
                    break;
            }


            // wrap index to other side if < 1
            if (index - 1 >= 0)
                index--;
            else
                index = imgs.length - 1;
            return imgs[index];
        }

        // get next image in document
        function getNextImg(img) {
            const imgs = document.querySelectorAll('.lightbox_document_img');

            // find index of provided img
            let index;
            for (index = 0; index < imgs.length; index++) {
                if (imgs[index] === img)
                    break;
            }


            // wrap index to other side if > total
            if (index + 1 <= imgs.length - 1)
                index++;
            else
                index = 0;
            return imgs[index];
        }

        // close lightbox
        function closeLightbox() {
            focusBody();

            const lightbox = document.getElementById('lightbox_overlay');
            if (lightbox)
                lightbox.remove();
        }

        // make all elements behind lightbox non-focusable
        function blurBody(overlay) {
            const all = document.querySelectorAll('*');
            for (const element of all)
                element.tabIndex = -1;
            document.body.classList.add('body_no_scroll');
        }

        // make all elements focusable again
        function focusBody() {
            const all = document.querySelectorAll('*');
            for (const element of all)
                element.removeAttribute('tabIndex');
            document.body.classList.remove('body_no_scroll');
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
    <!-- modified from: https://fontawesome.com/icons/caret-left -->
    <svg width="16" height="16" viewBox="0 0 192 512">
        <path
            fill="currentColor"
            d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
        ></path>
    </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
    <!-- modified from: https://fontawesome.com/icons/caret-right -->
    <svg width="16" height="16" viewBox="0 0 192 512">
        <path
            fill="currentColor"
            d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
        ></path>
    </svg>
</template>
<!-- attributes plugin -->

<script>
    (function() {
        // /////////////////////////
        // DESCRIPTION
        // /////////////////////////

        // This Manubot plugin allows arbitrary HTML attributes to be attached
        // to (almost) any element. Place an HTML comment inside or next to the
        // desired element in the format <!-- $attribute="value" -->

        // /////////////////////////
        // OPTIONS
        // /////////////////////////

        // plugin name prefix for url parameters
        const pluginName = 'attributes';

        // default plugin options
        const options = {
            // whether plugin is on or not
            enabled: 'true'
        };

        // change options above, or override with url parameter, eg:
        // 'manuscript.html?pluginName-enabled=false'

        // /////////////////////////
        // SCRIPT
        // /////////////////////////

        // start script
        function start() {
            // get list of comments in document
            const comments = findComments();

            for(const comment of comments)
                if (comment.parentElement)
                    addAttributes(
                        comment.parentElement,
                        comment.nodeValue.trim()
                    );
        }

        // add html attributes to specified element based on string of 
        // html attributes and values
        function addAttributes(element, text) {
            // regex's for finding attribute/value pairs in the format of
            // attribute="value" or attribute='value
            const regex2 = /\$([a-zA-Z\-]+)?=\"(.+?)\"/;
            const regex1 = /\$([a-zA-Z\-]+)?=\'(.+?)\'/;

            // loop through attribute/value pairs
            let match;
            while(match = text.match(regex2) || text.match(regex1)) {
                // get attribute and value from regex capture groups
                let attribute = match[1];
                let value = match[2];

                // remove from string
                text = text.substring(match.index + match[0].length);

                if (!attribute || !value)
                    break;

                // set attribute of parent element
                try {
                    element.setAttribute(attribute, value);
                } catch(error) {
                    console.log(error);
                }

                // special case for colspan
                if (attribute === 'colspan')
                    removeTableCells(element, value);
            }
        }

        // get list of comment elements in document
        function findComments() {
            const comments = [];

            // iterate over comment nodes in document
            function acceptNode(node) {
                return NodeFilter.FILTER_ACCEPT;
            }
            const iterator = document.createNodeIterator(
                document.body,
                NodeFilter.SHOW_COMMENT,
                acceptNode
            );
            let node;
            while(node = iterator.nextNode())
                comments.push(node);

            return comments;
        }

        // remove certain number of cells after specified cell
        function removeTableCells(cell, number) {
            number = parseInt(number);
            if (!number)
                return;

            // remove elements
            for(; number > 1; number--) {
                if (cell.nextElementSibling)
                    cell.nextElementSibling.remove();
            }
        }

        // load options from url parameters
        function loadOptions() {
            const url = window.location.search;
            const params = new URLSearchParams(url);
            for (const optionName of Object.keys(options)) {
                const paramName = pluginName + '-' + optionName;
                const param = params.get(paramName);
                if (param !== '' && param !== null)
                    options[optionName] = param;
            }
        }
        loadOptions();

        // start script when document is finished loading
        if (options.enabled === 'true')
            window.addEventListener('load', start);
    })();
</script>
<!-- math plugin configuration -->

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        "CommonHTML": { linebreaks: { automatic: true } },
        "HTML-CSS": { linebreaks: { automatic: true } },
        "SVG": { linebreaks: { automatic: true } },
        "fast-preview": { disabled: true }
    });
</script>

<!-- math plugin -->

<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML'>
    // /////////////////////////
    // DESCRIPTION
    // /////////////////////////

    // This third-party plugin 'MathJax' allows the proper rendering of
    // math/equations written in LaTeX.

    // https://www.mathjax.org/
</script>
<!-- annotations plugin configuration -->

<script>
    window.hypothesisConfig = function() {
        return {
            branding: {
                accentColor: '#2196f3',
                appBackgroundColor: '#f8f8f8',
                ctaBackgroundColor: '#f8f8f8',
                ctaTextColor: '#000000',
                selectionFontFamily: 'Open Sans, Helvetica, sans serif',
                annotationFontFamily: 'Open Sans, Helvetica, sans serif'
            }
        };
    };
</script>

<!-- annotations plugin -->

<script src='https://hypothes.is/embed.js'>
    // /////////////////////////
    // DESCRIPTION
    // /////////////////////////

    // This third-party plugin 'Hypothesis' allows public annotation of the
    // manuscript.

    // https://web.hypothes.is/
</script>
<!-- analytics plugin -->

<!-- copy and paste code from Google Analytics or similar service here -->
</body>
</html>
